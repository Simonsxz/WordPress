{"version":3,"file":"js/editor.js","mappings":"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CA,YAAY,OAAO;AACnB;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,QAAQ;AACnB;AACA,YAAY,SAAS;AACrB;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,cAAc;AACnC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,qBAAqB;AACnC;AACA,WAAW,GAAG;AACd,WAAW,gBAAgB;AAC3B;AACA;AACA,6BAAe,oCAAU;AACzB,YAAY,cAAc;AAC1B;;AAEA,YAAY,eAAe;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,uBAAuB;AACrC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,MAAM;AAClB;AACA,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,SAAS;AACvB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,eAAe,WAAW;AAC1B;AACA;AACA;;AAEA;AACA;AACA,eAAe,WAAW;AAC1B;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,oBAAoB,WAAW;AAC/B;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,sBAAsB;AACzC;;;;;;;UCvSA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D","sources":["webpack://nab/./node_modules/@automattic/interpolate-components/dist/esm/index.js","webpack://nab/./node_modules/@automattic/interpolate-components/dist/esm/tokenize.js","webpack://nab/./packages/editor/components/alternative-previewer/index.tsx","webpack://nab/./packages/editor/components/alternative-section/alternative-container.tsx","webpack://nab/./packages/editor/components/alternative-section/index.tsx","webpack://nab/./packages/editor/components/editor/index.tsx","webpack://nab/./packages/editor/components/experiment-name/index.tsx","webpack://nab/./packages/editor/components/goal-list/index.tsx","webpack://nab/./packages/editor/components/goal-section/index.tsx","webpack://nab/./packages/editor/components/goal/conversion-action-list/automatic.tsx","webpack://nab/./packages/editor/components/goal/conversion-action-list/index.ts","webpack://nab/./packages/editor/components/goal/conversion-action-list/regular.tsx","webpack://nab/./packages/editor/components/goal/conversion-action-type-list/index.tsx","webpack://nab/./packages/editor/components/goal/conversion-action/index.tsx","webpack://nab/./packages/editor/components/goal/ecommerce-goal-settings/index.tsx","webpack://nab/./packages/editor/components/goal/index.tsx","webpack://nab/./packages/editor/components/header/index.tsx","webpack://nab/./packages/editor/components/hooks.ts","webpack://nab/./packages/editor/components/layout/index.tsx","webpack://nab/./packages/editor/components/provider/index.tsx","webpack://nab/./packages/editor/components/segment-list/index.tsx","webpack://nab/./packages/editor/components/segment/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule-list/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule-type-category-list/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule-type-category/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule/index.tsx","webpack://nab/./packages/editor/components/segmentation-section/index.tsx","webpack://nab/./packages/editor/components/sidebar/description/index.tsx","webpack://nab/./packages/editor/components/sidebar/experiment-management/experiment-end-schedule/index.tsx","webpack://nab/./packages/editor/components/sidebar/experiment-management/experiment-start-schedule/index.tsx","webpack://nab/./packages/editor/components/sidebar/experiment-management/index.tsx","webpack://nab/./packages/editor/components/sidebar/experiment-management/status/index.tsx","webpack://nab/./packages/editor/components/sidebar/index.tsx","webpack://nab/./packages/editor/components/sidebar/scope/consistency-scope.tsx","webpack://nab/./packages/editor/components/sidebar/scope/index.tsx","webpack://nab/./packages/editor/components/sidebar/scope/new-rule-form.tsx","webpack://nab/./packages/editor/components/sidebar/scope/rule-list.tsx","webpack://nab/./packages/editor/components/status-manager/index.ts","webpack://nab/./packages/editor/components/status-manager/utils.ts","webpack://nab/./packages/editor/help.ts","webpack://nab/./packages/editor/index.tsx","webpack://nab/./packages/editor/store/actions/alternatives.ts","webpack://nab/./packages/editor/store/actions/conversion-actions.ts","webpack://nab/./packages/editor/store/actions/editor.ts","webpack://nab/./packages/editor/store/actions/experiment-data.ts","webpack://nab/./packages/editor/store/actions/goals.ts","webpack://nab/./packages/editor/store/actions/index.ts","webpack://nab/./packages/editor/store/actions/scope.ts","webpack://nab/./packages/editor/store/actions/segmentation.ts","webpack://nab/./packages/editor/store/config.ts","webpack://nab/./packages/editor/store/index.ts","webpack://nab/./packages/editor/store/reducer/alternatives.ts","webpack://nab/./packages/editor/store/reducer/conversion-actions.ts","webpack://nab/./packages/editor/store/reducer/editor.ts","webpack://nab/./packages/editor/store/reducer/experiment-data.ts","webpack://nab/./packages/editor/store/reducer/goals.ts","webpack://nab/./packages/editor/store/reducer/index.ts","webpack://nab/./packages/editor/store/reducer/scope.ts","webpack://nab/./packages/editor/store/reducer/segmentation.ts","webpack://nab/./packages/editor/store/selectors/alternatives.ts","webpack://nab/./packages/editor/store/selectors/conversion-actions.ts","webpack://nab/./packages/editor/store/selectors/editor.ts","webpack://nab/./packages/editor/store/selectors/experiment-data.ts","webpack://nab/./packages/editor/store/selectors/goals.ts","webpack://nab/./packages/editor/store/selectors/index.ts","webpack://nab/./packages/editor/store/selectors/scope.ts","webpack://nab/./packages/editor/store/selectors/segmentation.ts","webpack://nab/./packages/editor/store/side-effects/actions/editor.ts","webpack://nab/./packages/editor/store/side-effects/actions/index.ts","webpack://nab/./packages/safe-wordpress/api-fetch.ts","webpack://nab/./packages/safe-wordpress/block-editor.ts","webpack://nab/./packages/safe-wordpress/components.ts","webpack://nab/./packages/safe-wordpress/compose.ts","webpack://nab/./packages/safe-wordpress/core-data.ts","webpack://nab/./packages/safe-wordpress/data.ts","webpack://nab/./packages/safe-wordpress/dom-ready.ts","webpack://nab/./packages/safe-wordpress/element.ts","webpack://nab/./packages/safe-wordpress/hooks.ts","webpack://nab/./packages/safe-wordpress/i18n.ts","webpack://nab/./packages/safe-wordpress/notices.ts","webpack://nab/./packages/editor/components/alternative-previewer/style.scss?3bf2","webpack://nab/./packages/editor/components/alternative-section/style.scss?e5d1","webpack://nab/./packages/editor/components/editor/style.scss?786d","webpack://nab/./packages/editor/components/experiment-name/style.scss?827f","webpack://nab/./packages/editor/components/goal-list/style.scss?3bc8","webpack://nab/./packages/editor/components/goal-section/style.scss?d516","webpack://nab/./packages/editor/components/goal/conversion-action-list/style.scss?84da","webpack://nab/./packages/editor/components/goal/conversion-action-type-list/style.scss?bb60","webpack://nab/./packages/editor/components/goal/conversion-action/style.scss?2980","webpack://nab/./packages/editor/components/goal/ecommerce-goal-settings/style.scss?e59a","webpack://nab/./packages/editor/components/goal/style.scss?5963","webpack://nab/./packages/editor/components/header/style.scss?9770","webpack://nab/./packages/editor/components/layout/style.scss?9bd9","webpack://nab/./packages/editor/components/segment-list/style.scss?75b4","webpack://nab/./packages/editor/components/segment/segmentation-rule-list/style.scss?d638","webpack://nab/./packages/editor/components/segment/segmentation-rule-type-category-list/style.scss?f098","webpack://nab/./packages/editor/components/segment/segmentation-rule-type-category/style.scss?950b","webpack://nab/./packages/editor/components/segment/segmentation-rule/style.scss?84b6","webpack://nab/./packages/editor/components/segment/style.scss?c3dd","webpack://nab/./packages/editor/components/segmentation-section/style.scss?b0c5","webpack://nab/./packages/editor/components/sidebar/experiment-management/experiment-end-schedule/style.scss?a772","webpack://nab/./packages/editor/components/sidebar/experiment-management/status/style.scss?08ee","webpack://nab/./packages/editor/components/sidebar/experiment-management/style.scss?6401","webpack://nab/./packages/editor/components/sidebar/scope/style.scss?6c8d","webpack://nab/./packages/editor/components/sidebar/style.scss?48be","webpack://nab/external window \"React\"","webpack://nab/external window \"lodash\"","webpack://nab/external window [\"nab\",\"components\"]","webpack://nab/external window [\"nab\",\"conversionActionLibrary\"]","webpack://nab/external window [\"nab\",\"conversionActions\"]","webpack://nab/external window [\"nab\",\"data\"]","webpack://nab/external window [\"nab\",\"date\"]","webpack://nab/external window [\"nab\",\"experimentLibrary\"]","webpack://nab/external window [\"nab\",\"experiments\"]","webpack://nab/external window [\"nab\",\"i18n\"]","webpack://nab/external window [\"nab\",\"segmentationRuleLibrary\"]","webpack://nab/external window [\"nab\",\"segmentationRules\"]","webpack://nab/external window [\"nab\",\"utils\"]","webpack://nab/external window [\"wp\",\"apiFetch\"]","webpack://nab/external window [\"wp\",\"blockEditor\"]","webpack://nab/external window [\"wp\",\"components\"]","webpack://nab/external window [\"wp\",\"compose\"]","webpack://nab/external window [\"wp\",\"coreData\"]","webpack://nab/external window [\"wp\",\"data\"]","webpack://nab/external window [\"wp\",\"date\"]","webpack://nab/external window [\"wp\",\"domReady\"]","webpack://nab/external window [\"wp\",\"element\"]","webpack://nab/external window [\"wp\",\"hooks\"]","webpack://nab/external window [\"wp\",\"i18n\"]","webpack://nab/external window [\"wp\",\"notices\"]","webpack://nab/external window [\"wp\",\"url\"]","webpack://nab/./node_modules/classnames/index.js","webpack://nab/./node_modules/rememo/rememo.js","webpack://nab/webpack/bootstrap","webpack://nab/webpack/runtime/compat get default export","webpack://nab/webpack/runtime/define property getters","webpack://nab/webpack/runtime/hasOwnProperty shorthand","webpack://nab/webpack/runtime/make namespace object","webpack://nab/./packages/editor/export.ts"],"sourcesContent":["import { cloneElement, createElement, Fragment } from 'react';\nimport tokenize from './tokenize';\n\nfunction getCloseIndex(openIndex, tokens) {\n  const openToken = tokens[openIndex];\n  let nestLevel = 0;\n\n  for (let i = openIndex + 1; i < tokens.length; i++) {\n    const token = tokens[i];\n\n    if (token.value === openToken.value) {\n      if (token.type === 'componentOpen') {\n        nestLevel++;\n        continue;\n      }\n\n      if (token.type === 'componentClose') {\n        if (nestLevel === 0) {\n          return i;\n        }\n\n        nestLevel--;\n      }\n    }\n  } // if we get this far, there was no matching close token\n\n\n  throw new Error('Missing closing component token `' + openToken.value + '`');\n}\n\nfunction buildChildren(tokens, components) {\n  let children = [];\n  let openComponent;\n  let openIndex;\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n\n    if (token.type === 'string') {\n      children.push(token.value);\n      continue;\n    } // component node should at least be set\n\n\n    if (components[token.value] === undefined) {\n      throw new Error(`Invalid interpolation, missing component node: \\`${token.value}\\``);\n    } // should be either ReactElement or null (both type \"object\"), all other types deprecated\n\n\n    if (typeof components[token.value] !== 'object') {\n      throw new Error(`Invalid interpolation, component node must be a ReactElement or null: \\`${token.value}\\``);\n    } // we should never see a componentClose token in this loop\n\n\n    if (token.type === 'componentClose') {\n      throw new Error(`Missing opening component token: \\`${token.value}\\``);\n    }\n\n    if (token.type === 'componentOpen') {\n      openComponent = components[token.value];\n      openIndex = i;\n      break;\n    } // componentSelfClosing token\n\n\n    children.push(components[token.value]);\n    continue;\n  }\n\n  if (openComponent) {\n    const closeIndex = getCloseIndex(openIndex, tokens);\n    const grandChildTokens = tokens.slice(openIndex + 1, closeIndex);\n    const grandChildren = buildChildren(grandChildTokens, components);\n    const clonedOpenComponent = /*#__PURE__*/cloneElement(openComponent, {}, grandChildren);\n    children.push(clonedOpenComponent);\n\n    if (closeIndex < tokens.length - 1) {\n      const siblingTokens = tokens.slice(closeIndex + 1);\n      const siblings = buildChildren(siblingTokens, components);\n      children = children.concat(siblings);\n    }\n  }\n\n  children = children.filter(Boolean);\n\n  if (children.length === 0) {\n    return null;\n  }\n\n  if (children.length === 1) {\n    return children[0];\n  }\n\n  return /*#__PURE__*/createElement(Fragment, null, ...children);\n}\n\nexport default function interpolate(options) {\n  const {\n    mixedString,\n    components,\n    throwErrors\n  } = options;\n\n  if (!components) {\n    return mixedString;\n  }\n\n  if (typeof components !== 'object') {\n    if (throwErrors) {\n      throw new Error(`Interpolation Error: unable to process \\`${mixedString}\\` because components is not an object`);\n    }\n\n    return mixedString;\n  }\n\n  const tokens = tokenize(mixedString);\n\n  try {\n    return buildChildren(tokens, components);\n  } catch (error) {\n    if (throwErrors) {\n      throw new Error(`Interpolation Error: unable to process \\`${mixedString}\\` because of error \\`${error.message}\\``);\n    }\n\n    return mixedString;\n  }\n}","function identifyToken(item) {\n  // {{/example}}\n  if (item.startsWith('{{/')) {\n    return {\n      type: 'componentClose',\n      value: item.replace(/\\W/g, '')\n    };\n  } // {{example /}}\n\n\n  if (item.endsWith('/}}')) {\n    return {\n      type: 'componentSelfClosing',\n      value: item.replace(/\\W/g, '')\n    };\n  } // {{example}}\n\n\n  if (item.startsWith('{{')) {\n    return {\n      type: 'componentOpen',\n      value: item.replace(/\\W/g, '')\n    };\n  }\n\n  return {\n    type: 'string',\n    value: item\n  };\n}\n\nexport default function tokenize(mixedString) {\n  const tokenStrings = mixedString.split(/(\\{\\{\\/?\\s*\\w+\\s*\\/?\\}\\})/g); // split to components and strings\n\n  return tokenStrings.map(identifyToken);\n}","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Modal } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { STORE_NAME as NAB_EDITOR } from '../../store/config';\n\nexport const AlternativePreviewer = (): JSX.Element | null => {\n\tconst { closeAlternativePreviewer: close } = useDispatch( NAB_EDITOR );\n\tconst url = useSelect( ( select ) =>\n\t\tselect( NAB_EDITOR ).getAlternativePreviewerUrl()\n\t);\n\n\tif ( ! url ) {\n\t\treturn null;\n\t} //end if\n\n\treturn (\n\t\t<Modal\n\t\t\tclassName=\"nab-alternative-previewer\"\n\t\t\ttitle={ _x( 'Alternative Preview', 'text', 'nelio-ab-testing' ) }\n\t\t\tisDismissable={ true }\n\t\t\tisDismissible={ true }\n\t\t\tonRequestClose={ close }\n\t\t\tshouldCloseOnClickOutside={ false }\n\t\t>\n\t\t\t<iframe\n\t\t\t\tclassName=\"nab-alternative-previewer__iframe\"\n\t\t\t\ttitle={ _x(\n\t\t\t\t\t'Alternative Preview Frame',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tsrc={ url }\n\t\t\t></iframe>\n\t\t</Modal>\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Button } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { useEffect, useState } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { HelpIcon } from '@nab/components';\nimport { STORE_NAME as NAB_EXPERIMENTS } from '@nab/experiments';\nimport { createAlternative, getLetter, omitUndefineds } from '@nab/utils';\nimport type { AlternativeId, Dict, ExperimentEditProps } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { useExperimentAttribute } from '../hooks';\nimport { STORE_NAME as NAB_EDITOR } from '../../store/config';\n\nexport type AlternativeContainerProps = {\n\treadonly alternativeId: AlternativeId;\n\treadonly disabled?: boolean;\n\treadonly index: number;\n};\n\nexport const AlternativeContainer = ( {\n\talternativeId,\n\tdisabled,\n\tindex,\n}: AlternativeContainerProps ): JSX.Element | null => {\n\tconst alternative = useAlternative( alternativeId );\n\tconst AlternativeView = useView( index );\n\tconst canBeRemoved = useCanBeRemoved();\n\tconst experimentType = useExperimentType();\n\tconst help = useHelp( index );\n\tconst isBeingSaved = useIsBeingSaved();\n\tconst isExternalEdit = useIsExternalEdit();\n\tconst isControl = ! index;\n\n\tconst {\n\t\tsaveExperimentAndEditAlternative,\n\t\tsaveExperimentAndPreviewAlternative,\n\t\tremoveAlternatives,\n\t\treplaceAlternatives,\n\t\tsetAlternative,\n\t} = useDispatch( NAB_EDITOR );\n\n\tif ( ! alternative ) {\n\t\treturn null;\n\t} //end if\n\n\treturn (\n\t\t<div\n\t\t\tclassName={ classnames( [\n\t\t\t\t'nab-alternative-list__alternative',\n\t\t\t\t{ 'nab-alternative-list__alternative--original': isControl },\n\t\t\t] ) }\n\t\t>\n\t\t\t<p\n\t\t\t\tclassName={ classnames( [\n\t\t\t\t\t'nab-alternative-list__alternative-letter',\n\t\t\t\t\t{\n\t\t\t\t\t\t'nab-alternative-list__alternative-letter--disabled':\n\t\t\t\t\t\t\t0 < index && disabled,\n\t\t\t\t\t},\n\t\t\t\t] ) }\n\t\t\t>\n\t\t\t\t{ getLetter( index ) }\n\t\t\t</p>\n\n\t\t\t<div className=\"nab-alternative-list__alternative-edit\">\n\t\t\t\t<AlternativeView\n\t\t\t\t\tattributes={ alternative.attributes }\n\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\texperimentType={ experimentType }\n\t\t\t\t\tsetAttributes={ ( attributes ) =>\n\t\t\t\t\t\tsetAlternative( alternative.id, {\n\t\t\t\t\t\t\t...alternative,\n\t\t\t\t\t\t\tattributes: omitUndefineds( {\n\t\t\t\t\t\t\t\t...alternative.attributes,\n\t\t\t\t\t\t\t\t...attributes,\n\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t/>\n\n\t\t\t\t{ 0 !== index && (\n\t\t\t\t\t<ul className=\"nab-alternative-list__alternative-actions\">\n\t\t\t\t\t\t{ isExternalEdit && (\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\tdisabled={ disabled || isBeingSaved }\n\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\tvoid saveExperimentAndEditAlternative(\n\t\t\t\t\t\t\t\t\t\t\talternativeId\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t'Edit',\n\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\tdisabled={ disabled || isBeingSaved }\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tvoid saveExperimentAndPreviewAlternative(\n\t\t\t\t\t\t\t\t\t\talternativeId\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t'Preview',\n\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\tdisabled={ disabled || isBeingSaved }\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\treplaceAlternatives(\n\t\t\t\t\t\t\t\t\t\talternativeId,\n\t\t\t\t\t\t\t\t\t\tcreateAlternative()\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ _x( 'Reset', 'command', 'nelio-ab-testing' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{ canBeRemoved && (\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\t\tdisabled={ disabled || isBeingSaved }\n\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\tremoveAlternatives( alternative.id )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t'Delete',\n\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ul>\n\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t<div className=\"nab-alternative-list__alternative-help\">\n\t\t\t\t{ !! help && <HelpIcon text={ help } /> }\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useExperimentType = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getExperimentType() );\n\nconst useDefaults = () => {\n\tconst type = useExperimentType();\n\treturn useSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_EXPERIMENTS ).getExperimentType( type )?.defaults\n\t);\n};\n\nconst useAlternative = ( alternativeId: AlternativeId ) => {\n\tconst [ didApplyDefaults, markApplyDefaults ] = useState( false );\n\tconst defaults = useDefaults();\n\tconst { setAlternative } = useDispatch( NAB_EDITOR );\n\tconst alternative = useSelect( ( select ) =>\n\t\tselect( NAB_EDITOR ).getAlternative( alternativeId )\n\t);\n\n\tuseEffect( () => {\n\t\tif ( didApplyDefaults ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tif ( ! defaults || ! alternative ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tconst attrs =\n\t\t\t'control' === alternativeId\n\t\t\t\t? defaults.original\n\t\t\t\t: defaults.alternative;\n\t\tsetAlternative( alternative.id, {\n\t\t\t...alternative,\n\t\t\tattributes: {\n\t\t\t\t...attrs,\n\t\t\t\t...alternative.attributes,\n\t\t\t},\n\t\t} );\n\t\tmarkApplyDefaults( true );\n\t}, [ didApplyDefaults, !! defaults, !! alternative ] );\n\n\treturn didApplyDefaults ? alternative : undefined;\n};\n\nconst useCanBeRemoved = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn useSelect( ( select ) => {\n\t\tconst { getAlternativeIds } = select( NAB_EDITOR );\n\t\tconst isPaused = ( status || '' ).includes( 'paused' );\n\t\treturn getAlternativeIds().length > 2 && ! isPaused;\n\t} );\n};\n\nconst useIsBeingSaved = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).isExperimentBeingSaved() );\n\ntype View = ( props: ExperimentEditProps< Dict > ) => JSX.Element;\nconst useView = ( index: number ): View =>\n\tuseSelect( ( select ) => {\n\t\tconst { getExperimentView } = select( NAB_EXPERIMENTS );\n\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\t\tconst view = ! index\n\t\t\t? getExperimentView( getExperimentType(), 'original' )\n\t\t\t: getExperimentView( getExperimentType(), 'alternative' );\n\t\treturn view ?? ( () => <></> );\n\t} );\n\nconst useHelp = ( index: number ) =>\n\tuseSelect( ( select ) => {\n\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\t\tconst { getHelpString } = select( NAB_EXPERIMENTS );\n\n\t\tif ( 0 === index ) {\n\t\t\treturn getHelpString( getExperimentType(), 'original' );\n\t\t} //end if\n\n\t\tif ( 1 === index ) {\n\t\t\treturn getHelpString( getExperimentType(), 'alternative' );\n\t\t} //end if\n\n\t\treturn '';\n\t} );\n\nconst useIsExternalEdit = () => {\n\tconst type = useExperimentType();\n\treturn useSelect( ( select ) => {\n\t\tconst { getExperimentSupport } = select( NAB_EXPERIMENTS );\n\t\treturn (\n\t\t\t'external' === getExperimentSupport( type, 'alternativeEdition' )\n\t\t);\n\t} );\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { useSelect, useDispatch } from '@safe-wordpress/data';\nimport { useEffect, useState } from '@safe-wordpress/element';\nimport { Button, Dashicon, ExternalLink } from '@safe-wordpress/components';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { difference } from 'lodash';\nimport interpolateComponents from '@automattic/interpolate-components';\nimport { AnimatedList } from '@nab/components';\nimport { STORE_NAME as NAB_DATA } from '@nab/data';\nimport { addFreeTracker, createAlternative } from '@nab/utils';\nimport type { AlternativeId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { AlternativeContainer } from './alternative-container';\nimport { AlternativePreviewer } from '../alternative-previewer';\nimport { useExperimentAttribute } from '../hooks';\nimport { STORE_NAME as NAB_EDITOR } from '../../store/config';\n\nexport const AlternativeSection = (): JSX.Element => {\n\tconst [ control, ...alternativeIds ] = useAlternativeIds();\n\tconst addAlternative = useAddAlternative();\n\tconst isExperimentPaused = useIsExperimentPaused();\n\tconst subscription = useSubscription();\n\tconst isTestedElementInvalid = useIsTestedElementInvalid();\n\tconst isReplacingAlternatives = useIsReplacingAlternatives();\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment__alternative-section\">\n\t\t\t<h2>\n\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\tmixedString: sprintf(\n\t\t\t\t\t\t/* translators: dashicon */\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'%s Control Version and Variants',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'{{icon}}{{/icon}}'\n\t\t\t\t\t),\n\t\t\t\t\tcomponents: {\n\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\tclassName=\"nab-alternative-section__title-icon\"\n\t\t\t\t\t\t\t\ticon=\"randomize\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t} ) }\n\t\t\t</h2>\n\n\t\t\t<div className=\"nab-alternative-list\">\n\t\t\t\t{ !! control && (\n\t\t\t\t\t<AlternativeContainer\n\t\t\t\t\t\tkey=\"control\"\n\t\t\t\t\t\tindex={ 0 }\n\t\t\t\t\t\talternativeId=\"control\"\n\t\t\t\t\t\tdisabled={ isTestedElementInvalid }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t<AnimatedList\n\t\t\t\t\tdisableAnimations={ isReplacingAlternatives }\n\t\t\t\t\texit={ 500 }\n\t\t\t\t>\n\t\t\t\t\t{ alternativeIds.map( ( alternativeId, index ) => (\n\t\t\t\t\t\t<AlternativeContainer\n\t\t\t\t\t\t\tkey={ alternativeId }\n\t\t\t\t\t\t\tindex={ index + 1 }\n\t\t\t\t\t\t\talternativeId={ alternativeId }\n\t\t\t\t\t\t\tdisabled={ isTestedElementInvalid }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) ) }\n\t\t\t\t</AnimatedList>\n\t\t\t</div>\n\n\t\t\t<div className=\"nab-edit-experiment-alternative-section__new-variant-container\">\n\t\t\t\t{ ! isExperimentPaused && !! subscription && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tkey=\"new-variant\"\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t8 <= alternativeIds.length || isTestedElementInvalid\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={ () => addAlternative() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ _x( 'New Variant', 'command', 'nelio-ab-testing' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\t{ ! isExperimentPaused && ! subscription && (\n\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\tclassName=\"components-button is-secondary\"\n\t\t\t\t\t\thref={ addFreeTracker(\n\t\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t\t'https://neliosoftware.com/testing/pricing/',\n\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'Subscribe to Add More Variants',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ExternalLink>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t\t<AlternativePreviewer />\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useAlternativeIds = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getAlternativeIds() );\n\nconst useAddAlternative = () => {\n\tconst { addAlternatives } = useDispatch( NAB_EDITOR );\n\treturn () => addAlternatives( createAlternative() );\n};\n\nconst useIsExperimentPaused = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn status.includes( 'paused' );\n};\n\nconst useSubscription = () =>\n\tuseSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_DATA ).getPluginSetting( 'subscription' ) || false\n\t);\n\nconst useIsTestedElementInvalid = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).isTestedElementInvalid() );\n\nconst useIsReplacingAlternatives = () => {\n\tconst [ prevAltIds, setPrevAltIds ] = useState<\n\t\tReadonlyArray< AlternativeId >\n\t>( [] );\n\tconst prevStr = prevAltIds.join( ';' );\n\n\tconst altIds = useAlternativeIds();\n\tconst currStr = altIds.join( ';' );\n\n\t// Keep track of the previous alt IDs.\n\tuseEffect( () => {\n\t\tif ( prevStr !== currStr ) {\n\t\t\tsetPrevAltIds( altIds );\n\t\t} //end if\n\t}, [ prevStr, currStr ] );\n\n\t// Disable animations if several changes at once.\n\tif ( prevStr === currStr ) {\n\t\treturn false;\n\t} //end if\n\n\t// This works under the assumption that, usually, theres only one change\n\t// at a time (i.e. adding or removing a single alternative).\n\tconst severalChanges = ( x: string, y: string ) => {\n\t\tconst xs = x.split( ';' );\n\t\tconst ys = y.split( ';' );\n\t\tconst d1 = difference( xs, ys );\n\t\tconst d2 = difference( ys, xs );\n\t\treturn !! d1.length && !! d2.length;\n\t};\n\n\treturn severalChanges( prevStr, currStr );\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { useSelect } from '@safe-wordpress/data';\nimport { StrictMode, useEffect } from '@safe-wordpress/element';\n\n/**\n * External dependencies\n */\nimport { STORE_NAME as NAB_DATA } from '@nab/data';\nimport type { ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { EditorProvider } from '../provider';\nimport { Layout } from '../layout';\n\nimport { renderHelp } from '../../help';\n\nexport type EditorProps = {\n\treadonly experimentId: ExperimentId;\n};\n\nexport const Editor = ( { experimentId }: EditorProps ): JSX.Element => {\n\tconst experiment = useSelect( ( select ) =>\n\t\tselect( NAB_DATA ).getExperiment( experimentId )\n\t);\n\n\tuseEffect( () => {\n\t\tif ( experiment ) {\n\t\t\trenderHelp();\n\t\t} //end if\n\t}, [ !! experiment ] );\n\n\treturn (\n\t\t<StrictMode>\n\t\t\t<EditorProvider experiment={ experiment }>\n\t\t\t\t<Layout />\n\t\t\t</EditorProvider>\n\t\t</StrictMode>\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { PlainText } from '@safe-wordpress/block-editor';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute } from '../hooks';\n\nexport const ExperimentName = (): JSX.Element => {\n\tconst [ name, setName ] = useExperimentAttribute( 'name' );\n\treturn (\n\t\t<div className=\"nab-experiment-title\">\n\t\t\t<PlainText\n\t\t\t\tvalue={ name }\n\t\t\t\tclassName=\"nab-experiment-title__edit\"\n\t\t\t\tplaceholder={ _x(\n\t\t\t\t\t'Name your test',\n\t\t\t\t\t'user',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tonChange={ setName }\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Button, Dashicon } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { trim } from 'lodash';\nimport { createGoal } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute, usePluginSetting } from '../hooks';\nimport { STORE_NAME as NAB_EDITOR } from '../../store/config';\n\nexport const GoalList = (): JSX.Element => {\n\tconst activeGoalId = useActiveGoalId();\n\tconst goals = useGoals();\n\tconst isExperimentPaused = useIsExperimentPaused();\n\tconst isSubscribed = !! usePluginSetting( 'subscription' );\n\n\tconst { setActiveGoal, addGoals } = useDispatch( NAB_EDITOR );\n\n\treturn (\n\t\t<ul className=\"nab-goal-list\">\n\t\t\t{ goals.map( ( goal, index ) => (\n\t\t\t\t<li\n\t\t\t\t\tkey={ goal.id }\n\t\t\t\t\tclassName={ classnames( 'nab-goal-list__item', {\n\t\t\t\t\t\t'nab-goal-list__item--is-active':\n\t\t\t\t\t\t\tgoal.id === activeGoalId,\n\t\t\t\t\t} ) }\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={ goal.id === activeGoalId }\n\t\t\t\t\t\tonClick={ () => setActiveGoal( goal.id ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ trim( goal.attributes.name ) ||\n\t\t\t\t\t\t\tgetDefaultGoalNameForIndex( index ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</li>\n\t\t\t) ) }\n\n\t\t\t{ ! isExperimentPaused && isSubscribed && (\n\t\t\t\t<li className=\"nab-goal-list__add-new-goal\" key=\"add-new-goal\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"nab-goal-list__add-new-goal-button\"\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tconst goal = createGoal();\n\t\t\t\t\t\t\taddGoals( goal );\n\t\t\t\t\t\t\tsetActiveGoal( goal.id );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Dashicon icon=\"plus\" />\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t'New',\n\t\t\t\t\t\t\t\t'command (goal)',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Button>\n\t\t\t\t</li>\n\t\t\t) }\n\t\t</ul>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveGoalId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal()?.id );\n\nconst useGoals = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getGoals() );\n\nconst useIsExperimentPaused = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn ( status || '' ).includes( 'paused' );\n};\n\n// =======\n// HELPERS\n// =======\n\nfunction getDefaultGoalNameForIndex( index: number ) {\n\treturn index\n\t\t? sprintf(\n\t\t\t\t/* translators: a number */\n\t\t\t\t_x( 'Goal %d', 'text', 'nelio-ab-testing' ),\n\t\t\t\tindex + 1\n\t\t  )\n\t\t: _x( 'Default Goal', 'text', 'nelio-ab-testing' );\n} //end getDefaultGoalNameForIndex()\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Dashicon } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { useEffect } from '@safe-wordpress/element';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { findIndex, isEqual, omit } from 'lodash';\nimport interpolateComponents from '@automattic/interpolate-components';\nimport { STORE_NAME as NAB_EXPERIMENTS } from '@nab/experiments';\nimport type {\n\tConversionAction as CA,\n\tGoal as RealGoal,\n\tGoalId,\n\tMaybe,\n} from '@nab/types';\ntype Goal = Omit< RealGoal, 'conversionActions' >;\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { Goal as GoalView } from '../goal';\nimport { GoalList } from '../goal-list';\nimport { useExperimentAttribute } from '../hooks';\nimport { STORE_NAME as NAB_EDITOR } from '../../store/config';\n\nexport const GoalSection = (): JSX.Element => {\n\tuseAutoConversionActionsEffect();\n\n\tconst goal = useActiveGoal();\n\tconst goals = useGoals();\n\tconst isExperimentPaused = useIsExperimentPaused();\n\tconst numberOfGoals = goals.length;\n\tconst isAutomatic = useIsActiveGoalAutomatic();\n\tconst { removeGoals, setActiveGoal, updateGoal } =\n\t\tuseDispatch( NAB_EDITOR );\n\n\tconst canGoalBeRemoved = 1 < numberOfGoals && ! isExperimentPaused;\n\n\tconst removeActiveGoal = () => {\n\t\tif ( ! goal ) return;\n\t\tconst nextGoal = getAdjacentGoal( goals, goal.id );\n\t\tif ( ! nextGoal ) return;\n\t\tsetActiveGoal( nextGoal.id );\n\t\tremoveGoals( goal.id );\n\t};\n\n\tconst updateActiveGoal = ( attributes: Partial< Goal[ 'attributes' ] > ) =>\n\t\tgoal && updateGoal( goal.id, { ...goal.attributes, ...attributes } );\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment__goal-section\">\n\t\t\t<h2>\n\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\tmixedString: sprintf(\n\t\t\t\t\t\t/* translators: dashicon */\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'%s Conversion Goals and Actions',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'{{icon}}{{/icon}}'\n\t\t\t\t\t),\n\t\t\t\t\tcomponents: {\n\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\tclassName=\"nab-goal-section__title-icon\"\n\t\t\t\t\t\t\t\ticon=\"flag\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t} ) }\n\t\t\t</h2>\n\n\t\t\t<div className=\"nab-edit-experiment-goal-section__content\">\n\t\t\t\t<GoalList />\n\t\t\t\t<GoalView\n\t\t\t\t\tname={ goal?.attributes.name ?? '' }\n\t\t\t\t\tsetName={ ( name ) => updateActiveGoal( { name } ) }\n\t\t\t\t\tremoveGoal={\n\t\t\t\t\t\tcanGoalBeRemoved ? removeActiveGoal : undefined\n\t\t\t\t\t}\n\t\t\t\t\tisAutomatic={ isAutomatic }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveGoal = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal() );\n\nconst useGoals = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getGoals() );\n\nconst useIsExperimentPaused = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn ( status || '' ).includes( 'paused' );\n};\n\nconst useIsActiveGoalAutomatic = () => {\n\tconst goal = useActiveGoal();\n\tconst goals = useGoals();\n\treturn useSelect( ( select ): boolean => {\n\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\t\tconst { hasExperimentSupport } = select( NAB_EXPERIMENTS );\n\t\treturn (\n\t\t\tgoal?.id === goals[ 0 ]?.id &&\n\t\t\thasExperimentSupport( getExperimentType(), 'automaticGoalSetup' )\n\t\t);\n\t} );\n};\n\nconst useAutoConversionActionsEffect = () => {\n\tconst { replaceConversionActionsInGoal } = useDispatch( NAB_EDITOR );\n\n\tconst goalId = useGoals()[ 0 ]?.id;\n\tconst control = useSelect( ( select ) =>\n\t\tselect( NAB_EDITOR ).getAlternative( 'control' )\n\t);\n\tconst automaticGoalSetup = useSelect( ( select ) => {\n\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\t\tconst { getExperimentSupport } = select( NAB_EXPERIMENTS );\n\t\treturn getExperimentSupport(\n\t\t\tgetExperimentType(),\n\t\t\t'automaticGoalSetup'\n\t\t);\n\t} );\n\n\tconst conversionActions = useSelect( ( select ) => {\n\t\tselect( NAB_EDITOR );\n\t\treturn goalId\n\t\t\t? select( NAB_EDITOR ).getConversionActions( goalId )\n\t\t\t: [];\n\t} );\n\n\tuseEffect( () => {\n\t\tif ( ! control || ! goalId || ! automaticGoalSetup ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tconst auto = automaticGoalSetup( control.attributes );\n\t\tif ( isEqual( removeIds( conversionActions ), removeIds( auto ) ) ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\treplaceConversionActionsInGoal( goalId, auto );\n\t}, [ automaticGoalSetup, goalId, control ] );\n};\n\n// =======\n// HELPERS\n// =======\n\nfunction getAdjacentGoal(\n\tgoals: ReadonlyArray< Goal >,\n\tgoalId: GoalId\n): Maybe< Goal > {\n\tconst index = findIndex( goals, { id: goalId } );\n\tif ( index === goals.length - 1 ) {\n\t\treturn goals[ index - 1 ];\n\t} //end if\n\treturn goals[ index + 1 ];\n} //end getAdjacentGoal()\n\nconst removeIds = (\n\tconversionActions: ReadonlyArray< CA >\n): ReadonlyArray< Omit< CA, 'id' > > =>\n\tconversionActions.map( ( ca ) => omit( ca, 'id' ) );\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport type { ConversionAction as CA, GoalId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { ConversionAction } from '../conversion-action';\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport const AutomaticConversionActionList = (): JSX.Element => {\n\tconst goalId = useActiveGoalId();\n\tconst conversionActions = useConversionActions( goalId );\n\n\treturn (\n\t\t<div className=\"nab-conversion-action-list nab-conversion-action-list--automatic\">\n\t\t\t{ 1 === conversionActions.length ? (\n\t\t\t\t<p\n\t\t\t\t\tkey=\"conversion-action-explanation\"\n\t\t\t\t\tclassName=\"nab-conversion-action-list__help\"\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'By default, there will be a new conversion in this test when the following conversion action occurs after the visitor has seen the tested element:',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) : (\n\t\t\t\t<p\n\t\t\t\t\tkey=\"conversion-action-explanation\"\n\t\t\t\t\tclassName=\"nab-conversion-action-list__help\"\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Split tests are usually run with some specific goals in mind. In this type of test, theres a new conversion when at least one of the following conversion actions occurs after the visitor has seen the tested element:',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t\t{ goalId &&\n\t\t\t\tconversionActions.map( ( action ) => (\n\t\t\t\t\t<ConversionAction\n\t\t\t\t\t\tkey={ action.id }\n\t\t\t\t\t\tgoalId={ goalId }\n\t\t\t\t\t\taction={ action }\n\t\t\t\t\t\treadOnly={ true }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveGoalId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal()?.id );\n\nconst useConversionActions = ( goalId?: GoalId ): ReadonlyArray< CA > =>\n\tuseSelect( ( select ) => {\n\t\tif ( ! goalId ) {\n\t\t\treturn [];\n\t\t} //end if\n\t\tconst { getConversionActions } = select( NAB_EDITOR );\n\t\treturn getConversionActions( goalId ) || [];\n\t} );\n","export * from './automatic';\nexport * from './regular';\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport interpolateComponents from '@automattic/interpolate-components';\nimport type { ConversionAction as CA, GoalId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { ConversionAction } from '../conversion-action';\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport const ConversionActionList = (): JSX.Element => {\n\tconst goalId = useActiveGoalId();\n\tconst conversionActions = useConversionActions( goalId );\n\n\treturn (\n\t\t<div className=\"nab-conversion-action-list\">\n\t\t\t{ !! conversionActions.length && (\n\t\t\t\t<p key=\"conversion-action-explanation-1\">\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'After a visitor has seen the tested element, theres a new conversion every time one of the following conversion actions occurs:',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t\t{ goalId &&\n\t\t\t\tconversionActions.map( ( action ) => (\n\t\t\t\t\t<ConversionAction\n\t\t\t\t\t\tkey={ action.id }\n\t\t\t\t\t\tgoalId={ goalId }\n\t\t\t\t\t\taction={ action }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t{ ! conversionActions.length && [\n\t\t\t\t<p\n\t\t\t\t\tkey=\"conversion-action-explanation-1\"\n\t\t\t\t\tclassName=\"nab-conversion-action-list__help\"\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Split tests are usually run with some specific goals in mind, such as getting more subscribers or showing interest in your products. Goals are fulfilled when the visitor performs certain actions. For instance, a visitor might be showing interest in your products when they visit your pricing page or they submit a certain form in your website.',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>,\n\t\t\t\t<p\n\t\t\t\t\tkey=\"conversion-action-explanation-2\"\n\t\t\t\t\tclassName=\"nab-conversion-action-list__help\"\n\t\t\t\t>\n\t\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\t\tmixedString: _x(\n\t\t\t\t\t\t\t'Use the buttons below to {{strong}}add the specific conversion actions{{/strong}} that fulfill this goal.',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\tstrong: <strong />,\n\t\t\t\t\t\t},\n\t\t\t\t\t} ) }\n\t\t\t\t</p>,\n\t\t\t] }\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveGoalId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal()?.id );\n\nconst useConversionActions = ( goalId?: GoalId ): ReadonlyArray< CA > =>\n\tuseSelect( ( select ) => {\n\t\tif ( ! goalId ) {\n\t\t\treturn [];\n\t\t} //end if\n\t\tconst { getConversionActions } = select( NAB_EDITOR );\n\t\treturn getConversionActions( goalId ) || [];\n\t} );\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Button, ExternalLink, Tooltip } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { every, filter, find, without } from 'lodash';\nimport {\n\tSTORE_NAME as NAB_ACTIONS,\n\tcreateConversionAction as createConversionActionWithDefaults,\n} from '@nab/conversion-actions';\nimport { addFreeTracker } from '@nab/utils';\nimport type {\n\tConversionAction as CA,\n\tConversionActionTypeName,\n\tGoalId,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { usePluginSetting } from '../../hooks';\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport const ConversionActionTypeList = (): JSX.Element => {\n\tconst isSubscribed = !! usePluginSetting( 'subscription' );\n\tconst goalId = useActiveGoalId();\n\tconst hasConversionActions = !! useConversionActions( goalId ).length;\n\tconst conversionActionTypes = useConversionActionTypes();\n\tconst { addConversionActionsIntoGoal } = useDispatch( NAB_EDITOR );\n\n\tif ( ! isSubscribed && hasConversionActions ) {\n\t\treturn (\n\t\t\t<div className=\"nab-conversion-action-type-list\">\n\t\t\t\t<ExternalLink\n\t\t\t\t\tclassName=\"components-button is-secondary\"\n\t\t\t\t\thref={ addFreeTracker(\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'https://neliosoftware.com/testing/pricing/',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t)\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Subscribe to Track More Actions',\n\t\t\t\t\t\t'user',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</ExternalLink>\n\t\t\t</div>\n\t\t);\n\t} //end if\n\n\tconst createConversionAction = ( type: ConversionActionTypeName ) => {\n\t\tif ( ! goalId ) return;\n\t\tconst act = createConversionActionWithDefaults( type );\n\t\tif ( act ) {\n\t\t\taddConversionActionsIntoGoal( goalId, act );\n\t\t} //end if\n\t};\n\n\treturn (\n\t\t<ul className=\"nab-conversion-action-type-list\">\n\t\t\t{ conversionActionTypes &&\n\t\t\t\tconversionActionTypes.map( ( type ) => {\n\t\t\t\t\tconst Icon = type.icon;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tkey={ type.name }\n\t\t\t\t\t\t\ttext={ type.title }\n\t\t\t\t\t\t\tposition=\"top center\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tkey={ type.name }\n\t\t\t\t\t\t\t\tclassName=\"nab-conversion-action-type-list__item\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\tclassName=\"nab-conversion-action-type-list__new-action-button\"\n\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\tcreateConversionAction( type.name )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t</ul>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveGoalId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal()?.id );\n\nconst useConversionActionTypes = () => {\n\tconst goalId = useActiveGoalId();\n\tconst conversionActions = useConversionActions( goalId );\n\treturn useSelect( ( select ) => {\n\t\tconst { getConversionActionTypes } = select( NAB_ACTIONS );\n\t\tconst conversionActionTypes = filter(\n\t\t\tgetConversionActionTypes(),\n\t\t\t( type ) => ! type.isActive || type.isActive( select )\n\t\t);\n\n\t\t// TODO. This is an adhoc solution, but we probably need something better.\n\t\tconst wcOrder = find( conversionActionTypes, { name: 'nab/wc-order' } );\n\t\tif ( wcOrder ) {\n\t\t\tif (\n\t\t\t\tconversionActions.length &&\n\t\t\t\tevery( conversionActions, { type: 'nab/wc-order' } )\n\t\t\t) {\n\t\t\t\treturn [ wcOrder ];\n\t\t\t} //end if\n\t\t} //end if\n\n\t\t// TODO. This is an adhoc solution, but we probably need something better.\n\t\tconst eddOrder = find( conversionActionTypes, {\n\t\t\tname: 'nab/edd-order',\n\t\t} );\n\t\tif ( eddOrder ) {\n\t\t\tif (\n\t\t\t\tconversionActions.length &&\n\t\t\t\tevery( conversionActions, { type: 'nab/edd-order' } )\n\t\t\t) {\n\t\t\t\treturn [ eddOrder ];\n\t\t\t} //end if\n\t\t} //end if\n\n\t\t// TODO. This is an adhoc solution, but we probably need something better.\n\t\tif ( ( eddOrder || wcOrder ) && conversionActions.length ) {\n\t\t\treturn without(\n\t\t\t\tconversionActionTypes,\n\t\t\t\t...[\n\t\t\t\t\t...( wcOrder ? [ wcOrder ] : [] ),\n\t\t\t\t\t...( eddOrder ? [ eddOrder ] : [] ),\n\t\t\t\t]\n\t\t\t);\n\t\t} //end if\n\n\t\treturn conversionActionTypes;\n\t} );\n};\n\nconst useConversionActions = ( goalId?: GoalId ): ReadonlyArray< CA > =>\n\tuseSelect( ( select ) => {\n\t\tif ( ! goalId ) {\n\t\t\treturn [];\n\t\t} //end if\n\t\treturn select( NAB_EDITOR ).getConversionActions( goalId ) || [];\n\t} );\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Button, Dashicon, PanelBody } from '@safe-wordpress/components';\nimport { useSelect, useDispatch } from '@safe-wordpress/data';\nimport { useCallback, useState } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { noop } from 'lodash';\nimport { STORE_NAME as NAB_ACTIONS } from '@nab/conversion-actions';\nimport { getConversionActionScopeError, isEmpty } from '@nab/utils';\nimport type {\n\tConversionAction as CA,\n\tConversionActionId,\n\tConversionActionScope,\n\tConversionActionTypeName,\n\tGoalId,\n\tMaybe,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport type ConversionActionProps = {\n\treadonly readOnly?: boolean;\n\treadonly action: CA;\n\treadonly goalId: GoalId;\n};\n\nexport const ConversionAction = ( {\n\treadOnly,\n\taction,\n\tgoalId,\n}: ConversionActionProps ): JSX.Element | null => {\n\tconst experimentId = useExperimentId();\n\tconst goal = useActiveGoal();\n\tconst goalIndex = useActiveGoalIndex();\n\tconst actionType = useConversionActionType( action.type );\n\n\tconst View = actionType?.view;\n\tconst Edit = actionType?.edit;\n\tconst Icon = actionType?.icon;\n\tconst attributes = action?.attributes || {};\n\tconst scope = action?.scope || { type: 'test-scope' };\n\tconst validate = actionType?.validate ?? ( () => ( {} ) );\n\n\tconst errors = {\n\t\t...validate( attributes ),\n\t\t_scope: getConversionActionScopeError( scope ),\n\t};\n\tconst [ initialOpen ] = useState( ! isEmpty( errors ) );\n\n\tconst { setAttributes, setScope } = useUpdater( goalId, action.id );\n\tconst remove = useRemove( goalId, action.id );\n\n\tif ( ! goal ) {\n\t\treturn null;\n\t} //end if\n\n\tif ( readOnly ) {\n\t\treturn (\n\t\t\t<div className=\"nab-conversion-action\">\n\t\t\t\t<div className=\"nab-conversion-action__view\">\n\t\t\t\t\t{ !! Icon ? (\n\t\t\t\t\t\t<Icon className=\"nab-conversion-action__icon\" />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\tclassName=\"nab-conversion-action__icon nab-conversion-action__icon--invalid\"\n\t\t\t\t\t\t\ticon=\"warning\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<div className=\"nab-conversion-action__actual-view\">\n\t\t\t\t\t\t{ !! View ? (\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t\tscope={ scope }\n\t\t\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\t\t\tgoal={ goal.attributes }\n\t\t\t\t\t\t\t\tgoalId={ goalId }\n\t\t\t\t\t\t\t\tgoalIndex={ goalIndex }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t'Invalid conversion action.',\n\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t} //end if\n\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"nab-conversion-action\"\n\t\t\tinitialOpen={ initialOpen }\n\t\t\ttitle={\n\t\t\t\t(\n\t\t\t\t\t<div className=\"nab-conversion-action__view\">\n\t\t\t\t\t\t{ !! Icon ? (\n\t\t\t\t\t\t\t<Icon className=\"nab-conversion-action__icon\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\tclassName=\"nab-conversion-action__icon nab-conversion-action__icon--invalid\"\n\t\t\t\t\t\t\t\ticon=\"warning\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<div className=\"nab-conversion-action__actual-view\">\n\t\t\t\t\t\t\t{ !! View ? (\n\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t\t\tscope={ scope }\n\t\t\t\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\t\t\t\tgoal={ goal.attributes }\n\t\t\t\t\t\t\t\t\tgoalId={ goalId }\n\t\t\t\t\t\t\t\t\tgoalIndex={ goalIndex }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t'Invalid conversion action.',\n\t\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t ) as unknown as string\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"nab-conversion-action__edit\">\n\t\t\t\t{ !! Edit ? (\n\t\t\t\t\t<Edit\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\tscope={ scope }\n\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\tgoal={ goal.attributes }\n\t\t\t\t\t\tgoalId={ goalId }\n\t\t\t\t\t\tgoalIndex={ goalIndex }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\tsetScope={ setScope }\n\t\t\t\t\t\terrors={ errors }\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'This conversion action cant be properly loaded. Please consider removing it.',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t<Button\n\t\t\t\tvariant=\"link\"\n\t\t\t\tisDestructive\n\t\t\t\tonClick={ remove }\n\t\t\t\tclassName=\"nab-conversion-action__delete-button\"\n\t\t\t>\n\t\t\t\t{ _x( 'Delete', 'command', 'neli-ab-testing' ) }\n\t\t\t</Button>\n\t\t</PanelBody>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useExperimentId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getExperimentId() );\n\nconst useActiveGoal = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal() );\n\nconst useActiveGoalIndex = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoalIndex() );\n\nconst useConversionActionType = ( type: ConversionActionTypeName ) =>\n\tuseSelect( ( select ) =>\n\t\tselect( NAB_ACTIONS ).getConversionActionType( type )\n\t);\n\nconst useUpdater = ( goalId: GoalId, actionId: ConversionActionId ) => {\n\tconst { updateConversionAction } = useDispatch( NAB_EDITOR );\n\tconst update = (\n\t\tattributes: Maybe< Partial< CA[ 'attributes' ] > >,\n\t\tscope: Maybe< ConversionActionScope >\n\t) => updateConversionAction( goalId, actionId, attributes, scope );\n\n\tconst setAttributes = useCallback(\n\t\t( attributes: Partial< CA[ 'attributes' ] > ) =>\n\t\t\tupdate( attributes, undefined ),\n\t\t[ goalId, actionId ]\n\t);\n\n\tconst setScope = useCallback(\n\t\t( scope: ConversionActionScope ) => update( undefined, scope ),\n\t\t[ goalId, actionId ]\n\t);\n\n\treturn {\n\t\tsetAttributes: goalId && actionId ? setAttributes : noop,\n\t\tsetScope: goalId && actionId ? setScope : noop,\n\t};\n};\n\nconst useRemove = ( goalId: GoalId, actionId: ConversionActionId ) => {\n\tconst { removeConversionActionsFromGoal } = useDispatch( NAB_EDITOR );\n\treturn goalId && actionId\n\t\t? () => removeConversionActionsFromGoal( goalId, actionId )\n\t\t: noop;\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { CheckboxControl, SelectControl } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { STORE_NAME as NAB_DATA } from '@nab/data';\nimport type {\n\tECommercePlugin,\n\tGoal as RealGoal,\n\tMaybe,\n\tOrderStatus,\n\tOrderStatusName,\n\tConversionAction,\n} from '@nab/types';\ntype Goal = Omit< RealGoal, 'conversionActions' >;\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport const ECommerceGoalSettings = (): JSX.Element | null => {\n\tconst plugin = useECommercePlugin();\n\treturn plugin ? <ActualSettings plugin={ plugin } /> : null;\n};\n\nconst ActualSettings = ( { plugin }: { plugin: ECommercePlugin } ) => {\n\tconst title = useTitle( plugin );\n\tconst [ checked, onToggle ] = useOrderRevenueToggle();\n\tconst statuses = useECommerceOrderStatuses( plugin );\n\tconst [ orderStatus, setOrderStatus ] = useOrderStatus( plugin );\n\n\treturn (\n\t\t<div className=\"nab-ecommerce-goal-settings\">\n\t\t\t<p>\n\t\t\t\t<strong>{ title }</strong>\n\t\t\t</p>\n\t\t\t<SelectControl\n\t\t\t\tlabel={ _x(\n\t\t\t\t\t'Order status required for conversions:',\n\t\t\t\t\t'command',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\toptions={ statuses }\n\t\t\t\tvalue={ orderStatus }\n\t\t\t\tonChange={ setOrderStatus }\n\t\t\t/>\n\t\t\t<CheckboxControl\n\t\t\t\tlabel={ _x(\n\t\t\t\t\t'Track revenue and show in test results',\n\t\t\t\t\t'command',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tchecked={ checked }\n\t\t\t\tonChange={ onToggle }\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useTitle = ( plugin: ECommercePlugin ): string => {\n\tswitch ( plugin ) {\n\t\tcase 'woocommerce':\n\t\t\treturn _x(\n\t\t\t\t'WooCommerce Goal Settings',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'edd':\n\t\t\treturn _x(\n\t\t\t\t'Easy Digital Downloads Goal Settings',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\t} //end switch\n};\n\nconst useECommercePlugin = () =>\n\tuseSelect( ( select ): Maybe< ECommercePlugin > => {\n\t\tconst { getActiveGoal } = select( NAB_EDITOR );\n\t\tconst { getConversionActions } = select( NAB_EDITOR );\n\t\tconst goalId = getActiveGoal()?.id;\n\t\tconst actions = goalId ? getConversionActions( goalId ) : [];\n\n\t\tif ( ! actions.length ) {\n\t\t\treturn undefined;\n\t\t} //end if\n\n\t\tconst isWcOrder = ( { type }: ConversionAction ) =>\n\t\t\t'nab/wc-order' === type;\n\t\tif ( actions.every( isWcOrder ) ) {\n\t\t\treturn 'woocommerce';\n\t\t} //end if\n\n\t\tconst isEddOrder = ( { type }: ConversionAction ) =>\n\t\t\t'nab/edd-order' === type;\n\t\tif ( actions.every( isEddOrder ) ) {\n\t\t\treturn 'edd';\n\t\t} //end if\n\n\t\treturn undefined;\n\t} );\n\nconst useOrderRevenueToggle = () => {\n\tconst goal = useGoal();\n\tconst value = goal?.attributes.useOrderRevenue ?? true;\n\tconst { updateGoal } = useDispatch( NAB_EDITOR );\n\tconst update = () =>\n\t\tgoal ? updateGoal( goal.id, { useOrderRevenue: ! value } ) : void null;\n\treturn [ value, update ] as const;\n};\n\nconst useOrderStatus = ( plugin: ECommercePlugin ) => {\n\tconst goal = useGoal();\n\tconst validStatuses = useECommerceOrderStatuses( plugin );\n\tconst status = goal?.attributes.orderStatusForConversion;\n\tconst value =\n\t\tstatus &&\n\t\tvalidStatuses\n\t\t\t.map( ( s: OrderStatus ) => s.value )\n\t\t\t.includes( goal?.attributes.orderStatusForConversion )\n\t\t\t? status\n\t\t\t: getDefaultOrderStatus( plugin );\n\n\tconst { updateGoal } = useDispatch( NAB_EDITOR );\n\tconst update = ( v: OrderStatusName ) =>\n\t\tgoal\n\t\t\t? updateGoal( goal.id, { orderStatusForConversion: v } )\n\t\t\t: void null;\n\n\treturn [ value, update ] as const;\n};\n\nconst useECommerceOrderStatuses = ( plugin: ECommercePlugin ) =>\n\tuseSelect( ( select ) =>\n\t\tselect( NAB_DATA ).getECommerceSetting( plugin, 'orderStatuses' )\n\t);\n\nconst useGoal = (): Maybe< Goal > =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal() );\n\n// =======\n// HELPERS\n// =======\n\nconst getDefaultOrderStatus = ( plugin: ECommercePlugin ): OrderStatusName => {\n\tswitch ( plugin ) {\n\t\tcase 'woocommerce':\n\t\t\treturn 'wc-completed';\n\n\t\tcase 'edd':\n\t\t\treturn 'complete';\n\t} //end switch\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Button, TextControl } from '@safe-wordpress/components';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport {\n\tAutomaticConversionActionList,\n\tConversionActionList,\n} from './conversion-action-list';\nimport { ConversionActionTypeList } from './conversion-action-type-list';\nimport { ECommerceGoalSettings } from './ecommerce-goal-settings';\n\nexport type GoalProps = {\n\treadonly isAutomatic: boolean;\n\treadonly name: string;\n\treadonly removeGoal?: () => void;\n\treadonly setName: ( name: string ) => void;\n};\n\nexport const Goal = ( {\n\tname,\n\tsetName,\n\tremoveGoal,\n\tisAutomatic,\n}: GoalProps ): JSX.Element => (\n\t<div className=\"nab-current-goal-info\">\n\t\t{ ! isAutomatic && (\n\t\t\t<div className=\"nab-current-goal-info__header\">\n\t\t\t\t<TextControl\n\t\t\t\t\tplaceholder={ _x(\n\t\t\t\t\t\t'Name your goal',\n\t\t\t\t\t\t'user',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t\tvalue={ name }\n\t\t\t\t\tonChange={ ( value ) => setName( value ) }\n\t\t\t\t/>\n\t\t\t\t{ !! removeGoal && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tclassName=\"nab-current-goal-info__delete-button\"\n\t\t\t\t\t\tonClick={ removeGoal }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ _x( 'Delete', 'command (goal)', 'nelio-ab-testing' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t) }\n\n\t\t<ECommerceGoalSettings />\n\n\t\t{ isAutomatic ? (\n\t\t\t<AutomaticConversionActionList />\n\t\t) : (\n\t\t\t<>\n\t\t\t\t<ConversionActionList />\n\t\t\t\t<ConversionActionTypeList />\n\t\t\t</>\n\t\t) }\n\t</div>\n);\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Button, Dashicon } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { useRef } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { SubscribeWithCouponButton, Tooltip } from '@nab/components';\nimport { STORE_NAME as NAB_DATA } from '@nab/data';\nimport { isInTheFuture } from '@nab/date';\nimport { STORE_NAME as NAB_EXPERIMENTS } from '@nab/experiments';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute } from '../hooks';\nimport { STORE_NAME as NAB_EDITOR } from '../../store/config';\n\nexport const Header = (): JSX.Element => {\n\tconst ref = useRef< HTMLDivElement >( null );\n\n\tconst Icon = useIcon();\n\tconst startLabel = useStartLabel();\n\n\tconst draftStatusRationale = useDraftStatusRationale();\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst isDraft = ( status || '' ).includes( 'draft' );\n\tconst isPaused = ( status || '' ).includes( 'paused' );\n\n\tconst isExperimentBeingSaved = useIsBeingSaved();\n\tconst hasExperimentBeenRecentlySaved = useHasBeenRecentlySaved();\n\n\tconst start = useStarter();\n\tconst { saveExperiment, setExperimentData } = useDispatch( NAB_EDITOR );\n\tconst saveExperimentAsReady = () => {\n\t\tsetExperimentData( { status: isPaused ? 'paused' : 'ready' } );\n\t\tvoid saveExperiment();\n\t};\n\tconst canUserStart = useCanUserStart();\n\n\treturn (\n\t\t<div ref={ ref } className=\"nab-edit-experiment-header\">\n\t\t\t<div className=\"nab-edit-experiment-header__info\">\n\t\t\t\t{ Icon && (\n\t\t\t\t\t<Icon className=\"nab-edit-experiment-header__experiment-icon\" />\n\t\t\t\t) }\n\t\t\t\t<h1 className=\"nab-edit-experiment-header__title\">\n\t\t\t\t\t{ _x( 'Edit Test', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t</h1>\n\t\t\t\t<SubscribeWithCouponButton\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'finished' === status\n\t\t\t\t\t\t\t? 'nab-edit-experiment-header__right-promo-button'\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"nab-edit-experiment-header__settings\">\n\t\t\t\t{ isExperimentBeingSaved && (\n\t\t\t\t\t<span className=\"nab-edit-experiment-header__save-button nab-edit-experiment-header__save-button--is-saving\">\n\t\t\t\t\t\t<Dashicon icon=\"cloud\" />\n\t\t\t\t\t\t{ _x( 'Saving', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\n\t\t\t\t{ hasExperimentBeenRecentlySaved && 'scheduled' !== status && (\n\t\t\t\t\t<span className=\"nab-edit-experiment-header__save-button nab-edit-experiment-header__save-button--has-been-saved\">\n\t\t\t\t\t\t<Dashicon icon=\"yes\" />\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'Saved',\n\t\t\t\t\t\t\t'text (experiment)',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\n\t\t\t\t{ ! isExperimentBeingSaved &&\n\t\t\t\t\t! (\n\t\t\t\t\t\thasExperimentBeenRecentlySaved && 'scheduled' !== status\n\t\t\t\t\t) && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tclassName=\"nab-edit-experiment-header__save-button\"\n\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t'scheduled' === status\n\t\t\t\t\t\t\t\t\t? saveExperimentAsReady\n\t\t\t\t\t\t\t\t\t: saveExperiment\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ 'scheduled' === status\n\t\t\t\t\t\t\t\t? _x(\n\t\t\t\t\t\t\t\t\t\t'Save as Ready',\n\t\t\t\t\t\t\t\t\t\t'command (experiment)',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t: _x( 'Save', 'command', 'nelio-ab-testing' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) }\n\n\t\t\t\t<div className=\"nab-edit-experiment-header__start-button\">\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\ttext={ draftStatusRationale }\n\t\t\t\t\t\tplacement=\"left\"\n\t\t\t\t\t\tgetTooltipContainer={\n\t\t\t\t\t\t\t!! ref.current\n\t\t\t\t\t\t\t\t? () => ref.current as HTMLDivElement\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\tisDraft ||\n\t\t\t\t\t\t\t\t\tisExperimentBeingSaved ||\n\t\t\t\t\t\t\t\t\t! canUserStart ||\n\t\t\t\t\t\t\t\t\t( hasExperimentBeenRecentlySaved &&\n\t\t\t\t\t\t\t\t\t\t'scheduled' === status )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={ start }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ startLabel }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useCanUserStart = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst isPaused = ( status || '' ).includes( 'paused' );\n\treturn useSelect( ( select ) => {\n\t\tconst { hasCapability } = select( NAB_DATA );\n\t\treturn hasCapability(\n\t\t\tisPaused ? 'resume_nab_experiments' : 'start_nab_experiments'\n\t\t);\n\t} );\n};\n\nconst useStartLabel = () => {\n\tconst [ startDate ] = useExperimentAttribute( 'startDate' );\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst isPaused = ( status || '' ).includes( 'paused' );\n\n\tif ( isPaused ) {\n\t\treturn _x( 'Resume', 'command', 'nelio-ab-testing' );\n\t} //end if\n\n\tif ( startDate && isInTheFuture( startDate ) ) {\n\t\treturn 'scheduled' === status\n\t\t\t? _x( 'Schedule', 'command', 'nelio-ab-testing' )\n\t\t\t: _x( 'Schedule', 'command', 'nelio-ab-testing' );\n\t} //end if\n\n\treturn _x( 'Start', 'command', 'nelio-ab-testing' );\n};\n\nconst useIcon = () =>\n\tuseSelect( ( select ) => {\n\t\tconst { getExperimentTypes } = select( NAB_EXPERIMENTS );\n\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\n\t\tconst experimentTypes = getExperimentTypes();\n\t\tconst typeName = getExperimentType();\n\t\treturn experimentTypes[ typeName ]?.icon;\n\t} );\n\nconst useDraftStatusRationale = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getDraftStatusRationale() );\n\nconst useIsBeingSaved = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).isExperimentBeingSaved() );\n\nconst useHasBeenRecentlySaved = () =>\n\tuseSelect( ( select ) =>\n\t\tselect( NAB_EDITOR ).hasExperimentBeenRecentlySaved()\n\t);\n\nconst useStarter = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst [ startDate ] = useExperimentAttribute( 'startDate' );\n\tconst isPaused = ( status || '' ).includes( 'paused' );\n\n\tconst {\n\t\tresumeExperiment,\n\t\tsetExperimentData,\n\t\tsaveExperiment,\n\t\tstartExperiment,\n\t} = useDispatch( NAB_EDITOR );\n\n\treturn () => {\n\t\tif ( isPaused ) {\n\t\t\tvoid resumeExperiment();\n\t\t} else if ( startDate && isInTheFuture( startDate ) ) {\n\t\t\tsetExperimentData( { status: 'scheduled' } );\n\t\t\tvoid saveExperiment();\n\t\t} else {\n\t\t\tvoid startExperiment();\n\t\t} //end if\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { STORE_NAME as NAB_DATA } from '@nab/data';\nimport type { PluginSettings, SubscriptionPlan } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { STORE_NAME as NAB_EDITOR } from '../store/config';\nimport type { ExperimentAttributes } from '../store/types';\n\nexport function useExperimentAttribute< K extends keyof ExperimentAttributes >(\n\tattr: K\n): Readonly<\n\t[ ExperimentAttributes[ K ], ( v: ExperimentAttributes[ K ] ) => void ]\n> {\n\tconst value = useSelect( ( select ) =>\n\t\tselect( NAB_EDITOR ).getExperimentAttribute( attr )\n\t);\n\n\tconst { setExperimentData } = useDispatch( NAB_EDITOR );\n\tconst setValue = ( v: ExperimentAttributes[ K ] ): void =>\n\t\tsetExperimentData( { [ attr ]: v } );\n\n\treturn [ value, setValue ] as const;\n}\n\nexport function usePluginSetting< K extends keyof PluginSettings >(\n\tsetting: K\n): PluginSettings[ K ] {\n\treturn useSelect( ( select ) =>\n\t\tselect( NAB_DATA ).getPluginSetting( setting )\n\t);\n}\n\nexport const useIsSubscribedTo = ( plan: SubscriptionPlan ): boolean =>\n\tuseSelect( ( select ) => select( NAB_DATA ).isSubscribedTo( plan ) );\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { NoticeList } from '@safe-wordpress/components';\nimport { useSelect, useDispatch } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\nimport { store as noticesStore } from '@safe-wordpress/notices';\n\nconst NOTICES = noticesStore?.name ?? 'core/notices';\n\n/**\n * External dependencies\n */\nimport { isEmpty } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { StatusManager } from '../status-manager';\nimport { Header } from '../header';\nimport { ExperimentName } from '../experiment-name';\nimport { GoalSection } from '../goal-section';\nimport { SegmentationSection } from '../segmentation-section';\nimport { Sidebar } from '../sidebar';\n\nimport { AlternativeSection } from '../alternative-section';\n\nexport const Layout = (): JSX.Element => {\n\tconst notices = useNotices();\n\tconst { removeNotice } = useDispatch( NOTICES );\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment-layout\">\n\t\t\t<StatusManager />\n\t\t\t<Header />\n\t\t\t<div className=\"nab-edit-experiment-layout__body\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"nab-edit-experiment-layout__content\"\n\t\t\t\t\trole=\"region\"\n\t\t\t\t\t/* translators: accessibility text for the content landmark region. */\n\t\t\t\t\taria-label={ _x(\n\t\t\t\t\t\t'Editor content',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t>\n\t\t\t\t\t{ ! isEmpty( notices ) && (\n\t\t\t\t\t\t<NoticeList\n\t\t\t\t\t\t\tclassName=\"nab-edit-experiment-layout__notices\"\n\t\t\t\t\t\t\tnotices={ notices }\n\t\t\t\t\t\t\tonRemove={ removeNotice }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t<ExperimentName />\n\t\t\t\t\t<AlternativeSection />\n\t\t\t\t\t<GoalSection />\n\t\t\t\t\t<SegmentationSection />\n\t\t\t\t</div>\n\n\t\t\t\t<Sidebar />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nimport type { Notice } from 'wordpress__notices';\nconst useNotices = (): ReadonlyArray< Notice > =>\n\tuseSelect( ( select ) => select( NOTICES ).getNotices() );\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { useDispatch } from '@safe-wordpress/data';\nimport { useEffect, useState } from '@safe-wordpress/element';\n\n/**\n * External dependencies\n */\nimport { createGoal } from '@nab/utils';\nimport type { Experiment } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { STORE_NAME as NAB_EDITOR } from '../../store/config';\n\nexport type EditorProviderProps = {\n\treadonly experiment?: Experiment;\n\treadonly children: JSX.Element;\n};\n\nexport const EditorProvider = ( {\n\texperiment,\n\tchildren,\n}: EditorProviderProps ): JSX.Element | null => {\n\tconst [ isReady, markAsReady ] = useState( false );\n\tconst { setupEditor, setActiveGoal, setActiveSegment } =\n\t\tuseDispatch( NAB_EDITOR );\n\n\tuseEffect( () => {\n\t\tif ( ! experiment ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tconst defaultGoal = experiment.goals[ 0 ] || createGoal();\n\t\tconst activeSegment = experiment.segments[ 0 ];\n\n\t\tsetupEditor( experiment );\n\t\tsetActiveGoal( defaultGoal.id );\n\t\tif ( activeSegment ) {\n\t\t\tsetActiveSegment( activeSegment.id );\n\t\t} //end if\n\t\tmarkAsReady( true );\n\t}, [ !! experiment ] );\n\n\treturn isReady ? <div>{ children }</div> : null;\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Button, Dashicon } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { trim } from 'lodash';\nimport { createSegment } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute, usePluginSetting } from '../hooks';\nimport { STORE_NAME as NAB_EDITOR } from '../../store/config';\n\nexport const SegmentList = (): JSX.Element => {\n\tconst activeSegmentId = useActiveSegmentId();\n\tconst segments = useSegments();\n\tconst isExperimentPaused = useIsExperimentPaused();\n\tconst isSubscribed = !! usePluginSetting( 'subscription' );\n\tconst { setActiveSegment, addSegments } = useDispatch( NAB_EDITOR );\n\n\treturn (\n\t\t<ul className=\"nab-segment-list\">\n\t\t\t{ segments.map( ( segment, index ) => (\n\t\t\t\t<li\n\t\t\t\t\tkey={ segment.id }\n\t\t\t\t\tclassName={ classnames( 'nab-segment-list__item', {\n\t\t\t\t\t\t'nab-segment-list__item--is-active':\n\t\t\t\t\t\t\tsegment.id === activeSegmentId,\n\t\t\t\t\t} ) }\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={ segment.id === activeSegmentId }\n\t\t\t\t\t\tonClick={ () => setActiveSegment( segment.id ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ trim( segment.attributes.name ) ||\n\t\t\t\t\t\t\tgetDefaulSegmentNameForIndex( index ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</li>\n\t\t\t) ) }\n\n\t\t\t{ ! isExperimentPaused && isSubscribed && (\n\t\t\t\t<li\n\t\t\t\t\tclassName=\"nab-segment-list__add-new-segment\"\n\t\t\t\t\tkey=\"add-new-segment\"\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"nab-segment-list__add-new-segment-button\"\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tconst segment = createSegment();\n\t\t\t\t\t\t\taddSegments( segment );\n\t\t\t\t\t\t\tsetActiveSegment( segment.id );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Dashicon icon=\"plus\" />\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t'New',\n\t\t\t\t\t\t\t\t'command (segment)',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Button>\n\t\t\t\t</li>\n\t\t\t) }\n\t\t</ul>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveSegmentId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveSegment()?.id );\n\nconst useSegments = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getSegments() || [] );\n\nconst useIsExperimentPaused = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn status.includes( 'paused' );\n};\n\n// =======\n// HELPERS\n// =======\n\nconst getDefaulSegmentNameForIndex = ( index: number ) =>\n\tsprintf(\n\t\t/* translators: a number */\n\t\t_x( 'Segment %d', 'text', 'nelio-ab-testing' ),\n\t\tindex + 1\n\t);\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Button, TextControl } from '@safe-wordpress/components';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { SegmentationRuleList } from './segmentation-rule-list';\nimport { SegmentationRuleTypeCategoryList } from './segmentation-rule-type-category-list';\n\nexport type SegmentProps = {\n\treadonly name: string;\n\treadonly setName: ( name: string ) => void;\n\treadonly removeSegment?: () => void;\n};\n\nexport const Segment = ( {\n\tname,\n\tsetName,\n\tremoveSegment,\n}: SegmentProps ): JSX.Element => (\n\t<div className=\"nab-current-segment-info\">\n\t\t<div className=\"nab-current-segment-info__header\">\n\t\t\t<TextControl\n\t\t\t\tplaceholder={ _x(\n\t\t\t\t\t'Name your segment',\n\t\t\t\t\t'user',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tvalue={ name }\n\t\t\t\tonChange={ ( value ) => setName( value ) }\n\t\t\t/>\n\t\t\t{ !! removeSegment && (\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\tisDestructive\n\t\t\t\t\tclassName=\"nab-current-segment-info__delete-button\"\n\t\t\t\t\tonClick={ removeSegment }\n\t\t\t\t>\n\t\t\t\t\t{ _x( 'Delete', 'command (segment)', 'nelio-ab-testing' ) }\n\t\t\t\t</Button>\n\t\t\t) }\n\t\t</div>\n\n\t\t<>\n\t\t\t<SegmentationRuleList />\n\t\t\t<SegmentationRuleTypeCategoryList />\n\t\t</>\n\t</div>\n);\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport interpolateComponents from '@automattic/interpolate-components';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { SegmentationRule } from '../segmentation-rule';\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport const SegmentationRuleList = (): JSX.Element | null => {\n\tconst segmentId = useSegmentId();\n\tconst segmentationRules = useSegmentationRules();\n\n\tif ( ! segmentId ) {\n\t\treturn null;\n\t} //end if\n\n\treturn (\n\t\t<div className=\"nab-segmentation-rule-list\">\n\t\t\t{ !! segmentationRules.length && (\n\t\t\t\t<p key=\"segmentation-rule-explanation-1\">\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'A visitor participates in the test every time all of the following segmentation rules match:',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t\t{ segmentationRules.map( ( rule ) => (\n\t\t\t\t<SegmentationRule\n\t\t\t\t\tkey={ rule.id }\n\t\t\t\t\tsegmentId={ segmentId }\n\t\t\t\t\trule={ rule }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t\t{ ! segmentationRules.length && [\n\t\t\t\t<p\n\t\t\t\t\tkey=\"segmentation-rule-explanation-1\"\n\t\t\t\t\tclassName=\"nab-segmentation-rule-list__help\"\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Split tests are usually applied to all visitors. But you can narrow your audience using segmentation rules to target only a subset of your visitors.',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>,\n\t\t\t\t<p\n\t\t\t\t\tkey=\"segmentation-rule-explanation-2\"\n\t\t\t\t\tclassName=\"nab-segmentation-rule-list__help\"\n\t\t\t\t>\n\t\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\t\tmixedString: _x(\n\t\t\t\t\t\t\t'Use the buttons below to {{strong}}add the specific segmentation rules{{/strong}} for this segment.',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\tstrong: <strong />,\n\t\t\t\t\t\t},\n\t\t\t\t\t} ) }\n\t\t\t\t</p>,\n\t\t\t] }\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useSegmentId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveSegment()?.id );\n\nconst useSegmentationRules = () => {\n\tconst segmentId = useSegmentId();\n\treturn useSelect( ( select ) => {\n\t\tif ( ! segmentId ) {\n\t\t\treturn [];\n\t\t} //end if\n\t\tconst { getSegmentationRules } = select( NAB_EDITOR );\n\t\treturn getSegmentationRules( segmentId ) || [];\n\t} );\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { ExternalLink } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { STORE_NAME as NAB_SEGMENTS } from '@nab/segmentation-rules';\nimport { addFreeTracker } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { SegmentationRuleTypeCategory } from '../segmentation-rule-type-category';\nimport { usePluginSetting } from '../../hooks';\n\nexport const SegmentationRuleTypeCategoryList = (): JSX.Element => {\n\tconst segmentationRuleTypeCategories = useSegmentationRuleTypeCategories();\n\tconst isSubscribed = !! usePluginSetting( 'subscription' );\n\n\tif ( ! isSubscribed ) {\n\t\treturn (\n\t\t\t<div className=\"nab-segmentation-rule-type-list\">\n\t\t\t\t<ExternalLink\n\t\t\t\t\tclassName=\"components-button is-secondary\"\n\t\t\t\t\thref={ addFreeTracker(\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'https://neliosoftware.com/testing/pricing/',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t)\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Subscribe to Use Segmentation Rules',\n\t\t\t\t\t\t'user',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</ExternalLink>\n\t\t\t</div>\n\t\t);\n\t} //end if\n\n\treturn (\n\t\t<ul className=\"nab-segmentation-rule-type-category-list\">\n\t\t\t{ segmentationRuleTypeCategories.map( ( category ) => (\n\t\t\t\t<SegmentationRuleTypeCategory\n\t\t\t\t\tkey={ category.name }\n\t\t\t\t\tcategory={ category }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</ul>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useSegmentationRuleTypeCategories = () =>\n\tuseSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_SEGMENTS ).getSegmentationRuleTypeCategories() || []\n\t);\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { DropdownMenu } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport {\n\tSTORE_NAME as NAB_SEGMENTS,\n\tcreateSegmentationRule as createSegmentationRuleWithDefaults,\n} from '@nab/segmentation-rules';\nimport type {\n\tSegmentationRuleCategory,\n\tSegmentationRuleCategoryName,\n\tSegmentationRuleTypeName,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport type SegmentationRuleTypeCategoryProps = {\n\treadonly category: SegmentationRuleCategory;\n};\n\nexport const SegmentationRuleTypeCategory = ( {\n\tcategory,\n}: SegmentationRuleTypeCategoryProps ): JSX.Element | null => {\n\tconst segmentationRuleTypes = useSegmentationRuleTypes( category.name );\n\tconst activeSegmentRules = useActiveSegmentRules();\n\tconst createSegmentationRule = useSegmentationRuleCreator();\n\tconst Icon = category.icon;\n\n\tif ( ! segmentationRuleTypes.length ) {\n\t\treturn null;\n\t} //end if\n\n\treturn (\n\t\t<li\n\t\t\tkey={ category.name }\n\t\t\tclassName=\"nab-segmentation-rule-type-category\"\n\t\t>\n\t\t\t<DropdownMenu\n\t\t\t\ticon={ <Icon /> }\n\t\t\t\tclassName=\"nab-segmentation-rule-type-category__item\"\n\t\t\t\tlabel={ category.title }\n\t\t\t\tcontrols={ segmentationRuleTypes.map(\n\t\t\t\t\t( { name, title, icon: TypeIcon } ) => ( {\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\ticon: <TypeIcon />,\n\t\t\t\t\t\tisDisabled: activeSegmentRules.some(\n\t\t\t\t\t\t\t( rule ) => rule.type === name\n\t\t\t\t\t\t),\n\t\t\t\t\t\tonClick: () => createSegmentationRule( name ),\n\t\t\t\t\t} )\n\t\t\t\t) }\n\t\t\t\ttoggleProps={ {\n\t\t\t\t\tclassName: 'nab-segmentation-rule-type-category__toggle',\n\t\t\t\t\tdisabled: segmentationRuleTypes.every( ( ruleType ) =>\n\t\t\t\t\t\tactiveSegmentRules.some(\n\t\t\t\t\t\t\t( rule ) => rule.type === ruleType.name\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t} }\n\t\t\t\tmenuProps={ {\n\t\t\t\t\tclassName: 'nab-segmentation-rule-type-category__menu',\n\t\t\t\t} }\n\t\t\t/>\n\t\t</li>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useSegmentationRuleTypes = ( catName: SegmentationRuleCategoryName ) =>\n\tuseSelect( ( select ) => {\n\t\tconst ruleTypes =\n\t\t\tselect( NAB_SEGMENTS ).getSegmentationRuleTypes() || [];\n\t\treturn ruleTypes.filter( ( { category } ) => category === catName );\n\t} );\n\nconst useActiveSegmentRules = () => {\n\tconst activeSegment = useActiveSegment();\n\treturn useSelect( ( select ) => {\n\t\tconst { getSegmentationRules } = select( NAB_EDITOR );\n\t\treturn activeSegment?.id\n\t\t\t? getSegmentationRules( activeSegment.id ) || []\n\t\t\t: [];\n\t} );\n};\n\nconst useActiveSegment = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveSegment() );\n\nconst useSegmentationRuleCreator = () => {\n\tconst { addSegmentationRulesIntoSegment } = useDispatch( NAB_EDITOR );\n\tconst activeSegment = useActiveSegment();\n\treturn ( type: SegmentationRuleTypeName ) => {\n\t\tif ( ! activeSegment ) {\n\t\t\treturn;\n\t\t} //end if\n\t\tconst rule = createSegmentationRuleWithDefaults( type );\n\t\tif ( rule ) {\n\t\t\taddSegmentationRulesIntoSegment( activeSegment.id, rule );\n\t\t} //end if\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Button, Dashicon, PanelBody } from '@safe-wordpress/components';\nimport { useSelect, useDispatch } from '@safe-wordpress/data';\nimport { useState } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { noop } from 'lodash';\nimport { STORE_NAME as NAB_SEGMENTS } from '@nab/segmentation-rules';\nimport { isEmpty } from '@nab/utils';\nimport type {\n\tSegmentId,\n\tSegmentationRule as SR,\n\tSegmentationRuleId,\n\tDict,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport type SegmentationRuleProps = {\n\treadonly readOnly?: boolean;\n\treadonly rule: SR;\n\treadonly segmentId: SegmentId;\n};\n\nexport const SegmentationRule = ( {\n\treadOnly,\n\trule,\n\tsegmentId,\n}: SegmentationRuleProps ): JSX.Element => {\n\tconst experimentId = useExperimentId();\n\tconst segmentIndex = useActiveSegmentIndex();\n\tconst ruleType = useSegmentationRuleType( rule.type );\n\n\tconst View = ruleType?.view;\n\tconst Edit = ruleType?.edit;\n\tconst Icon = ruleType?.icon;\n\tconst attributes = rule?.attributes || {};\n\tconst validate = ruleType?.validate ?? ( () => ( {} ) );\n\n\tconst errors = validate( attributes );\n\tconst [ initialOpen ] = useState( ! isEmpty( errors ) );\n\n\tconst setAttributes = useSetAttributes( segmentId, rule.id );\n\tconst remove = useRemove( segmentId, rule.id );\n\n\tif ( readOnly ) {\n\t\treturn (\n\t\t\t<div className=\"nab-segmentation-rule\">\n\t\t\t\t<div className=\"nab-segmentation-rule__view\">\n\t\t\t\t\t{ !! Icon ? (\n\t\t\t\t\t\t<Icon className=\"nab-segmentation-rule__icon\" />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\tclassName=\"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid\"\n\t\t\t\t\t\t\ticon=\"warning\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<div className=\"nab-segmentation-rule__actual-view\">\n\t\t\t\t\t\t{ !! View ? (\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\t\t\tsegmentId={ segmentId }\n\t\t\t\t\t\t\t\tsegmentIndex={ segmentIndex }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t'Invalid segmentation rule.',\n\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t} //end if\n\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"nab-segmentation-rule\"\n\t\t\tinitialOpen={ initialOpen }\n\t\t\ttitle={\n\t\t\t\t(\n\t\t\t\t\t<div className=\"nab-segmentation-rule__view\">\n\t\t\t\t\t\t{ !! Icon ? (\n\t\t\t\t\t\t\t<Icon className=\"nab-segmentation-rule__icon\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\tclassName=\"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid\"\n\t\t\t\t\t\t\t\ticon=\"warning\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<div className=\"nab-segmentation-rule__actual-view\">\n\t\t\t\t\t\t\t{ !! View ? (\n\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\t\t\t\tsegmentId={ segmentId }\n\t\t\t\t\t\t\t\t\tsegmentIndex={ segmentIndex }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t'Invalid segmentation rule.',\n\t\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t ) as unknown as string\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"nab-segmentation-rule__edit\">\n\t\t\t\t{ !! Edit ? (\n\t\t\t\t\t<Edit\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\tsegmentId={ segmentId }\n\t\t\t\t\t\tsegmentIndex={ segmentIndex }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\terrors={ errors }\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'This segmentation rule cant be properly loaded. Please consider removing it.',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t<Button\n\t\t\t\tvariant=\"link\"\n\t\t\t\tisDestructive\n\t\t\t\tonClick={ remove }\n\t\t\t\tclassName=\"nab-segmentation-rule__delete-button\"\n\t\t\t>\n\t\t\t\t{ _x( 'Delete', 'command', 'neli-ab-testing' ) }\n\t\t\t</Button>\n\t\t</PanelBody>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useExperimentId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getExperimentId() );\n\nconst useActiveSegmentIndex = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveSegmentIndex() );\n\nconst useSegmentationRuleType = ( type: SegmentationRuleId ) =>\n\tuseSelect( ( select ) =>\n\t\tselect( NAB_SEGMENTS ).getSegmentationRuleType( type )\n\t);\n\nconst useSetAttributes = (\n\tsegmentId: SegmentId,\n\truleId: SegmentationRuleId\n) => {\n\tconst { updateSegmentationRule } = useDispatch( NAB_EDITOR );\n\treturn segmentId && ruleId\n\t\t? ( attrs: Dict ) => updateSegmentationRule( segmentId, ruleId, attrs )\n\t\t: noop;\n};\n\nconst useRemove = ( segmentId: SegmentId, ruleId: SegmentationRuleId ) => {\n\tconst { removeSegmentationRulesFromSegment } = useDispatch( NAB_EDITOR );\n\treturn segmentId && ruleId\n\t\t? () => removeSegmentationRulesFromSegment( segmentId, ruleId )\n\t\t: noop;\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport {\n\tDashicon,\n\tExternalLink,\n\tSelectControl,\n} from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { findIndex } from 'lodash';\nimport interpolateComponents from '@automattic/interpolate-components';\nimport { addFreeTracker } from '@nab/utils';\nimport type { Dict, Segment as RealSegment, SegmentId } from '@nab/types';\ntype Segment = Omit< RealSegment, 'segmentationRules' >;\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute, usePluginSetting } from '../hooks';\nimport { Segment as SegmentView } from '../segment';\nimport { SegmentList } from '../segment-list';\nimport { STORE_NAME as NAB_EDITOR } from '../../store/config';\n\nexport const SegmentationSection = (): JSX.Element => {\n\tconst [ segment, updateActiveSegment ] = useActiveSegment();\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst [ segmentEvaluation, setSegmentEvaluation ] = useSegmentEvaluation();\n\tconst isSubscribed = !! usePluginSetting( 'subscription' );\n\tconst globalSegmentEvaluation = usePluginSetting( 'segmentEvaluation' );\n\tconst isExperimentPaused = ( status || '' ).includes( 'paused' );\n\n\tconst removeActiveSegment = useActiveSegmentRemover();\n\tconst canSegmentBeRemoved = ! isExperimentPaused;\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment__segmentation-section\">\n\t\t\t<h2>\n\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\tmixedString: sprintf(\n\t\t\t\t\t\t/* translators: dashicon */\n\t\t\t\t\t\t_x( '%s Segmentation', 'text', 'nelio-ab-testing' ),\n\t\t\t\t\t\t'{{icon}}{{/icon}}'\n\t\t\t\t\t),\n\t\t\t\t\tcomponents: {\n\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\tclassName=\"nab-segmentation-section__title-icon\"\n\t\t\t\t\t\t\t\ticon=\"groups\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t} ) }\n\n\t\t\t\t{ 'custom' === globalSegmentEvaluation && (\n\t\t\t\t\t<div className=\"nab-edit-experiment-segmentation-section__strategy\">\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tvalue={ segmentEvaluation }\n\t\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: 'site' as const,\n\t\t\t\t\t\t\t\t\tlabel: _x(\n\t\t\t\t\t\t\t\t\t\t'Evaluate on Site Landing',\n\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: 'tested-page' as const,\n\t\t\t\t\t\t\t\t\tlabel: _x(\n\t\t\t\t\t\t\t\t\t\t'Evaluate on Tested Pages',\n\t\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\tonChange={ setSegmentEvaluation }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</h2>\n\n\t\t\t{ !! isSubscribed && (\n\t\t\t\t<div className=\"nab-edit-experiment-segmentation-section__content\">\n\t\t\t\t\t<SegmentList />\n\t\t\t\t\t{ segment ? (\n\t\t\t\t\t\t<SegmentView\n\t\t\t\t\t\t\tname={ segment.attributes.name }\n\t\t\t\t\t\t\tsetName={ ( name ) =>\n\t\t\t\t\t\t\t\tupdateActiveSegment( {\n\t\t\t\t\t\t\t\t\t...segment.attributes,\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tremoveSegment={\n\t\t\t\t\t\t\t\tcanSegmentBeRemoved\n\t\t\t\t\t\t\t\t\t? removeActiveSegment\n\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p className=\"nab-edit-experiment-segmentation-section__content--empty\">\n\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t'Add a new segment to narrow your tested audience and target only a subset of your visitors.',\n\t\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t) }\n\n\t\t\t{ ! isSubscribed && (\n\t\t\t\t<div className=\"nab-edit-experiment-segmentation-section__content nab-edit-experiment-segmentation-section__content--free\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'All your visitors participate in this test. Segmentation allows you to narrow your tested audience and target only a subset of your visitors.',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"nab-edit-experiment-segmentation-section__content-action\">\n\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\tclassName=\"components-button is-secondary\"\n\t\t\t\t\t\t\thref={ addFreeTracker(\n\t\t\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t\t\t'https://neliosoftware.com/testing/pricing/',\n\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t'Subscribe to Unlock Segmentation',\n\t\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveSegment = () => {\n\tconst segment = useSelect( ( select ) =>\n\t\tselect( NAB_EDITOR ).getActiveSegment()\n\t);\n\n\tconst { updateSegment: doUpdate } = useDispatch( NAB_EDITOR );\n\tconst updateSegment = ( attributes: Dict ) => {\n\t\tif ( segment?.id ) {\n\t\t\tdoUpdate( segment.id, attributes );\n\t\t} //end if\n\t};\n\n\treturn [ segment, updateSegment ] as const;\n};\n\nconst useActiveSegmentRemover = () => {\n\tconst [ segment ] = useActiveSegment();\n\tconst segments = useSelect( ( select ) =>\n\t\tselect( NAB_EDITOR ).getSegments()\n\t);\n\n\tconst { removeSegments, setActiveSegment } = useDispatch( NAB_EDITOR );\n\n\tif ( ! segment ) {\n\t\treturn () => null;\n\t} //end if\n\n\treturn () => {\n\t\tconst nextSegment = getAdjacentSegment( segments, segment.id );\n\t\tif ( nextSegment ) {\n\t\t\tsetActiveSegment( nextSegment.id );\n\t\t} //end if\n\t\tremoveSegments( segment.id );\n\t};\n};\n\nconst useSegmentEvaluation = () => {\n\tconst segmentEvaluation = useSelect( ( select ) =>\n\t\tselect( NAB_EDITOR ).getSegmentEvaluation()\n\t);\n\tconst { setSegmentEvaluation } = useDispatch( NAB_EDITOR );\n\treturn [ segmentEvaluation, setSegmentEvaluation ] as const;\n};\n\n// =======\n// HELPERS\n// =======\n\nfunction getAdjacentSegment(\n\tsegments: ReadonlyArray< Segment >,\n\tsegmentId: SegmentId\n): Segment | false {\n\tconst index = findIndex( segments, { id: segmentId } );\n\treturn segments[ index + 1 ] || segments[ index - 1 ] || false;\n} //end getAdjacentSegment()\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { PanelBody, TextareaControl } from '@safe-wordpress/components';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useExperimentAttribute } from '../../hooks';\n\nexport const Description = (): JSX.Element => {\n\tconst [ description, setDescription ] =\n\t\tuseExperimentAttribute( 'description' );\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"nab-experiment-description\"\n\t\t\ttitle={ _x( 'Description', 'text', 'nelio-ab-testing' ) }\n\t\t>\n\t\t\t<TextareaControl\n\t\t\t\tlabel={ _x(\n\t\t\t\t\t'Describe your test (optional)',\n\t\t\t\t\t'user',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tclassName=\"nab-experiment-description__textarea\"\n\t\t\t\tvalue={ description }\n\t\t\t\tonChange={ setDescription }\n\t\t\t/>\n\t\t</PanelBody>\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport {\n\tButton,\n\tDropdown,\n\tPanelRow,\n\tSelectControl,\n\tTextControl,\n} from '@safe-wordpress/components';\nimport { useInstanceId } from '@safe-wordpress/compose';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { useState } from '@safe-wordpress/element';\nimport { _n, _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { find } from 'lodash';\nimport { numberFormat } from '@nab/i18n';\nimport type { Experiment } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute, useIsSubscribedTo } from '../../../hooks';\nimport { STORE_NAME as NAB_EDITOR } from '../../../../store/config';\n\nexport const ExperimentEndSchedule = (): JSX.Element => {\n\tconst instanceId = useInstanceId( ExperimentEndSchedule );\n\n\tconst canBeScheduled = useIsSubscribedTo( 'professional' );\n\tconst [ endMode ] = useExperimentAttribute( 'endMode' );\n\tconst [ endValue ] = useExperimentAttribute( 'endValue' );\n\tconst experimentType = useExperimentType();\n\tconst options = END_MODE_OPTIONS[ endMode ];\n\n\tconst [ isCustom, setCustom ] = useCustomValue();\n\n\tconst { setExperimentData } = useDispatch( NAB_EDITOR );\n\tconst onUpdateEndSchedule = (\n\t\tmode: Experiment[ 'endMode' ],\n\t\tvalue: number\n\t) => setExperimentData( { endMode: mode, endValue: value } );\n\n\tif ( ! canBeScheduled ) {\n\t\treturn (\n\t\t\t<PanelRow className=\"nab-experiment-end-schedule\">\n\t\t\t\t<span>{ _x( 'End', 'text', 'nelio-ab-testing' ) }</span>\n\t\t\t\t<span>{ _x( 'Manual', 'text', 'nelio-ab-testing' ) }</span>\n\t\t\t</PanelRow>\n\t\t);\n\t} //end if\n\n\treturn (\n\t\t<PanelRow className=\"nab-experiment-end-schedule\">\n\t\t\t<span>{ _x( 'End', 'text', 'nelio-ab-testing' ) }</span>\n\n\t\t\t<Dropdown\n\t\t\t\tposition=\"bottom right\"\n\t\t\t\tcontentClassName=\"nab-experiment-end-schedule__dropdown\"\n\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName=\"nab-experiment-end-schedule__value screen-reader-text\"\n\t\t\t\t\t\t\thtmlFor={ `nab-experiment-end-schedule__toggle-${ instanceId }` }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t'Click to change',\n\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\tid={ `nab-experiment-end-schedule__toggle-${ instanceId }` }\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName=\"nab-experiment-end-schedule__toggle\"\n\t\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ getLabel( endMode, endValue ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\trenderContent={ () => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t\t\t'End Mode',\n\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tvalue={ endMode }\n\t\t\t\t\t\t\tonChange={ ( mode ) => {\n\t\t\t\t\t\t\t\tsetCustom( false );\n\t\t\t\t\t\t\t\tonUpdateEndSchedule(\n\t\t\t\t\t\t\t\t\tmode,\n\t\t\t\t\t\t\t\t\tgetDefaultValue( mode )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\toptions={ END_MODES.filter(\n\t\t\t\t\t\t\t\t( { value } ) =>\n\t\t\t\t\t\t\t\t\t'confidence' !== value ||\n\t\t\t\t\t\t\t\t\t'nab/heatmap' !== experimentType\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{ !! options && (\n\t\t\t\t\t\t\t<div style={ { marginTop: '1em' } }>\n\t\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t\t\t\t\t'Value',\n\t\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\tonChange={ ( value: string ) => {\n\t\t\t\t\t\t\t\t\t\tsetCustom( 'custom' === value );\n\t\t\t\t\t\t\t\t\t\tonUpdateEndSchedule(\n\t\t\t\t\t\t\t\t\t\t\tendMode,\n\t\t\t\t\t\t\t\t\t\t\tNumber.parseInt( value ) || 0\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\tisCustom ? 'custom' : `${ endValue }`\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\toptions={ options }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t{ !! options && isCustom && (\n\t\t\t\t\t\t\t<div style={ { marginTop: '0.5em' } }>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tplaceholder={ getCustomPlaceholder(\n\t\t\t\t\t\t\t\t\t\tendMode\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\tvalue={ endValue || '' }\n\t\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\t\tonUpdateEndSchedule(\n\t\t\t\t\t\t\t\t\t\t\tendMode,\n\t\t\t\t\t\t\t\t\t\t\tNumber.parseInt( value ) || 0\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</PanelRow>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useExperimentType = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getExperimentType() );\n\nconst useCustomValue = () => {\n\tconst [ endMode ] = useExperimentAttribute( 'endMode' );\n\tconst [ endValue ] = useExperimentAttribute( 'endValue' );\n\tconst options = END_MODE_OPTIONS[ endMode ];\n\tconst shouldBeCustom =\n\t\t!! find( options, { value: 'custom' } ) &&\n\t\t! find( options, { value: `${ endValue }` } );\n\tconst [ isCustom, setCustom ] = useState( shouldBeCustom );\n\treturn [ isCustom, setCustom ] as const;\n};\n\n// ====\n// DATA\n// ====\n\nconst END_MODES: ReadonlyArray< {\n\treadonly value: Experiment[ 'endMode' ];\n\treadonly label: string;\n} > = [\n\t{\n\t\tvalue: 'manual',\n\t\tlabel: _x( 'Manual', 'text', 'nelio-ab-testing' ),\n\t},\n\t{\n\t\tvalue: 'duration',\n\t\tlabel: _x( 'Duration', 'text', 'nelio-ab-testing' ),\n\t},\n\t{\n\t\tvalue: 'page-views',\n\t\tlabel: _x( 'Page Views', 'text', 'nelio-ab-testing' ),\n\t},\n\t{\n\t\tvalue: 'confidence',\n\t\tlabel: _x( 'Confidence', 'text', 'nelio-ab-testing' ),\n\t},\n];\n\nconst END_MODE_OPTIONS: Record<\n\tExperiment[ 'endMode' ],\n\tReadonlyArray< {\n\t\treadonly value: string;\n\t\treadonly label: string;\n\t\treadonly placeholder?: string;\n\t} >\n> = {\n\tmanual: [],\n\tconfidence: [ 95, 96, 97, 98, 99 ].map( ( percentage ) => ( {\n\t\tvalue: `${ percentage }`,\n\t\tlabel: sprintf(\n\t\t\t/* translators: a percentage number, such as 95 */\n\t\t\t_x( '%1$s%%', 'text', 'nelio-ab-testing' ),\n\t\t\tnumberFormat( percentage )\n\t\t),\n\t} ) ),\n\tduration: [\n\t\t...[ 5, 7, 15, 30, 60, 90 ].map( ( duration ) => ( {\n\t\t\tvalue: `${ duration }`,\n\t\t\tlabel: sprintf(\n\t\t\t\t/* translators: number of days */\n\t\t\t\t_n( '%d day', '%d days', duration, 'nelio-ab-testing' ),\n\t\t\t\tduration\n\t\t\t),\n\t\t} ) ),\n\t\t{\n\t\t\tvalue: 'custom',\n\t\t\tlabel: _x( 'Custom', 'text', 'nelio-ab-testing' ),\n\t\t\tplaceholder: _x( 'Days', 'text', 'nelio-ab-testing' ),\n\t\t},\n\t],\n\t'page-views': [\n\t\t...[ 2500, 5000, 10000, 20000, 50000, 100000 ].map( ( views ) => ( {\n\t\t\tvalue: `${ views }`,\n\t\t\tlabel: numberFormat( views ),\n\t\t} ) ),\n\t\t{\n\t\t\tvalue: 'custom',\n\t\t\tlabel: _x( 'Custom', 'text', 'nelio-ab-testing' ),\n\t\t\tplaceholder: _x( 'Days', 'text', 'nelio-ab-testing' ),\n\t\t},\n\t],\n};\n\n// =======\n// HELPERS\n// =======\n\nfunction getLabel(\n\tendMode: Experiment[ 'endMode' ],\n\tendValue: number\n): string {\n\tswitch ( endMode ) {\n\t\tcase 'duration':\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: number of days */\n\t\t\t\t_n(\n\t\t\t\t\t'After %d day',\n\t\t\t\t\t'After %d days',\n\t\t\t\t\tendValue,\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tendValue\n\t\t\t);\n\t\tcase 'page-views':\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: a number */\n\t\t\t\t_n(\n\t\t\t\t\t'After %s page view',\n\t\t\t\t\t'After %s page views',\n\t\t\t\t\tendValue,\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tnumberFormat( endValue )\n\t\t\t); // eslint-disable-line\n\t\tcase 'confidence':\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: a percentage number, such as 95 */\n\t\t\t\t_x( 'At %1$s%% confidence', 'text', 'nelio-ab-testing' ),\n\t\t\t\tnumberFormat( endValue )\n\t\t\t);\n\t\tcase 'manual':\n\t\t\treturn _x( 'Manual', 'text', 'nelio-ab-testing' );\n\t} //end switch\n} //end getLabel()\n\nfunction getDefaultValue( mode: Experiment[ 'endMode' ] ): number {\n\tswitch ( mode ) {\n\t\tcase 'duration':\n\t\t\treturn 15;\n\t\tcase 'page-views':\n\t\t\treturn 5000;\n\t\tcase 'confidence':\n\t\t\treturn 97;\n\t\tcase 'manual':\n\t\t\treturn 0;\n\t} //end switch\n} //end getDefaultValue()\n\nconst getCustomPlaceholder = ( mode: Experiment[ 'endMode' ] ) =>\n\tfind( END_MODE_OPTIONS[ mode ], { value: 'custom' } )?.placeholder ?? '';\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { PanelRow } from '@safe-wordpress/components';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { DateTimePicker } from '@nab/components';\nimport { formatI18nDatetime } from '@nab/date';\n\n/**\n * Internal dependencies\n */\nimport { useExperimentAttribute, useIsSubscribedTo } from '../../../hooks';\n\nexport const ExperimentStartSchedule = (): JSX.Element => {\n\tconst [ startDate, setStartDate ] = useExperimentAttribute( 'startDate' );\n\tconst canBeScheduled = useIsSubscribedTo( 'professional' );\n\tconst isPaused = useIsPaused();\n\n\treturn (\n\t\t<PanelRow className=\"nab-experiment-start-schedule\">\n\t\t\t<span>{ _x( 'Start', 'text', 'nelio-ab-testing' ) }</span>\n\t\t\t<span>\n\t\t\t\t{ !! isPaused && (\n\t\t\t\t\t<span className=\"nab-experiment-start-schedule__date\">\n\t\t\t\t\t\t{ formatI18nDatetime( startDate ) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\n\t\t\t\t{ ! isPaused && ! canBeScheduled && (\n\t\t\t\t\t<span className=\"nab-experiment-start-schedule__date\">\n\t\t\t\t\t\t{ _x( 'Immediately', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\n\t\t\t\t{ ! isPaused && !! canBeScheduled && (\n\t\t\t\t\t<DateTimePicker\n\t\t\t\t\t\tclassName=\"nab-experiment-start-schedule__date\"\n\t\t\t\t\t\tdate={ startDate }\n\t\t\t\t\t\tonChange={ ( v ) => setStartDate( v || '' ) }\n\t\t\t\t\t\tnoDateLabel={ _x(\n\t\t\t\t\t\t\t'Immediately',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\treadonly\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</span>\n\t\t</PanelRow>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useIsPaused = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn status.includes( 'paused' );\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Button, PanelBody, PanelRow } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { STORE_NAME as NAB_DATA } from '@nab/data';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { Status } from './status';\nimport { ExperimentStartSchedule } from './experiment-start-schedule';\nimport { ExperimentEndSchedule } from './experiment-end-schedule';\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport const ExperimentManagement = (): JSX.Element => {\n\tconst canDelete = useCanDelete();\n\tconst { moveToTrash } = useDispatch( NAB_EDITOR );\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"nab-experiment-management\"\n\t\t\ttitle={ _x(\n\t\t\t\t'Status & Management',\n\t\t\t\t'text (experiment)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t) }\n\t\t>\n\t\t\t<Status />\n\t\t\t<ExperimentStartSchedule />\n\t\t\t<ExperimentEndSchedule />\n\n\t\t\t{ canDelete && (\n\t\t\t\t<PanelRow className=\"nab-experiment-management__trash\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tonClick={ () => void moveToTrash() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'Move to Trash',\n\t\t\t\t\t\t\t'command (experiment)',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Button>\n\t\t\t\t</PanelRow>\n\t\t\t) }\n\t\t</PanelBody>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useCanDelete = () =>\n\tuseSelect( ( select ) =>\n\t\tselect( NAB_DATA ).hasCapability( 'delete_nab_experiments' )\n\t);\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { PanelRow } from '@safe-wordpress/components';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport type { Experiment } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute } from '../../../hooks';\n\nexport const Status = (): JSX.Element => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn (\n\t\t<PanelRow className=\"nab-experiment-management__status\">\n\t\t\t<span>{ _x( 'Status', 'text', 'nelio-ab-testing' ) }</span>\n\t\t\t<strong className=\"nab-experiment-management__status-value\">\n\t\t\t\t{ getStatusLabel( status ) }\n\t\t\t</strong>\n\t\t</PanelRow>\n\t);\n};\n\n// =======\n// HELPERS\n// =======\n\nfunction getStatusLabel( status: Experiment[ 'status' ] ): string {\n\tswitch ( status ) {\n\t\tcase 'draft':\n\t\t\treturn _x(\n\t\t\t\t'Draft',\n\t\t\t\t'text (experiment status)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'ready':\n\t\t\treturn _x(\n\t\t\t\t'Ready',\n\t\t\t\t'text (experiment status)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'scheduled':\n\t\t\treturn _x(\n\t\t\t\t'Scheduled',\n\t\t\t\t'text (experiment status)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'paused':\n\t\t\treturn _x(\n\t\t\t\t'Paused',\n\t\t\t\t'text (experiment status)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'paused_draft':\n\t\t\treturn _x(\n\t\t\t\t'Paused Draft',\n\t\t\t\t'text (experiment status)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'running':\n\t\tcase 'finished':\n\t\tcase 'trash':\n\t\t\treturn '-';\n\t} //end switch\n} //end getStatusLabel()\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Dashicon } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport interpolateComponents from '@automattic/interpolate-components';\nimport { STORE_NAME as NAB_DATA } from '@nab/data';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { ExperimentManagement } from './experiment-management';\nimport { Description } from './description';\nimport { Scope } from './scope';\n\nexport const Sidebar = (): JSX.Element => {\n\tconst dims = useSidebarDimensions();\n\treturn (\n\t\t<div className=\"nab-edit-experiment-sidebar\" style={ dims }>\n\t\t\t<div className=\"nab-edit-experiment-sidebar__element-wrapper\">\n\t\t\t\t<h2 className=\"nab-edit-experiment-sidebar__section-title\">\n\t\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\t\tmixedString: sprintf(\n\t\t\t\t\t\t\t/* translators: dashicon */\n\t\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t\t'%s Additional Settings',\n\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t'{{icon}}{{/icon}}'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\t\tclassName=\"nab-edit-experiment-sidebar__section-title-icon\"\n\t\t\t\t\t\t\t\t\ticon=\"admin-settings\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t} ) }\n\t\t\t\t</h2>\n\n\t\t\t\t<ExperimentManagement />\n\t\t\t\t<Description />\n\t\t\t\t<Scope />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useSidebarDimensions = () =>\n\tuseSelect( ( select ) => {\n\t\tconst { getPageAttribute } = select( NAB_DATA );\n\t\tconst { applyFix, ...dims } = getPageAttribute( 'sidebarDimensions' );\n\t\treturn applyFix ? dims : undefined;\n\t} );\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { CheckboxControl } from '@safe-wordpress/components';\nimport { useDispatch } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { createScopeRule } from '@nab/utils';\nimport { map } from 'lodash';\nimport type { ScopeRule } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport type ConsistencyScopeProps = {\n\treadonly rules: ReadonlyArray< ScopeRule >;\n};\n\nexport const ConsistencyScope = ( {\n\trules,\n}: ConsistencyScopeProps ): JSX.Element => {\n\tconst enableConsistency = useConsistencyEnabler( rules );\n\treturn (\n\t\t<>\n\t\t\t{ ! rules.length ? (\n\t\t\t\t<p>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Variants will be visible on the tested elements page. All other pages will also show the appropriate variant of this test whenever the tested element appears on them.',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) : (\n\t\t\t\t<p>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Variants will be visible only on the tested elements page.',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t\t<CheckboxControl\n\t\t\t\tlabel={ _x(\n\t\t\t\t\t'Global Consistency',\n\t\t\t\t\t'command',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tchecked={ ! rules.length }\n\t\t\t\tonChange={ () => enableConsistency( ! rules.length ) }\n\t\t\t/>\n\t\t</>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useConsistencyEnabler = ( rules: ReadonlyArray< ScopeRule > ) => {\n\tconst { addScopeRules, removeScopeRules } = useDispatch( NAB_EDITOR );\n\treturn ( consistency: boolean ) => {\n\t\tremoveScopeRules( map( rules, 'id' ) );\n\t\tif ( consistency ) {\n\t\t\taddScopeRules( createScopeRule( { type: 'tested-post' } ) );\n\t\t} //end if\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { PanelBody } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { STORE_NAME as NAB_EXPERIMENTS } from '@nab/experiments';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { NewRuleForm } from './new-rule-form';\nimport { RuleList } from './rule-list';\nimport { ConsistencyScope } from './consistency-scope';\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport const Scope = (): JSX.Element | null => {\n\tconst rules = useRules();\n\tconst scopeSupport = useScopeSupport();\n\tconst testAgainstExistingContent = useTestAgainstExistingContent();\n\n\tif ( ! scopeSupport ) {\n\t\treturn null;\n\t} //end if\n\n\tif ( testAgainstExistingContent ) {\n\t\treturn null;\n\t} //end if\n\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"nab-experiment-scope\"\n\t\t\ttitle={ _x( 'Test Scope', 'text', 'nelio-ab-testing' ) }\n\t\t>\n\t\t\t{ 'tested-post-with-consistency' === scopeSupport ? (\n\t\t\t\t<ConsistencyScope rules={ rules } />\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<RuleList rules={ rules } scopeSupport={ scopeSupport } />\n\t\t\t\t\t<NewRuleForm\n\t\t\t\t\t\trules={ rules }\n\t\t\t\t\t\tscopeSupport={ scopeSupport }\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) }\n\t\t</PanelBody>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useRules = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getScope() );\n\nconst useScopeSupport = () =>\n\tuseSelect( ( select ) => {\n\t\tconst { getExperimentSupport } = select( NAB_EXPERIMENTS );\n\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\t\treturn getExperimentSupport( getExperimentType(), 'scope' );\n\t} );\n\nconst useTestAgainstExistingContent = () =>\n\tuseSelect( ( select ) => {\n\t\tconst control = select( NAB_EDITOR ).getAlternative( 'control' );\n\t\treturn !! control?.attributes.testAgainstExistingContent;\n\t} );\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport {\n\tButton,\n\tPanelRow,\n\tSelectControl,\n\tTextControl,\n} from '@safe-wordpress/components';\nimport { useDispatch } from '@safe-wordpress/data';\nimport { useState } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { trim } from 'lodash';\nimport { ErrorText } from '@nab/components';\nimport { createScopeRule, isUrlFragmentInvalid, isEmpty } from '@nab/utils';\nimport type { ExperimentType, ScopeRule } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport type NewRuleFormProps = {\n\treadonly rules: ReadonlyArray< ScopeRule >;\n\treadonly scopeSupport: Required< ExperimentType[ 'supports' ] >[ 'scope' ];\n};\n\nexport const NewRuleForm = ( {\n\trules,\n\tscopeSupport,\n}: NewRuleFormProps ): JSX.Element => {\n\tconst [ type, setType ] = useState< 'partial' | 'exact' >( 'partial' );\n\tconst [ value, setValue ] = useState( '' );\n\tconst { addScopeRules } = useDispatch( NAB_EDITOR );\n\n\tconst addRule = () => {\n\t\tsetValue( '' );\n\t\tif ( 'custom-with-tested-post' === scopeSupport && ! rules.length ) {\n\t\t\taddScopeRules( [\n\t\t\t\tcreateScopeRule( { type: 'tested-post' } ),\n\t\t\t\tcreateScopeRule( { type, value } ),\n\t\t\t] );\n\t\t} else {\n\t\t\taddScopeRules( [ createScopeRule( { type, value } ) ] );\n\t\t} //end if\n\t};\n\n\tconst error = value ? isUrlFragmentInvalid( value ) || '' : '';\n\n\treturn (\n\t\t<div className=\"nab-experiment-scope__new-rule-form\">\n\t\t\t<SelectControl\n\t\t\t\tclassName=\"nab-experiment-scope__new-rule-mode\"\n\t\t\t\tlabel={ _x(\n\t\t\t\t\t'Select URL matching mode',\n\t\t\t\t\t'user',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tvalue={ type }\n\t\t\t\toptions={ OPTIONS }\n\t\t\t\tonChange={ ( t: 'partial' | 'exact' ) => setType( t ) }\n\t\t\t/>\n\n\t\t\t<TextControl\n\t\t\t\tclassName=\"nab-experiment-scope__new-rule-value\"\n\t\t\t\tlabel={ _x( 'Write a URL', 'user', 'nelio-ab-testing' ) }\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ setValue }\n\t\t\t/>\n\n\t\t\t<ErrorText value={ error } />\n\n\t\t\t<PanelRow className=\"nab-experiment-scope__add-rule-action-container\">\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tonClick={ addRule }\n\t\t\t\t\tdisabled={ isEmpty( trim( value ) ) }\n\t\t\t\t\tclassName=\"nab-experiment-scope__add-rule-action\"\n\t\t\t\t>\n\t\t\t\t\t{ _x( 'Add', 'command', 'nelio-ab-testing' ) }\n\t\t\t\t</Button>\n\t\t\t</PanelRow>\n\t\t</div>\n\t);\n};\n\n// ====\n// DATA\n// ====\n\nconst OPTIONS = [\n\t{\n\t\tvalue: 'partial',\n\t\tlabel: _x(\n\t\t\t'URL contains the expected value',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t},\n\t{\n\t\tvalue: 'exact',\n\t\tlabel: _x(\n\t\t\t'URL exactly matches the expected value',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t},\n];\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport { Button } from '@safe-wordpress/components';\nimport { useDispatch } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { map } from 'lodash';\nimport type {\n\tCustomUrlScopeRule,\n\tExperimentType,\n\tScopeRule,\n\tScopeRuleId,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { STORE_NAME as NAB_EDITOR } from '../../../store/config';\n\nexport type RuleListProps = {\n\treadonly rules: ReadonlyArray< ScopeRule >;\n\treadonly scopeSupport: Required< ExperimentType[ 'supports' ] >[ 'scope' ];\n};\n\nexport const RuleList = ( {\n\trules,\n\tscopeSupport,\n}: RuleListProps ): JSX.Element => {\n\tconst { removeScopeRules } = useDispatch( NAB_EDITOR );\n\n\tif ( ! rules.length ) {\n\t\treturn (\n\t\t\t<p>\n\t\t\t\t{ 'custom-with-tested-post' === scopeSupport\n\t\t\t\t\t? _x(\n\t\t\t\t\t\t\t'Variants will be visible on all the pages of your website, including that of the tested element.',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  )\n\t\t\t\t\t: _x(\n\t\t\t\t\t\t\t'Variants will be visible on all the pages of your website.',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  ) }{ ' ' }\n\t\t\t\t{ _x(\n\t\t\t\t\t'If you wish to limit its scope to certain pages only, use the following form to define the URLs in which the test should run.',\n\t\t\t\t\t'user',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t);\n\t} //end if\n\n\tconst removeScopeRule = ( id: ScopeRuleId ) => {\n\t\tif (\n\t\t\t'custom-with-tested-post' === scopeSupport &&\n\t\t\t2 === rules.length\n\t\t) {\n\t\t\tremoveScopeRules( map( rules, 'id' ) );\n\t\t} else {\n\t\t\tremoveScopeRules( id );\n\t\t} //end if\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<p>\n\t\t\t\t{ 'custom-with-tested-post' === scopeSupport\n\t\t\t\t\t? _x(\n\t\t\t\t\t\t\t'Variants will be visible only on pages matching the following criteria, as well as on the tested elements page.',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  )\n\t\t\t\t\t: _x(\n\t\t\t\t\t\t\t'Variants will be visible only on pages matching the following criteria:',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  ) }\n\t\t\t</p>\n\n\t\t\t<ul className=\"nab-experiment-scope__rule-list\">\n\t\t\t\t{ rules\n\t\t\t\t\t.filter( isCustomUrlScopeRule )\n\t\t\t\t\t.map( ( { id, attributes: { value, type } } ) => (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={ id }\n\t\t\t\t\t\t\tclassName=\"nab-experiment-scope__rule-list-item\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"nab-experiment-scope__active-rule-type\">\n\t\t\t\t\t\t\t\t{ 'exact' === type &&\n\t\t\t\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t\t\t\t'URL is:',\n\t\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ 'partial' === type &&\n\t\t\t\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t\t\t\t'URL contains:',\n\t\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"nab-experiment-scope__active-rule-value\"\n\t\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\tclassName=\"nab-experiment-scope__remove-rule-action\"\n\t\t\t\t\t\t\t\tonClick={ () => removeScopeRule( id ) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t'Delete',\n\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t) ) }\n\t\t\t</ul>\n\t\t</>\n\t);\n};\n\n// =======\n// HELPERS\n// =======\n\nexport const isCustomUrlScopeRule = ( r: ScopeRule ): r is CustomUrlScopeRule =>\n\t'exact' === r.attributes.type || 'partial' === r.attributes.type;\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { useEffect, useState } from '@safe-wordpress/element';\n\n/**\n * External dependencies\n */\nimport { isEqual, find, keyBy, map } from 'lodash';\nimport { STORE_NAME as NAB_ACTIONS } from '@nab/conversion-actions';\nimport { isInTheFuture } from '@nab/date';\nimport { STORE_NAME as NAB_SEGMENTS } from '@nab/segmentation-rules';\nimport type { Alternative, Experiment, Goal, Segment } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { isTestedElementInvalid, shouldExperimentBeDraft } from './utils';\nimport { useExperimentAttribute } from '../hooks';\nimport { STORE_NAME as NAB_EDITOR } from '../../store/config';\n\nexport const StatusManager = (): null => {\n\tuseStatusUpdateEffect();\n\tuseInvalidControlEffect();\n\treturn null;\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useStatusUpdateEffect = () => {\n\tconst rationale = useDraftRationale();\n\tconst startDate = useExperimentAttribute( 'startDate' )[ 0 ] || '';\n\tconst [ status, setStatus ] = useExperimentAttribute( 'status' );\n\n\tconst { setDraftStatusRationale } = useDispatch( NAB_EDITOR );\n\tconst setStatusAndRationale = (\n\t\tnewStatus: Experiment[ 'status' ],\n\t\tnewRationale?: string\n\t): void => {\n\t\tif ( status.includes( 'paused' ) ) {\n\t\t\tnewStatus = 'draft' === newStatus ? 'paused_draft' : 'paused';\n\t\t} //end if\n\t\tsetStatus( newStatus );\n\t\tsetDraftStatusRationale( newRationale ?? '' );\n\t};\n\n\tuseEffect( () => {\n\t\tif ( 'running' === status || 'trash' === status ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tif ( rationale ) {\n\t\t\tsetStatusAndRationale( 'draft', rationale );\n\t\t\treturn;\n\t\t} //end if\n\n\t\tif ( 'ready' === status ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tif ( 'scheduled' === status && ! isInTheFuture( startDate ) ) {\n\t\t\tsetStatusAndRationale( 'ready' );\n\t\t} //end if\n\n\t\tif ( 'scheduled' !== status ) {\n\t\t\tsetStatusAndRationale( 'ready' );\n\t\t} //end if\n\t}, [ rationale, startDate, status ] );\n};\n\nconst useInvalidControlEffect = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst alternatives = useAlternatives();\n\tconst type = useExperimentAttribute( 'type' )[ 0 ];\n\tconst control = find( alternatives, { id: 'control' } );\n\tconst wasInvalid = useSelect( ( select ) =>\n\t\tselect( NAB_EDITOR ).isTestedElementInvalid()\n\t);\n\n\tconst { setTestedElementAsInvalid } = useDispatch( NAB_EDITOR );\n\n\tuseEffect( () => {\n\t\tif ( 'running' === status ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tconst isInvalid = !! control && isTestedElementInvalid( control, type );\n\t\tif ( ! isEqual( wasInvalid, isInvalid ) ) {\n\t\t\tsetTestedElementAsInvalid(\n\t\t\t\t!! control && isTestedElementInvalid( control, type )\n\t\t\t);\n\t\t} //end if\n\t}, [ control, type, wasInvalid ] );\n};\n\nconst useDraftRationale = () => {\n\tconst [ rationale, setRationale ] = useState( '' );\n\n\tconst name = useExperimentAttribute( 'name' )[ 0 ] || '';\n\tconst type = useExperimentAttribute( 'type' )[ 0 ];\n\n\tconst alternatives = useAlternatives();\n\tconst goals = useGoals();\n\tconst segments = useSegments();\n\n\tconst conversionActionTypes = useConversionActionTypes();\n\tconst segmentationRuleTypes = useSegmentationRuleTypes();\n\n\tuseEffect( () => {\n\t\tconst control = find( alternatives, { id: 'control' } ) as Alternative;\n\t\tconst newRationale = shouldExperimentBeDraft(\n\t\t\t{ name, control, alternatives, goals, segments, type },\n\t\t\tconversionActionTypes,\n\t\t\tsegmentationRuleTypes\n\t\t);\n\t\tsetRationale( newRationale || '' );\n\t}, [\n\t\tname,\n\t\ttype,\n\t\tJSON.stringify( alternatives ),\n\t\tJSON.stringify( goals ),\n\t\tJSON.stringify( segments ),\n\t] );\n\n\treturn rationale;\n};\n\nconst useAlternatives = (): ReadonlyArray< Alternative > =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getAlternatives() );\n\nconst useGoals = (): ReadonlyArray< Goal > =>\n\tuseSelect( ( select ) => {\n\t\tconst { getGoals, getConversionActions } = select( NAB_EDITOR );\n\t\treturn map( getGoals(), ( goal ) => ( {\n\t\t\t...goal,\n\t\t\tconversionActions: getConversionActions( goal.id ),\n\t\t} ) );\n\t} );\n\nconst useSegments = (): ReadonlyArray< Segment > =>\n\tuseSelect( ( select ) => {\n\t\tconst { getSegments, getSegmentationRules } = select( NAB_EDITOR );\n\t\treturn map( getSegments(), ( segment ) => ( {\n\t\t\t...segment,\n\t\t\tsegmentationRules: getSegmentationRules( segment.id ),\n\t\t} ) );\n\t} );\n\nconst useConversionActionTypes = () =>\n\tuseSelect( ( select ) =>\n\t\tkeyBy( select( NAB_ACTIONS ).getConversionActionTypes() || [], 'name' )\n\t);\n\nconst useSegmentationRuleTypes = () =>\n\tuseSelect( ( select ) =>\n\t\tkeyBy( select( NAB_SEGMENTS ).getSegmentationRuleTypes() || [], 'name' )\n\t);\n","/**\n * WordPress dependencies\n */\nimport { _x, sprintf } from '@safe-wordpress/i18n';\nimport { applyFilters } from '@safe-wordpress/hooks';\n\n/**\n * External dependencies\n */\nimport { trim, values } from 'lodash';\nimport { getConversionActionScopeError, isEmpty } from '@nab/utils';\nimport type {\n\tAlternative,\n\tConversionActionType,\n\tConversionActionTypeName,\n\tDict,\n\tExperiment,\n\tExperimentTypeName,\n\tGoal,\n\tSegment,\n\tSegmentationRuleType,\n\tSegmentationRuleTypeName,\n} from '@nab/types';\n\ntype ExperimentSummary = Pick<\n\tExperiment,\n\t'name' | 'goals' | 'segments' | 'type'\n> & {\n\treadonly alternatives: ReadonlyArray< Alternative >;\n\treadonly control: Alternative;\n};\n\ntype ConversionActionTypes = Record<\n\tConversionActionTypeName,\n\tConversionActionType\n>;\ntype SegmentationRuleTypes = Record<\n\tSegmentationRuleTypeName,\n\tSegmentationRuleType\n>;\n\nexport function shouldExperimentBeDraft(\n\texperiment: ExperimentSummary,\n\tconversionActionTypes: ConversionActionTypes,\n\tsegmentationRuleTypes: SegmentationRuleTypes\n): string | false {\n\tconst { control, alternatives, goals, segments, name, type } = experiment;\n\n\tif ( ! name ) {\n\t\treturn _x( 'Test is unnamed', 'text', 'nelio-ab-testing' );\n\t} //end if\n\n\tif ( alternatives.length < 2 ) {\n\t\treturn _x(\n\t\t\t'Test doesnt have any variants',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t);\n\t} //end if\n\n\tconst errorWithTestedElement = getErrorWithTestedElementIfAny(\n\t\tcontrol.attributes,\n\t\ttype\n\t);\n\tif ( errorWithTestedElement ) {\n\t\treturn errorWithTestedElement;\n\t} //end if\n\n\tconst [ , ...alts ] = alternatives;\n\tconst errorWithAlternative: string | false = alts.reduce(\n\t\t( error: false | string, alt, index ) =>\n\t\t\t! error\n\t\t\t\t? getErrorWithAlternativeIfAny( alt.attributes, index, type )\n\t\t\t\t: error,\n\t\tfalse\n\t);\n\tif ( errorWithAlternative ) {\n\t\treturn errorWithAlternative;\n\t} //end if\n\n\tconst errorWithGoals = areGoalsInvalid( goals, conversionActionTypes );\n\tif ( errorWithGoals ) {\n\t\treturn errorWithGoals;\n\t} //end if\n\n\tconst errorWithSegments = areSegmentsInvalid(\n\t\tsegments,\n\t\tsegmentationRuleTypes\n\t);\n\tif ( errorWithSegments ) {\n\t\treturn errorWithSegments;\n\t} //end if\n\n\treturn false;\n} //end shouldExperimentBeDraft()\n\nexport function isTestedElementInvalid(\n\ttestedElement: Alternative,\n\texperimentType: ExperimentTypeName\n): boolean {\n\treturn !! getErrorWithTestedElementIfAny(\n\t\ttestedElement.attributes,\n\t\texperimentType\n\t);\n} //end isTestedElementInvalid()\n\n// =======\n// HELPERS\n// =======\n\nfunction getErrorWithTestedElementIfAny(\n\ttestedElement: Dict,\n\texperimentType: string\n): string | false {\n\tconst isValid =\n\t\t!! testedElement &&\n\t\t! isEmpty( testedElement ) &&\n\t\tvalues( testedElement )\n\t\t\t.filter( ( attr ) => 'boolean' !== typeof attr )\n\t\t\t.filter( ( attr ) => attr !== undefined )\n\t\t\t.every( ( attr ) => !! attr );\n\n\tconst error = ! isValid\n\t\t? _x(\n\t\t\t\t'Test doesnt specify the tested element',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t  )\n\t\t: false;\n\n\treturn applyFilters< string | false >(\n\t\t'nab.isTestedElementInvalid',\n\t\terror,\n\t\ttestedElement,\n\t\texperimentType\n\t);\n} //end getErrorWithTestedElementIfAny()\n\nfunction getErrorWithAlternativeIfAny(\n\talternative: Alternative[ 'attributes' ],\n\tindex: number,\n\texperimentType: ExperimentTypeName\n): string | false {\n\tconst letter = ( i: number ) =>\n\t\tString.fromCharCode( 'B'.charCodeAt( 0 ) + i );\n\treturn applyFilters< string | false >(\n\t\t'nab.isAlternativeInvalid',\n\t\tfalse,\n\t\talternative,\n\t\tletter( index ),\n\t\texperimentType\n\t);\n} //end getErrorWithAlternativeIfAny()\n\nfunction areGoalsInvalid(\n\tgoals: ReadonlyArray< Goal >,\n\tconversionActionTypes: ConversionActionTypes\n): string | false {\n\tif ( ! goals.length ) {\n\t\treturn _x( 'Test doesnt have any goals', 'text', 'nelio-ab-testing' );\n\t} //end if\n\n\tfor ( let i = 0; i < goals.length; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t} //end if\n\t\tconst errorWithGoal = isGoalInvalid( goal, i, conversionActionTypes );\n\t\tif ( errorWithGoal ) {\n\t\t\treturn errorWithGoal;\n\t\t} //end if\n\t} //end for\n\n\treturn false;\n} //end areGoalsInvalid()\n\nfunction isGoalInvalid(\n\tgoal: Goal,\n\tgoalIndex: number,\n\tconversionActionTypes: ConversionActionTypes\n): string | false {\n\tif ( ! goal.conversionActions.length ) {\n\t\treturn sprintf(\n\t\t\t/* translators: goal name */\n\t\t\t_x(\n\t\t\t\t'%s doesnt have any conversion actions',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\tgetGoalName( goal, goalIndex )\n\t\t);\n\t} //end if\n\n\tfor ( let i = 0; i < goal.conversionActions.length; ++i ) {\n\t\tconst conversionAction = goal.conversionActions[ i ];\n\t\tif ( ! conversionAction ) {\n\t\t\tcontinue;\n\t\t} //end if\n\t\tconst conversionActionType =\n\t\t\tconversionActionTypes[ conversionAction.type ];\n\t\tif ( ! conversionActionType ) {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: goal name */\n\t\t\t\t_x(\n\t\t\t\t\t'%s has one or more invalid conversion actions',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tgetGoalName( goal, goalIndex )\n\t\t\t);\n\t\t} //end if\n\n\t\tif (\n\t\t\t! isEmpty(\n\t\t\t\tconversionActionType.validate?.( conversionAction.attributes )\n\t\t\t) ||\n\t\t\t! isEmpty( getConversionActionScopeError( conversionAction.scope ) )\n\t\t) {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: goal name, as in Goal 2 or Default Goal */\n\t\t\t\t_x(\n\t\t\t\t\t'One or more conversion actions in %s are invalid',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tgetGoalName( goal, goalIndex )\n\t\t\t);\n\t\t} //end if\n\t} //end for\n\n\treturn false;\n} //end isGoalInvalid()\n\nfunction getGoalName( goal: Goal, index: number ): string {\n\tlet goalName = sprintf(\n\t\t/* translators: goal id */\n\t\t_x( 'Goal %d', 'text', 'nelio-ab-testing' ),\n\t\tindex + 1\n\t);\n\tif ( 0 === index ) {\n\t\tgoalName = _x( 'Default Goal', 'text', 'nelio-ab-testing' );\n\t} //end if\n\n\tif ( trim( goal.attributes.name ) ) {\n\t\tgoalName = sprintf(\n\t\t\t/* translators: goal name */\n\t\t\t_x( 'Goal %s', 'text', 'nelio-ab-testing' ),\n\t\t\ttrim( goal.attributes.name )\n\t\t);\n\t} //end if\n\n\treturn goalName;\n} //end getGoalName()\n\nfunction areSegmentsInvalid(\n\tsegments: ReadonlyArray< Segment >,\n\tsegmentationRuleTypes: SegmentationRuleTypes\n): string | false {\n\tfor ( let i = 0; i < segments.length; ++i ) {\n\t\tconst segment = segments[ i ];\n\t\tif ( ! segment ) {\n\t\t\tcontinue;\n\t\t} //end if\n\t\tconst errorWithSegment = isSegmentInvalid(\n\t\t\tsegment,\n\t\t\ti,\n\t\t\tsegmentationRuleTypes\n\t\t);\n\t\tif ( errorWithSegment ) {\n\t\t\treturn errorWithSegment;\n\t\t} //end if\n\t} //end for\n\n\treturn false;\n} //end areSegmentsInvalid()\n\nfunction isSegmentInvalid(\n\tsegment: Segment,\n\tsegmentIndex: number,\n\tsegmentationRuleTypes: SegmentationRuleTypes\n) {\n\tif ( ! segment.segmentationRules.length ) {\n\t\treturn sprintf(\n\t\t\t/* translators: segment name */\n\t\t\t_x(\n\t\t\t\t'%s doesnt have any segmentation rules',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\tgetSegmentName( segment, segmentIndex )\n\t\t);\n\t} //end if\n\n\tfor ( let i = 0; i < segment.segmentationRules.length; ++i ) {\n\t\tconst segmentationRule = segment.segmentationRules[ i ];\n\t\tif ( ! segmentationRule ) {\n\t\t\tcontinue;\n\t\t} //end if\n\t\tconst segmentationRuleType =\n\t\t\tsegmentationRuleTypes[ segmentationRule.type ];\n\t\tif ( ! segmentationRuleType ) {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: segment name */\n\t\t\t\t_x(\n\t\t\t\t\t'%s has one or more invalid segmentation rules',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tgetSegmentName( segment, segmentIndex )\n\t\t\t);\n\t\t} //end if\n\n\t\tif (\n\t\t\t! isEmpty(\n\t\t\t\tsegmentationRuleType.validate?.( segmentationRule.attributes )\n\t\t\t)\n\t\t) {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: segment name, as in Segment 2 */\n\t\t\t\t_x(\n\t\t\t\t\t'One or more segmentation rules in %s are invalid',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tgetSegmentName( segment, segmentIndex )\n\t\t\t);\n\t\t} //end if\n\t} //end for\n\n\treturn false;\n} //end isSegmentInvalid()\n\nfunction getSegmentName( segment: Segment, index: number ): string {\n\tlet segmentName = sprintf(\n\t\t/* translators: segment id */\n\t\t_x( 'Segment %d', 'text', 'nelio-ab-testing' ),\n\t\tindex + 1\n\t);\n\n\tif ( trim( segment.attributes.name ) ) {\n\t\tsegmentName = sprintf(\n\t\t\t/* translators: segment name */\n\t\t\t_x( 'Segment %s', 'text', 'nelio-ab-testing' ),\n\t\t\ttrim( segment.attributes.name )\n\t\t);\n\t} //end if\n\n\treturn segmentName;\n} //end getSegmentName()\n","/**\n * WordPress dependencies\n */\nimport { select } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { appendContextualHelp } from '@nab/components';\nimport { STORE_NAME as NAB_DATA } from '@nab/data';\nimport { STORE_NAME as NAB_EXPERIMENTS } from '@nab/experiments';\nimport type { Question, TutorialStep } from '@nab/components';\n\n/**\n * Internal dependencies\n */\nimport { STORE_NAME as NAB_EDITOR } from './store/config';\n\nexport function renderHelp(): void {\n\tconst typeName = select( NAB_EDITOR ).getExperimentType();\n\tappendContextualHelp( {\n\t\tscreen: `experiment-list:${ typeName }`,\n\t\tquestions,\n\t\twalkthrough: getWalkthrough( typeName ),\n\t} );\n} //end renderHelp()\n\nconst questions: ReadonlyArray< Question > = [\n\t{\n\t\tlabel: _x(\n\t\t\t'What is the original page or post of a test?',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t\tlink: _x(\n\t\t\t'https://neliosoftware.com/testing/help/what-is-the-original-page-or-post-of-a-test/',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'Why dont all my posts/pages appear in the selection list when Im creating a new test?',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t\tlink: _x(\n\t\t\t'https://neliosoftware.com/testing/help/why-dont-all-my-posts-appear-in-the-selection-list/',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'What is a conversion and what counts as one?',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t\tlink: _x(\n\t\t\t'https://neliosoftware.com/testing/help/what-is-a-conversion/',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'How can I track conversions occurring in third-party websites?',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t\tlink: _x(\n\t\t\t'https://neliosoftware.com/testing/help/how-can-i-track-conversions-occurring-in-third-party-websites/',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t},\n];\n\n// =======\n// HELPERS\n// =======\n\nfunction getWalkthrough( typeName: string ): ReadonlyArray< TutorialStep > {\n\tconst type = select( NAB_EXPERIMENTS ).getExperimentType( typeName );\n\tconst { isSubscribedTo } = select( NAB_DATA );\n\n\treturn [\n\t\t{\n\t\t\ttitle: _x( 'Test Editor', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Welcome to the Test Editor. Here youll be able to select the element you want to test and create one or more variants to find out which one converts the most. As you can see, its quite similar to WordPress Block Editor: theres a header, a sidebar, and a main area.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Name', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Youll notice that all test types have a similar user interface. When creating a new test, youll first have to name it. Just type in a descriptive name that helps you identify the test in the future.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () => document.querySelector( '.nab-experiment-title' ),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Variants', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Next, theres a Control Version and Variants section. Use it to (a) identify the element you want to test and (b) create one or more split testing variants.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector(\n\t\t\t\t\t'.nab-edit-experiment__alternative-section'\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Variant A', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: type?.help?.original ?? '',\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector(\n\t\t\t\t\t'.nab-alternative-list__alternative--original'\n\t\t\t\t),\n\t\t\tactive: () => !! type?.help?.original,\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Variant B', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: type?.help?.alternative ?? '',\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector(\n\t\t\t\t\t'.nab-alternative-list__alternative:not(.nab-alternative-list__alternative--original)'\n\t\t\t\t),\n\t\t\tactive: () =>\n\t\t\t\t!! type?.help?.alternative &&\n\t\t\t\t!! document.querySelector(\n\t\t\t\t\t'.nab-alternative-list__alternative:not(.nab-alternative-list__alternative--original)'\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Goals', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Split tests help you to improve the conversion rate of your website. Here you can set up the goals a test pursues and the specific conversion actions that, when performed by a visitor, will trigger a conversion.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector( '.nab-edit-experiment__goal-section' ),\n\t\t\tactive: () => ! type?.supports?.automaticGoalSetup,\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Goals', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Split tests help you to improve the conversion rate of your website. With this type of test, the conversion goal and conversion action that might trigger a conversion is already set up by Nelio A/B Testing.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector( '.nab-edit-experiment__goal-section' ),\n\t\t\tactive: () => !! type?.supports?.automaticGoalSetup,\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Actions', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Use these buttons to add the specific conversion actions that might trigger a conversion like, for example, visiting a page or clicking an element on the page.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector( '.nab-conversion-action-type-list' ),\n\t\t\tactive: () =>\n\t\t\t\t!! document.querySelector( '.nab-conversion-action-type-list' ),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Segmentation', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'If you subscribe to Nelio A/B Testing, youll be able to segment your visitors into groups and specify who may or may not participate in a test.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector(\n\t\t\t\t\t'.nab-edit-experiment__segmentation-section'\n\t\t\t\t),\n\t\t\tactive: () =>\n\t\t\t\t!! document.querySelector(\n\t\t\t\t\t'.nab-edit-experiment-segmentation-section__content--free'\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Segmentation', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'You can segment your audience into different groups and look at the performance of your split test with respect to each group. You can also use segmentation to limit who may or may not participate in a test.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector(\n\t\t\t\t\t'.nab-edit-experiment__segmentation-section'\n\t\t\t\t),\n\t\t\tactive: () =>\n\t\t\t\t! document.querySelector(\n\t\t\t\t\t'.nab-edit-experiment-segmentation-section__content--free'\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Status', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Here you can see the current status of your test: once its Ready, youll be able to start it. Also, if you subscribe to our Professional plan, youll be able to schedule when a test should be started, as well as to define if and when it should be automatically stopped.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector( '.nab-experiment-management' ),\n\t\t\tactive: () => ! isSubscribedTo( 'professional' ),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Status', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Here you can see the current status of your test: once its Ready, youll be able to start it. You can also schedule when the test should be started, as well as define a stop condition to automatically stop the test.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector( '.nab-experiment-management' ),\n\t\t\tactive: () => isSubscribedTo( 'professional' ),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Scope', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'By default, this type of test will show up on all pages of your website. You can limit its scope by specifying the URLs in which the test should be visible.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () => document.querySelector( '.nab-experiment-scope' ),\n\t\t\tactive: () =>\n\t\t\t\t'custom' === type?.supports?.scope ||\n\t\t\t\t'custom-with-tested-post' === type?.supports?.scope,\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Scope', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'This type of test applies to a specific element of your website, be it a page, a post, or what. If you enable Global Consistency, our plugin will also load the appropriate variant on any page in which the tested element (i.e. its title, featured image, and so on) shows up.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () => document.querySelector( '.nab-experiment-scope' ),\n\t\t\tactive: () =>\n\t\t\t\t'tested-post-with-consistency' === type?.supports?.scope,\n\t\t},\n\t];\n} //end getWalkthrough()\n","/**\n * WordPress dependencies\n */\nimport * as React from '@safe-wordpress/element';\nimport '@safe-wordpress/core-data';\nimport { dispatch } from '@safe-wordpress/data';\nimport domReady from '@safe-wordpress/dom-ready';\nimport { render } from '@safe-wordpress/element';\n\n/**\n * External dependencies\n */\nimport { debounce } from 'lodash';\nimport { registerCoreConversionActions } from '@nab/conversion-action-library';\nimport { STORE_NAME as NAB_DATA } from '@nab/data';\nimport { registerCoreExperiments } from '@nab/experiment-library';\nimport { registerCoreSegmentationRules } from '@nab/segmentation-rule-library';\nimport type { Dict, ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { Editor } from './components/editor';\n\nexport * from './store';\nexport * from './components/provider';\nexport * from './components/experiment-name';\nexport * from './components/header';\nexport * from './components/sidebar';\n\nexport function initializeExperimentEditor(\n\tid: string,\n\texperimentId: ExperimentId\n): void {\n\tconst target = document.getElementById( id );\n\tif ( ! target ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.warn( `Unable to find container node ${ id }.` );\n\t\treturn;\n\t} //end if\n\n\tregisterCoreExperiments();\n\tregisterCoreConversionActions();\n\tregisterCoreSegmentationRules();\n\n\trender( <Editor experimentId={ experimentId } />, target );\n} //end initializeExperimentEditor()\n\n// =======\n// HELPERS\n// =======\n\nfunction fixSidebarDimensions() {\n\tconst height = window.innerHeight;\n\tconst wpAdminBar = document.getElementById( 'wpadminbar' );\n\tconst adminBarHeight = wpAdminBar\n\t\t? wpAdminBar.getBoundingClientRect().height\n\t\t: 0;\n\n\tconst { setPageAttribute } = dispatch( NAB_DATA );\n\tsetPageAttribute( 'sidebarDimensions', {\n\t\ttop: adminBarHeight,\n\t\theight: `${ height - adminBarHeight }px`,\n\t\tapplyFix: 782 <= window.innerWidth, // medium breakpoint\n\t} );\n} //end fixSidebarDimensions()\nwindow.addEventListener( 'resize', debounce( fixSidebarDimensions, 100 ) );\ndomReady( fixSidebarDimensions );\n\n// ==========\n// TYPESCRIPT\n// ==========\n\ndeclare module '@wordpress/hooks' {\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\tfunction applyFilters(\n\t\thookName: 'nab.isTestedElementInvalid',\n\t\terror: false | string,\n\t\ttestedElement: Dict,\n\t\texperimentType: string\n\t): void;\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\tfunction addFilter(\n\t\thookName: 'nab.isTestedElementInvalid',\n\t\thookFunctionName: string,\n\t\thookFunction: (\n\t\t\terror: false | string,\n\t\t\ttestedElement: Dict,\n\t\t\texperimentType: string\n\t\t) => false | string\n\t): void;\n}\n\ndeclare module '@wordpress/hooks' {\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\tfunction applyFilters(\n\t\thookName: 'nab.isAlternativeInvalid',\n\t\terror: false | string,\n\t\talternative: Dict,\n\t\talternativeLetter: string,\n\t\texperimentType: string\n\t);\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\tfunction addFilter(\n\t\thookName: 'nab.isAlternativeInvalid',\n\t\thookFunctionName: string,\n\t\thookFunction: (\n\t\t\terror: false | string,\n\t\t\talternative: Dict,\n\t\t\talternativeLetter: string,\n\t\t\texperimentType: string\n\t\t) => false | string\n\t): void;\n}\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type { Alternative, AlternativeId } from '@nab/types';\n\nexport type AlternativeAction =\n\t| AddAlternatives\n\t| RemoveAlternatives\n\t| ReplaceAlternatives\n\t| UpdateAlternative;\n\nexport function addAlternatives(\n\talternatives: Alternative | ReadonlyArray< Alternative >\n): AddAlternatives {\n\treturn {\n\t\ttype: 'ADD_ALTERNATIVES',\n\t\talternatives: castArray( alternatives ),\n\t};\n} //end addAlternatives()\n\nexport function removeAlternatives(\n\tids: AlternativeId | ReadonlyArray< AlternativeId >\n): RemoveAlternatives {\n\treturn {\n\t\ttype: 'REMOVE_ALTERNATIVES',\n\t\tids: castArray( ids ),\n\t};\n} //end removeAlternatives()\n\nexport function replaceAlternatives(\n\toldIds: AlternativeId | ReadonlyArray< AlternativeId >,\n\talternatives: Alternative | ReadonlyArray< Alternative >\n): ReplaceAlternatives {\n\treturn {\n\t\ttype: 'REPLACE_ALTERNATIVES',\n\t\toldIds: castArray( oldIds ),\n\t\talternatives: castArray( alternatives ),\n\t};\n} //end replaceAlternatives()\n\nexport function setAlternative(\n\tid: AlternativeId,\n\talternative: Alternative\n): UpdateAlternative {\n\treturn {\n\t\ttype: 'SET_ALTERNATIVE',\n\t\tid,\n\t\talternative,\n\t};\n} //end setAlternative()\n\n// =====\n// TYPES\n// =====\n\ntype AddAlternatives = {\n\treadonly type: 'ADD_ALTERNATIVES';\n\treadonly alternatives: ReadonlyArray< Alternative >;\n};\n\ntype RemoveAlternatives = {\n\treadonly type: 'REMOVE_ALTERNATIVES';\n\treadonly ids: ReadonlyArray< AlternativeId >;\n};\n\ntype ReplaceAlternatives = {\n\treadonly type: 'REPLACE_ALTERNATIVES';\n\treadonly oldIds: ReadonlyArray< AlternativeId >;\n\treadonly alternatives: ReadonlyArray< Alternative >;\n};\n\ntype UpdateAlternative = {\n\treadonly type: 'SET_ALTERNATIVE';\n\treadonly id: AlternativeId;\n\treadonly alternative: Alternative;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type {\n\tConversionAction,\n\tConversionActionScope,\n\tConversionActionId,\n\tGoalId,\n\tMaybe,\n} from '@nab/types';\n\nexport type CAAction =\n\t| AddConversionActionsIntoGoal\n\t| ReplaceConversionActionsInGoal\n\t| RemoveConversionActionsFromGoal\n\t| UpdateConversionAction;\n\nexport function addConversionActionsIntoGoal(\n\tgoalId: GoalId,\n\tconversionActions: ConversionAction | ReadonlyArray< ConversionAction >\n): AddConversionActionsIntoGoal {\n\treturn {\n\t\ttype: 'ADD_CONVERSION_ACTIONS_INTO_GOAL',\n\t\tgoalId,\n\t\tconversionActions: castArray( conversionActions ),\n\t};\n} //end addConversionActionsIntoGoal()\n\nexport function replaceConversionActionsInGoal(\n\tgoalId: GoalId,\n\tconversionActions: ConversionAction | ReadonlyArray< ConversionAction >\n): ReplaceConversionActionsInGoal {\n\treturn {\n\t\ttype: 'REPLACE_CONVERSION_ACTIONS_IN_GOAL',\n\t\tgoalId,\n\t\tconversionActions: castArray( conversionActions ),\n\t};\n} //end replaceConversionActionsInGoal()\n\nexport function removeConversionActionsFromGoal(\n\tgoalId: GoalId,\n\tconversionActionIds:\n\t\t| ConversionActionId\n\t\t| ReadonlyArray< ConversionActionId >\n): RemoveConversionActionsFromGoal {\n\treturn {\n\t\ttype: 'REMOVE_CONVERSION_ACTIONS_FROM_GOAL',\n\t\tgoalId,\n\t\tconversionActionIds: castArray( conversionActionIds ),\n\t};\n} //end removeConversionActionsFromGoal()\n\nexport function updateConversionAction(\n\tgoalId: GoalId,\n\tconversionActionId: ConversionActionId,\n\tattributes: Maybe< ConversionAction[ 'attributes' ] >,\n\tscope: Maybe< ConversionActionScope >\n): UpdateConversionAction {\n\treturn {\n\t\ttype: 'UPDATE_CONVERSION_ACTION',\n\t\tgoalId,\n\t\tconversionActionId,\n\t\tattributes,\n\t\tscope,\n\t};\n} //end updateConversionAction()\n\n// =====\n// TYPES\n// =====\n\ntype AddConversionActionsIntoGoal = {\n\treadonly type: 'ADD_CONVERSION_ACTIONS_INTO_GOAL';\n\treadonly goalId: GoalId;\n\treadonly conversionActions: ReadonlyArray< ConversionAction >;\n};\n\ntype ReplaceConversionActionsInGoal = {\n\treadonly type: 'REPLACE_CONVERSION_ACTIONS_IN_GOAL';\n\treadonly goalId: GoalId;\n\treadonly conversionActions: ReadonlyArray< ConversionAction >;\n};\n\ntype RemoveConversionActionsFromGoal = {\n\treadonly type: 'REMOVE_CONVERSION_ACTIONS_FROM_GOAL';\n\treadonly goalId: GoalId;\n\treadonly conversionActionIds: ReadonlyArray< ConversionActionId >;\n};\n\ntype UpdateConversionAction = {\n\treadonly type: 'UPDATE_CONVERSION_ACTION';\n\treadonly goalId: GoalId;\n\treadonly conversionActionId: ConversionActionId;\n\treadonly attributes: Maybe< ConversionAction[ 'attributes' ] >;\n\treadonly scope: Maybe< ConversionActionScope >;\n};\n","/**\n * External dependencies\n */\nimport type { Experiment, GoalId, SegmentId } from '@nab/types';\n\nexport type EditorAction =\n\t| SetActiveGoal\n\t| SetActiveSegment\n\t| SetExperimentAsBeingSaved\n\t| SetDraftStatusRationale\n\t| SetExperimentAsRecentlySaved\n\t| SetupEditor\n\t| OpenAlternativePreviewer\n\t| CloseAlternativePreviewer;\n\nexport type SetupEditor = {\n\treadonly type: 'SETUP_EDITOR';\n\treadonly experiment: Experiment;\n};\n\nexport function setupEditor( experiment: Experiment ): SetupEditor {\n\treturn {\n\t\ttype: 'SETUP_EDITOR',\n\t\texperiment,\n\t};\n} //end setupEditor()\n\nexport function setActiveGoal( goalId: GoalId ): SetActiveGoal {\n\treturn {\n\t\ttype: 'SET_ACTIVE_GOAL',\n\t\tgoalId,\n\t};\n} //end setActiveGoal()\n\nexport function setActiveSegment( segmentId: SegmentId ): SetActiveSegment {\n\treturn {\n\t\ttype: 'SET_ACTIVE_SEGMENT',\n\t\tsegmentId,\n\t};\n} //end setActiveSegment()\n\nexport function setExperimentAsBeingSaved(\n\tstatus: boolean\n): SetExperimentAsBeingSaved {\n\treturn {\n\t\ttype: 'SET_EXPERIMENT_AS_BEING_SAVED',\n\t\tstatus,\n\t};\n} //end setExperimentAsBeingSaved()\n\nexport function setDraftStatusRationale(\n\trationale: string\n): SetDraftStatusRationale {\n\treturn {\n\t\ttype: 'SET_DRAFT_STATUS_RATIONALE',\n\t\trationale,\n\t};\n} //end setDraftStatusRationale()\n\nexport function setExperimentAsRecentlySaved(): SetExperimentAsRecentlySaved {\n\treturn {\n\t\ttype: 'SET_EXPERIMENT_AS_RECENTLY_SAVED',\n\t};\n} //end setExperimentAsBeingSaved()\n\nexport function openAlternativePreviewer(\n\turl: string\n): OpenAlternativePreviewer {\n\treturn {\n\t\ttype: 'OPEN_ALTERNATIVE_PREVIEWER',\n\t\turl,\n\t};\n} //end openAlternativePreviewer()\n\nexport function closeAlternativePreviewer(): CloseAlternativePreviewer {\n\treturn {\n\t\ttype: 'CLOSE_ALTERNATIVE_PREVIEWER',\n\t};\n} //end closeAlternativePreviewer()\n\n// =====\n// TYPES\n// =====\n\ntype SetActiveGoal = {\n\treadonly type: 'SET_ACTIVE_GOAL';\n\treadonly goalId: GoalId;\n};\n\ntype SetActiveSegment = {\n\treadonly type: 'SET_ACTIVE_SEGMENT';\n\treadonly segmentId: SegmentId;\n};\n\ntype SetExperimentAsBeingSaved = {\n\treadonly type: 'SET_EXPERIMENT_AS_BEING_SAVED';\n\treadonly status: boolean;\n};\n\ntype SetDraftStatusRationale = {\n\treadonly type: 'SET_DRAFT_STATUS_RATIONALE';\n\treadonly rationale: string;\n};\n\ntype SetExperimentAsRecentlySaved = {\n\treadonly type: 'SET_EXPERIMENT_AS_RECENTLY_SAVED';\n};\n\ntype OpenAlternativePreviewer = {\n\treadonly type: 'OPEN_ALTERNATIVE_PREVIEWER';\n\treadonly url: string;\n};\n\ntype CloseAlternativePreviewer = {\n\treadonly type: 'CLOSE_ALTERNATIVE_PREVIEWER';\n};\n","/**\n * Internal dependencies\n */\nimport type { ExperimentData, HeatmapAttributes } from '../types';\n\nexport type ExperimentDataAction =\n\t| SetExperimentData\n\t| SetTestedElementAsInvalid;\n\nexport function setExperimentData(\n\tattributes: Partial< ExperimentData >\n): SetExperimentData {\n\treturn {\n\t\ttype: 'UPDATE_EXPERIMENT_DATA',\n\t\tattributes,\n\t};\n} //end setExperimentData()\n\nexport function setHeatmapData(\n\tattributes: Partial< HeatmapAttributes >\n): SetExperimentData {\n\treturn {\n\t\ttype: 'UPDATE_EXPERIMENT_DATA',\n\t\tattributes,\n\t};\n} //end setExperimentData()\n\nexport function setTestedElementAsInvalid(\n\tinvalid: boolean\n): SetTestedElementAsInvalid {\n\treturn {\n\t\ttype: 'SET_TESTED_ELEMENT_AS_INVALID',\n\t\tinvalid,\n\t};\n} //end setTestedElementAsInvalid()\n\n// =====\n// TYPES\n// =====\n\ntype SetExperimentData = {\n\treadonly type: 'UPDATE_EXPERIMENT_DATA';\n\treadonly attributes: Partial< ExperimentData >;\n};\n\ntype SetTestedElementAsInvalid = {\n\treadonly type: 'SET_TESTED_ELEMENT_AS_INVALID';\n\treadonly invalid: boolean;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type { Goal, GoalId } from '@nab/types';\n\nexport type GoalAction = AddGoals | RemoveGoals | UpdateGoal;\n\nexport function addGoals( goals: Goal | ReadonlyArray< Goal > ): AddGoals {\n\treturn {\n\t\ttype: 'ADD_GOALS',\n\t\tgoals: castArray( goals ),\n\t};\n} //end addGoals()\n\nexport function removeGoals(\n\tids: GoalId | ReadonlyArray< GoalId >\n): RemoveGoals {\n\treturn {\n\t\ttype: 'REMOVE_GOALS',\n\t\tids: castArray( ids ),\n\t};\n} //end removeGoals()\n\nexport function updateGoal(\n\tgoalId: GoalId,\n\tattributes: Partial< Goal[ 'attributes' ] >\n): UpdateGoal {\n\treturn {\n\t\ttype: 'UPDATE_GOAL',\n\t\tgoalId,\n\t\tattributes,\n\t};\n} //end updateGoal()\n\n// =====\n// TYPES\n// =====\n\ntype AddGoals = {\n\treadonly type: 'ADD_GOALS';\n\treadonly goals: ReadonlyArray< Goal >;\n};\n\ntype RemoveGoals = {\n\treadonly type: 'REMOVE_GOALS';\n\treadonly ids: ReadonlyArray< GoalId >;\n};\n\ntype UpdateGoal = {\n\treadonly type: 'UPDATE_GOAL';\n\treadonly goalId: GoalId;\n\treadonly attributes: Partial< Goal[ 'attributes' ] >;\n};\n","export * from './alternatives';\nexport * from './conversion-actions';\nexport * from './editor';\nexport * from './experiment-data';\nexport * from './goals';\nexport * from './scope';\nexport * from './segmentation';\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type { ScopeRule, ScopeRuleId } from '@nab/types';\n\nexport type ScopeAction = AddScopeRules | RemoveScopeRules;\n\nexport function addScopeRules(\n\trules: ScopeRule | ReadonlyArray< ScopeRule >\n): AddScopeRules {\n\treturn {\n\t\ttype: 'ADD_SCOPE_RULES',\n\t\trules: castArray( rules ),\n\t};\n} //end addScopeRules()\n\nexport function removeScopeRules(\n\tids: ScopeRuleId | ReadonlyArray< ScopeRuleId >\n): RemoveScopeRules {\n\treturn {\n\t\ttype: 'REMOVE_SCOPE_RULES',\n\t\tids: castArray( ids ),\n\t};\n} //end removeScopeRules()\n\n// =====\n// TYPES\n// =====\n\ntype AddScopeRules = {\n\treadonly type: 'ADD_SCOPE_RULES';\n\treadonly rules: ReadonlyArray< ScopeRule >;\n};\n\ntype RemoveScopeRules = {\n\treadonly type: 'REMOVE_SCOPE_RULES';\n\treadonly ids: ReadonlyArray< ScopeRuleId >;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type {\n\tSegment,\n\tSegmentationRule,\n\tSegmentationRuleId,\n\tSegmentId,\n} from '@nab/types';\n\nexport type SegmentationAction =\n\t| AddSegments\n\t| RemoveSegments\n\t| UpdateSegment\n\t| AddSegmentationRulesIntoSegment\n\t| ReplaceSegmentationRulesInSegment\n\t| RemoveSegmentationRulesFromSegment\n\t| UpdateSegmentationRule\n\t| SetSegmentEvaluation;\n\nexport function addSegments(\n\tsegments: Segment | ReadonlyArray< Segment >\n): AddSegments {\n\treturn {\n\t\ttype: 'ADD_SEGMENTS',\n\t\tsegments: castArray( segments ),\n\t};\n} //end addSegments()\n\nexport function removeSegments(\n\tids: SegmentId | ReadonlyArray< SegmentId >\n): RemoveSegments {\n\treturn {\n\t\ttype: 'REMOVE_SEGMENTS',\n\t\tids: castArray( ids ),\n\t};\n} //end removeSegments()\n\nexport function updateSegment(\n\tsegmentId: SegmentId,\n\tattributes: Partial< Segment[ 'attributes' ] >\n): UpdateSegment {\n\treturn {\n\t\ttype: 'UPDATE_SEGMENT',\n\t\tsegmentId,\n\t\tattributes,\n\t};\n} //end updateSegment()\n\nexport function addSegmentationRulesIntoSegment(\n\tsegmentId: SegmentId,\n\tsegmentationRules: SegmentationRule | ReadonlyArray< SegmentationRule >\n): AddSegmentationRulesIntoSegment {\n\treturn {\n\t\ttype: 'ADD_SEGMENTATION_RULES_INTO_SEGMENT',\n\t\tsegmentId,\n\t\tsegmentationRules: castArray( segmentationRules ),\n\t};\n} //end addSegmentationRulesIntoSegment()\n\nexport function replaceSegmentationRulesInSegment(\n\tsegmentId: SegmentId,\n\tsegmentationRules: SegmentationRule | ReadonlyArray< SegmentationRule >\n): ReplaceSegmentationRulesInSegment {\n\treturn {\n\t\ttype: 'REPLACE_SEGMENTATION_RULES_IN_SEGMENT',\n\t\tsegmentId,\n\t\tsegmentationRules: castArray( segmentationRules ),\n\t};\n} //end replaceSegmentationRulesInSegment()\n\nexport function removeSegmentationRulesFromSegment(\n\tsegmentId: SegmentId,\n\tsegmentationRuleIds:\n\t\t| SegmentationRuleId\n\t\t| ReadonlyArray< SegmentationRuleId >\n): RemoveSegmentationRulesFromSegment {\n\treturn {\n\t\ttype: 'REMOVE_SEGMENTATION_RULES_FROM_SEGMENT',\n\t\tsegmentId,\n\t\tsegmentationRuleIds: castArray( segmentationRuleIds ),\n\t};\n} //end removeSegmentationRulesFromSegment()\n\nexport function updateSegmentationRule(\n\tsegmentId: SegmentId,\n\tsegmentationRuleId: SegmentationRuleId,\n\tattributes: Partial< SegmentationRule[ 'attributes' ] >\n): UpdateSegmentationRule {\n\treturn {\n\t\ttype: 'UPDATE_SEGMENTATION_RULE',\n\t\tsegmentId,\n\t\tsegmentationRuleId,\n\t\tattributes,\n\t};\n} //end updateSegmentationRule()\n\nexport function setSegmentEvaluation(\n\tstrategy: 'site' | 'tested-page'\n): SetSegmentEvaluation {\n\treturn {\n\t\ttype: 'SET_SEGMENT_EVALUATION',\n\t\tstrategy,\n\t};\n} //end setSegmentEvaluation()\n\n// =====\n// TYPES\n// =====\n\ntype AddSegments = {\n\treadonly type: 'ADD_SEGMENTS';\n\treadonly segments: ReadonlyArray< Segment >;\n};\n\ntype RemoveSegments = {\n\treadonly type: 'REMOVE_SEGMENTS';\n\treadonly ids: ReadonlyArray< SegmentId >;\n};\n\ntype UpdateSegment = {\n\treadonly type: 'UPDATE_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly attributes: Partial< Segment[ 'attributes' ] >;\n};\n\ntype AddSegmentationRulesIntoSegment = {\n\treadonly type: 'ADD_SEGMENTATION_RULES_INTO_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRules: ReadonlyArray< SegmentationRule >;\n};\n\ntype ReplaceSegmentationRulesInSegment = {\n\treadonly type: 'REPLACE_SEGMENTATION_RULES_IN_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRules: ReadonlyArray< SegmentationRule >;\n};\n\ntype RemoveSegmentationRulesFromSegment = {\n\treadonly type: 'REMOVE_SEGMENTATION_RULES_FROM_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRuleIds: ReadonlyArray< SegmentationRuleId >;\n};\n\ntype UpdateSegmentationRule = {\n\treadonly type: 'UPDATE_SEGMENTATION_RULE';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRuleId: SegmentationRuleId;\n\treadonly attributes: Partial< SegmentationRule[ 'attributes' ] >;\n};\n\ntype SetSegmentEvaluation = {\n\treadonly type: 'SET_SEGMENT_EVALUATION';\n\treadonly strategy: 'site' | 'tested-page';\n};\n","/**\n * Internal dependencies\n */\nimport type { State } from './types';\n\nexport const STORE_NAME = 'nab/editor';\n\nexport const INIT_STATE: State = {\n\teditor: {\n\t\tactiveGoalId: '',\n\t\tactiveSegmentId: '',\n\t\talternativePreviewerUrl: '',\n\t\tdraftStatusRationale: '',\n\t\thasExperimentBeenRecentlySaved: false,\n\t\tisExperimentBeingSaved: false,\n\t},\n\n\texperiment: {\n\t\talternatives: {\n\t\t\tbyId: {},\n\t\t\tallIds: [],\n\t\t},\n\n\t\tconversionActions: {},\n\n\t\tdata: {\n\t\t\tid: 0,\n\t\t\ttype: '',\n\t\t\tstatus: 'draft',\n\t\t\tname: '',\n\t\t\tdescription: '',\n\t\t\tstartDate: '',\n\t\t\tendDate: '',\n\t\t\tendMode: 'manual',\n\t\t\tendValue: 0,\n\t\t\tisTestedElementInvalid: false,\n\t\t\tlinks: {\n\t\t\t\tedit: '',\n\t\t\t\tpreview: '',\n\t\t\t},\n\t\t},\n\n\t\tgoals: {},\n\n\t\tscope: {},\n\n\t\tsegmentation: {\n\t\t\tevaluation: 'tested-page',\n\t\t\trules: {},\n\t\t\tsegments: {},\n\t\t},\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { registerStore, controls } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport type {\n\tAlternative,\n\tDict,\n\tMaybe,\n\tOmitFirstArgs,\n\tPromisifyReturnTypes,\n\tRemoveReturnTypes,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as realActions from './actions';\nimport * as sideEffects from './side-effects/actions';\nimport { STORE_NAME } from './config';\n\nexport { STORE_NAME } from './config';\n\nconst actions = { ...realActions, ...sideEffects };\n\nregisterStore( STORE_NAME, {\n\treducer,\n\tcontrols,\n\t// eslint-disable-next-line\n\tactions: actions as any,\n\tselectors,\n} );\n\n// ==========\n// TYPESCRIPT\n// ==========\n\nimport type { ExperimentAttributes, HeatmapAttributes } from './types';\n\ntype Actions = RemoveReturnTypes< typeof realActions > &\n\tPromisifyReturnTypes< RemoveReturnTypes< typeof sideEffects > >;\n\ntype Selectors = OmitFirstArgs<\n\tOmit<\n\t\ttypeof selectors,\n\t\t'getAlternative' | 'getExperimentAttribute' | 'getHeatmapAttribute'\n\t>\n> & {\n\treadonly getAlternative: < A extends Dict = Dict >(\n\t\tid: string\n\t) => Maybe< Alternative< A > >;\n\treadonly getExperimentAttribute: < K extends keyof ExperimentAttributes >(\n\t\tattribute: K\n\t) => ExperimentAttributes[ K ];\n\treadonly getHeatmapAttribute: < K extends keyof HeatmapAttributes >(\n\t\tattribute: K\n\t) => Maybe< HeatmapAttributes[ K ] >;\n};\n\ndeclare module '@wordpress/data' {\n\tfunction dispatch( key: typeof STORE_NAME ): Actions;\n\tfunction select( key: typeof STORE_NAME ): Selectors;\n}\n","/**\n * External dependencies\n */\nimport { difference, keyBy, map, omit, zip } from 'lodash';\nimport { isDefined, isEmpty } from '@nab/utils';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'alternatives' ];\n\nimport type { AlternativeAction } from '../actions/alternatives';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = AlternativeAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.alternatives;\n\nexport function alternatives( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n} //end alternatives()\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_ALTERNATIVES':\n\t\t\treturn {\n\t\t\t\tbyId: {\n\t\t\t\t\t...state.byId,\n\t\t\t\t\t...keyBy( action.alternatives, 'id' ),\n\t\t\t\t},\n\t\t\t\tallIds: [\n\t\t\t\t\t...state.allIds,\n\t\t\t\t\t...map( action.alternatives, 'id' ),\n\t\t\t\t],\n\t\t\t};\n\n\t\tcase 'REMOVE_ALTERNATIVES':\n\t\t\treturn {\n\t\t\t\tbyId: omit( state.byId, action.ids ),\n\t\t\t\tallIds: difference( state.allIds, action.ids ),\n\t\t\t};\n\n\t\tcase 'REPLACE_ALTERNATIVES': {\n\t\t\tconst pairs = zip(\n\t\t\t\taction.oldIds,\n\t\t\t\tmap( action.alternatives, 'id' )\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tbyId: {\n\t\t\t\t\t...omit( state.byId, action.oldIds ),\n\t\t\t\t\t...keyBy( action.alternatives, 'id' ),\n\t\t\t\t},\n\t\t\t\tallIds: [\n\t\t\t\t\t...state.allIds\n\t\t\t\t\t\t.map( ( id ) => {\n\t\t\t\t\t\t\tconst r = pairs.find( ( p ) => p[ 0 ] === id );\n\t\t\t\t\t\t\treturn r ? r[ 1 ] : id;\n\t\t\t\t\t\t} )\n\t\t\t\t\t\t.filter( isDefined ),\n\t\t\t\t\t...pairs\n\t\t\t\t\t\t.filter( ( p ) => ! p[ 0 ] )\n\t\t\t\t\t\t.map( ( p ) => p[ 1 ] )\n\t\t\t\t\t\t.filter( isDefined ),\n\t\t\t\t],\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_ALTERNATIVE':\n\t\t\tif ( ! action.alternative || isEmpty( action.alternative ) ) {\n\t\t\t\treturn state;\n\t\t\t} //end if\n\n\t\t\tif ( isEmpty( state.byId[ action.id ] ) ) {\n\t\t\t\treturn state;\n\t\t\t} //end if\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tbyId: {\n\t\t\t\t\t...state.byId,\n\t\t\t\t\t[ action.id ]: action.alternative,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR':\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn INIT_STATE;\n\t\t\t} //end if\n\n\t\t\treturn {\n\t\t\t\tbyId: keyBy( action.experiment.alternatives, 'id' ),\n\t\t\t\tallIds: map( action.experiment.alternatives, 'id' ),\n\t\t\t};\n\t} //end switch\n} //end actualReducer()\n","/**\n * External dependencies\n */\nimport { keyBy, omit } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'conversionActions' ];\n\nimport type { CAAction } from '../actions/conversion-actions';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = CAAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.conversionActions;\n\nexport function conversionActions(\n\tstate = INIT_STATE,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n} //end conversionActions()\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_CONVERSION_ACTIONS_INTO_GOAL':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: {\n\t\t\t\t\t...state[ action.goalId ],\n\t\t\t\t\t...keyBy( action.conversionActions, 'id' ),\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'REPLACE_CONVERSION_ACTIONS_IN_GOAL':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: {\n\t\t\t\t\t...keyBy( action.conversionActions, 'id' ),\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'UPDATE_CONVERSION_ACTION': {\n\t\t\tconst goal = state[ action.goalId ];\n\t\t\tif ( ! goal ) {\n\t\t\t\treturn state;\n\t\t\t} //end if\n\n\t\t\tconst oldConversionAction = goal[ action.conversionActionId ];\n\t\t\tif ( ! oldConversionAction ) {\n\t\t\t\treturn state;\n\t\t\t} //end if\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: {\n\t\t\t\t\t...goal,\n\t\t\t\t\t[ action.conversionActionId ]: {\n\t\t\t\t\t\t...oldConversionAction,\n\t\t\t\t\t\tattributes: action.attributes\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...oldConversionAction.attributes,\n\t\t\t\t\t\t\t\t\t...action.attributes,\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: oldConversionAction.attributes,\n\t\t\t\t\t\tscope: action.scope\n\t\t\t\t\t\t\t? action.scope\n\t\t\t\t\t\t\t: oldConversionAction.scope,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_CONVERSION_ACTIONS_FROM_GOAL':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: omit(\n\t\t\t\t\tstate[ action.goalId ],\n\t\t\t\t\taction.conversionActionIds\n\t\t\t\t),\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR':\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn {};\n\t\t\t} //end if\n\n\t\t\treturn action.experiment.goals.reduce( ( memo, goal ) => {\n\t\t\t\tmemo[ goal.id ] = keyBy( goal.conversionActions, 'id' );\n\t\t\t\treturn memo;\n\t\t\t}, {} as State );\n\t} //end switch\n} //end actualReducer()\n","/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\n/**\n * External dependencies\n */\nimport type { AnyAction } from '@nab/types';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'editor' ];\n\nimport type { EditorAction as Action } from '../actions/editor';\n\nconst INIT_STATE = IS.editor;\n\nexport function editor( state = INIT_STATE, action: AnyAction ): State {\n\tstate = { ...state, hasExperimentBeenRecentlySaved: false };\n\treturn actualReducer( state, action as Action ) ?? state;\n} //end editor()\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'SET_ACTIVE_GOAL':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveGoalId: action.goalId,\n\t\t\t};\n\n\t\tcase 'SET_ACTIVE_SEGMENT':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveSegmentId: action.segmentId,\n\t\t\t};\n\n\t\tcase 'SET_EXPERIMENT_AS_BEING_SAVED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisExperimentBeingSaved: !! action.status,\n\t\t\t};\n\n\t\tcase 'SET_EXPERIMENT_AS_RECENTLY_SAVED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\thasExperimentBeenRecentlySaved: true,\n\t\t\t};\n\n\t\tcase 'SET_DRAFT_STATUS_RATIONALE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdraftStatusRationale: action.rationale,\n\t\t\t};\n\n\t\tcase 'OPEN_ALTERNATIVE_PREVIEWER':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\talternativePreviewerUrl: action.url,\n\t\t\t};\n\n\t\tcase 'CLOSE_ALTERNATIVE_PREVIEWER':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\talternativePreviewerUrl: '',\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR':\n\t\t\treturn state;\n\t} //end switch\n} //end actualReducer()\n","/**\n * External dependencies\n */\nimport { omit } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'data' ];\n\nimport type { ExperimentDataAction } from '../actions/experiment-data';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = ExperimentDataAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.data;\n\nexport function data( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n} //end data()\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'UPDATE_EXPERIMENT_DATA':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...action.attributes,\n\t\t\t};\n\n\t\tcase 'SET_TESTED_ELEMENT_AS_INVALID':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisTestedElementInvalid: !! action.invalid,\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...omit( action.experiment, [\n\t\t\t\t\t'alternatives',\n\t\t\t\t\t'goals',\n\t\t\t\t\t'scope',\n\t\t\t\t\t'segments',\n\t\t\t\t] ),\n\t\t\t};\n\t} //end switch\n} //end actualReducer()\n","/**\n * External dependencies\n */\nimport { keyBy, omit } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'goals' ];\n\nimport type { GoalAction } from '../actions/goals';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = GoalAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.goals;\n\nexport function goals( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n} //end goals()\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_GOALS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...keyBy( action.goals, 'id' ),\n\t\t\t};\n\n\t\tcase 'UPDATE_GOAL': {\n\t\t\tconst goal = state[ action.goalId ];\n\t\t\tif ( ! goal ) {\n\t\t\t\treturn state;\n\t\t\t} //end if\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: {\n\t\t\t\t\t...goal,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\t...goal.attributes,\n\t\t\t\t\t\t...action.attributes,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_GOALS':\n\t\t\treturn omit( state, action.ids );\n\n\t\tcase 'SETUP_EDITOR':\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn {};\n\t\t\t} //end if\n\n\t\t\treturn keyBy(\n\t\t\t\taction.experiment.goals.map( ( g ) =>\n\t\t\t\t\tomit( g, 'conversionActions' )\n\t\t\t\t),\n\t\t\t\t'id'\n\t\t\t);\n\t} //end switch\n} //end actualReducer()\n","/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@safe-wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { editor } from './editor';\nimport { alternatives } from './alternatives';\nimport { conversionActions } from './conversion-actions';\nimport { data } from './experiment-data';\nimport { goals } from './goals';\nimport { scope } from './scope';\nimport { segmentation } from './segmentation';\n\nexport default combineReducers( {\n\teditor,\n\texperiment: combineReducers( {\n\t\talternatives,\n\t\tconversionActions,\n\t\tdata,\n\t\tgoals,\n\t\tscope,\n\t\tsegmentation,\n\t} ),\n} );\n","/**\n * External dependencies\n */\nimport { keyBy, omit } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'scope' ];\n\nimport type { ScopeAction } from '../actions/scope';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = ScopeAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.scope;\n\nexport function scope( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n} //end scope()\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_SCOPE_RULES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...keyBy( action.rules, 'id' ),\n\t\t\t};\n\n\t\tcase 'REMOVE_SCOPE_RULES':\n\t\t\treturn omit( state, action.ids );\n\n\t\tcase 'SETUP_EDITOR':\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn {};\n\t\t\t} //end if\n\n\t\t\treturn keyBy( action.experiment.scope, 'id' );\n\t} //end switch\n} //end actualReducer()\n","/**\n * External dependencies\n */\nimport { keyBy, omit } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'segmentation' ];\n\nimport type { SegmentationAction } from '../actions/segmentation';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = SegmentationAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.segmentation;\n\nexport function segmentation( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n} //end segmentation()\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_SEGMENTS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsegments: {\n\t\t\t\t\t...state.segments,\n\t\t\t\t\t...keyBy( action.segments, 'id' ),\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'UPDATE_SEGMENT': {\n\t\t\tconst oldSegment = state.segments[ action.segmentId ];\n\t\t\tif ( ! oldSegment ) {\n\t\t\t\treturn state;\n\t\t\t} //end if\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsegments: {\n\t\t\t\t\t...state.segments,\n\t\t\t\t\t[ action.segmentId ]: {\n\t\t\t\t\t\t...oldSegment,\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...oldSegment.attributes,\n\t\t\t\t\t\t\t...action.attributes,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_SEGMENTS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsegments: omit( state.segments, action.ids ),\n\t\t\t};\n\n\t\tcase 'ADD_SEGMENTATION_RULES_INTO_SEGMENT':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: {\n\t\t\t\t\t\t...state.rules[ action.segmentId ],\n\t\t\t\t\t\t...keyBy( action.segmentationRules, 'id' ),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'REPLACE_SEGMENTATION_RULES_IN_SEGMENT':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: {\n\t\t\t\t\t\t...keyBy( action.segmentationRules, 'id' ),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'UPDATE_SEGMENTATION_RULE': {\n\t\t\tconst segment = state.rules[ action.segmentId ];\n\t\t\tif ( ! segment ) {\n\t\t\t\treturn state;\n\t\t\t} //end if\n\n\t\t\tconst oldSegmentationRule = segment[ action.segmentationRuleId ];\n\t\t\tif ( ! oldSegmentationRule ) {\n\t\t\t\treturn state;\n\t\t\t} //end if\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: {\n\t\t\t\t\t\t...segment,\n\t\t\t\t\t\t[ action.segmentationRuleId ]: {\n\t\t\t\t\t\t\t...oldSegmentationRule,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t...oldSegmentationRule.attributes,\n\t\t\t\t\t\t\t\t...action.attributes,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_SEGMENTATION_RULES_FROM_SEGMENT':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: omit(\n\t\t\t\t\t\tstate.rules[ action.segmentId ],\n\t\t\t\t\t\taction.segmentationRuleIds\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'SET_SEGMENT_EVALUATION':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tevaluation: action.strategy,\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR':\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn state;\n\t\t\t} //end if\n\n\t\t\treturn {\n\t\t\t\tevaluation: action.experiment.segmentEvaluation,\n\t\t\t\trules: action.experiment.segments.reduce(\n\t\t\t\t\t( memo, segment ) => {\n\t\t\t\t\t\tmemo[ segment.id ] = keyBy(\n\t\t\t\t\t\t\tsegment.segmentationRules,\n\t\t\t\t\t\t\t'id'\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn memo;\n\t\t\t\t\t},\n\t\t\t\t\t{} as State[ 'rules' ]\n\t\t\t\t),\n\t\t\t\tsegments: keyBy(\n\t\t\t\t\taction.experiment.segments.map( ( segment ) =>\n\t\t\t\t\t\tomit( segment, 'segmentationRules' )\n\t\t\t\t\t),\n\t\t\t\t\t'id'\n\t\t\t\t),\n\t\t\t};\n\t} //end switch\n} //end actualReducer()\n","/**\n * External dependencies.\n */\nimport { values } from 'lodash';\nimport createSelector from 'rememo';\nimport type { Alternative, AlternativeId, Dict, Maybe } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport function getAlternative< A extends Dict = Dict >(\n\tstate: State,\n\tid: AlternativeId\n): Maybe< Alternative< A > > {\n\treturn state.experiment.alternatives.byId[ id ] as Alternative< A >;\n} //end getAlternative()\n\nexport const getAlternatives = createSelector(\n\t( state: State ): ReadonlyArray< Alternative > =>\n\t\tvalues( state.experiment.alternatives.byId ),\n\t( state: State ) => [ state.experiment.alternatives.byId ]\n);\n\nexport const getAlternativeIds = (\n\tstate: State\n): ReadonlyArray< AlternativeId > => state.experiment.alternatives.allIds;\n","/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport createSelector from 'rememo';\nimport type { ConversionAction, GoalId } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getConversionActions = createSelector(\n\t( state: State, goalId: GoalId ): ReadonlyArray< ConversionAction > =>\n\t\tvalues( state.experiment.conversionActions[ goalId ] ),\n\t( state: State, goalId: GoalId ) => [\n\t\tstate.experiment.conversionActions,\n\t\tgoalId,\n\t]\n);\n","/**\n * External dependencies\n */\nimport { filter, map } from 'lodash';\nimport type { Goal, Maybe, Segment } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport function isExperimentBeingSaved( state: State ): boolean {\n\treturn !! state.editor.isExperimentBeingSaved;\n} //end isExperimentBeingSaved()\n\nexport function hasExperimentBeenRecentlySaved( state: State ): boolean {\n\treturn !! state.editor.hasExperimentBeenRecentlySaved;\n} //end hasExperimentBeenRecentlySaved()\n\nexport function getActiveGoal(\n\tstate: State\n): Maybe< Omit< Goal, 'conversionActions' > > {\n\treturn (\n\t\tfilter( state.experiment.goals, {\n\t\t\tid: state.editor.activeGoalId,\n\t\t} )[ 0 ] || state.experiment.goals[ 0 ]\n\t);\n} //end getActiveGoal()\n\nexport function getActiveGoalIndex( state: State ): number {\n\treturn (\n\t\tmap( state.experiment.goals, 'id' ).indexOf(\n\t\t\tstate.editor.activeGoalId\n\t\t) || 0\n\t);\n} //end getActiveGoalIndex()\n\nexport function getActiveSegment(\n\tstate: State\n): Maybe< Omit< Segment, 'segmentationRules' > > {\n\treturn filter( state.experiment.segmentation.segments, {\n\t\tid: state.editor.activeSegmentId,\n\t} )[ 0 ];\n} //end getActiveSegment()\n\nexport function getActiveSegmentIndex( state: State ): number {\n\treturn (\n\t\tmap( state.experiment.segmentation.segments, 'id' ).indexOf(\n\t\t\tstate.editor.activeSegmentId\n\t\t) || 0\n\t);\n} //end getActiveSegmentIndex()\n\nexport function getDraftStatusRationale( state: State ): Maybe< string > {\n\tif ( ! state.experiment || ! state.experiment.data ) {\n\t\treturn;\n\t} //end if\n\n\tconst isDraft = [ 'draft', 'paused_draft' ].includes(\n\t\tstate.experiment.data.status\n\t);\n\tif ( ! isDraft ) {\n\t\treturn;\n\t} //end if\n\n\treturn state.editor.draftStatusRationale;\n} //end getDraftStatusRationale()\n\nexport function getAlternativePreviewerUrl( state: State ): string {\n\treturn state.editor.alternativePreviewerUrl;\n} //end getAlternativePreviewerUrl()\n","/**\n * External dependencies.\n */\nimport type { ExperimentId, ExperimentTypeName, Maybe } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { ExperimentAttributes, HeatmapAttributes, State } from '../types';\n\nexport function getExperimentId( state: State ): ExperimentId {\n\treturn state.experiment.data.id;\n} //end getExperimentId()\n\nexport function getExperimentType( state: State ): ExperimentTypeName {\n\treturn state.experiment.data.type;\n} //end getExperimentType()\n\nexport function getExperimentAttribute< K extends keyof ExperimentAttributes >(\n\tstate: State,\n\tattribute: K\n): ExperimentAttributes[ K ] {\n\treturn state.experiment.data[ attribute ];\n} //end getExperimentAttribute()\n\nexport function getHeatmapAttribute< K extends keyof HeatmapAttributes >(\n\tstate: State,\n\tattribute: K\n): Maybe< HeatmapAttributes[ K ] > {\n\treturn state.experiment.data[ attribute ];\n} //end getHeatmapAttribute()\n\nexport function isTestedElementInvalid( state: State ): boolean {\n\treturn !! state.experiment.data.isTestedElementInvalid;\n} //end isTestedElementInvalid()\n","/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport createSelector from 'rememo';\nimport type { Goal } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getGoals = createSelector(\n\t( state: State ): ReadonlyArray< Omit< Goal, 'conversionActions' > > =>\n\t\tvalues( state.experiment.goals ),\n\t( state: State ) => [ state.experiment.goals ]\n);\n","export * from './alternatives';\nexport * from './conversion-actions';\nexport * from './editor';\nexport * from './experiment-data';\nexport * from './goals';\nexport * from './scope';\nexport * from './segmentation';\n","/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport createSelector from 'rememo';\nimport type { ScopeRule } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getScope = createSelector(\n\t( state: State ): ReadonlyArray< ScopeRule > =>\n\t\tvalues( state.experiment.scope ),\n\t( state: State ) => [ state.experiment.scope ]\n);\n","/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport createSelector from 'rememo';\nimport type { Segment, SegmentId, SegmentationRule } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getSegments = createSelector(\n\t( state: State ): ReadonlyArray< Omit< Segment, 'segmentationRules' > > =>\n\t\tvalues( state.experiment.segmentation.segments ),\n\t( state: State ) => [ state.experiment.segmentation.segments ]\n);\n\nexport const getSegmentationRules = createSelector(\n\t( state: State, segmentId: SegmentId ): ReadonlyArray< SegmentationRule > =>\n\t\tvalues( state.experiment.segmentation.rules[ segmentId ] ),\n\t( state: State, segmentId: SegmentId ) => [\n\t\tstate.experiment.segmentation.rules,\n\t\tsegmentId,\n\t]\n);\n\nexport function getSegmentEvaluation( state: State ): 'site' | 'tested-page' {\n\treturn state.experiment.segmentation.evaluation;\n} //end getSegmentEvaluation()\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, select } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\nimport { store as noticesStore } from '@safe-wordpress/notices';\n\nconst NOTICES = noticesStore?.name ?? 'core/notices';\n\n/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport { STORE_NAME as NAB_DATA } from '@nab/data';\nimport type {\n\tAlternative,\n\tAlternativeId,\n\tConversionAction,\n\tECommercePlugin,\n\tExperiment,\n\tGoal,\n\tHeatmap,\n\tMaybe,\n\tOrderStatus,\n\tOrderStatusName,\n\tSegment,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { STORE_NAME as NAB_EDITOR } from '../../config';\n\nexport async function saveExperiment(): Promise< void > {\n\tconst isSaving = select( NAB_EDITOR ).isExperimentBeingSaved();\n\tif ( isSaving ) {\n\t\treturn;\n\t} //end if\n\tdispatch( NAB_EDITOR ).setExperimentAsBeingSaved( true );\n\n\tconst goals: Goal[] = [];\n\tconst goalsWithoutActions = select( NAB_EDITOR ).getGoals();\n\tfor ( const goal of goalsWithoutActions ) {\n\t\tconst actions = select( NAB_EDITOR ).getConversionActions( goal.id );\n\t\tconst ecommerce = getECommercePlugin( actions );\n\n\t\tgoals.push( {\n\t\t\t...goal,\n\t\t\tattributes: {\n\t\t\t\t...goal.attributes,\n\t\t\t\tuseOrderRevenue: !! ecommerce\n\t\t\t\t\t? goal.attributes.useOrderRevenue ?? true\n\t\t\t\t\t: undefined,\n\t\t\t\torderStatusForConversion: !! ecommerce\n\t\t\t\t\t? getOrderStatusForConversion( ecommerce, goal )\n\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t\tconversionActions: actions,\n\t\t} );\n\t} //end for\n\n\tconst segments: Segment[] = [];\n\tconst segmentsWithoutRules = select( NAB_EDITOR ).getSegments();\n\tfor ( const segment of segmentsWithoutRules ) {\n\t\tsegments.push( {\n\t\t\t...segment,\n\t\t\tsegmentationRules: select( NAB_EDITOR ).getSegmentationRules(\n\t\t\t\tsegment.id\n\t\t\t),\n\t\t} );\n\t} //end for\n\n\tconst nonControlAlternatives: Alternative[] = [];\n\tconst alternativeIds = select( NAB_EDITOR ).getAlternativeIds();\n\tconst isTestedElementInvalid =\n\t\tselect( NAB_EDITOR ).isTestedElementInvalid();\n\n\tconst control = select( NAB_EDITOR ).getAlternative( 'control' );\n\tfor ( const alternativeId of alternativeIds ) {\n\t\tif ( 'control' === alternativeId ) {\n\t\t\tcontinue;\n\t\t} //end if\n\t\tconst alt = select( NAB_EDITOR ).getAlternative( alternativeId );\n\t\tif ( alt ) {\n\t\t\tnonControlAlternatives.push( alt );\n\t\t} //end if\n\t} //end for\n\n\tlet experiment: Omit< Experiment, 'links' > | Omit< Heatmap, 'links' >;\n\tconst type = select( NAB_EDITOR ).getExperimentType();\n\tif ( 'nab/heatmap' === type ) {\n\t\texperiment = {\n\t\t\tid: select( NAB_EDITOR ).getExperimentId(),\n\t\t\ttype,\n\t\t\tname: select( NAB_EDITOR ).getExperimentAttribute( 'name' ),\n\t\t\tdescription:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'description' ),\n\t\t\tstatus: select( NAB_EDITOR ).getExperimentAttribute( 'status' ),\n\t\t\tstartDate:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'startDate' ),\n\t\t\tendDate: false,\n\t\t\tendMode: select( NAB_EDITOR ).getExperimentAttribute( 'endMode' ),\n\t\t\tendValue: select( NAB_EDITOR ).getExperimentAttribute( 'endValue' ),\n\t\t\ttrackingMode:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackingMode' ) ??\n\t\t\t\t'post',\n\t\t\ttrackedPostId:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackedPostId' ) ??\n\t\t\t\t0,\n\t\t\ttrackedPostType:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackedPostType' ) ??\n\t\t\t\t'page',\n\t\t\ttrackedUrl:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackedUrl' ) ?? '',\n\t\t};\n\t} else {\n\t\texperiment = {\n\t\t\tid: select( NAB_EDITOR ).getExperimentId(),\n\t\t\ttype,\n\t\t\tname: select( NAB_EDITOR ).getExperimentAttribute( 'name' ),\n\t\t\tdescription:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'description' ),\n\t\t\tstatus: select( NAB_EDITOR ).getExperimentAttribute( 'status' ),\n\t\t\tstartDate:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'startDate' ),\n\t\t\tendDate: false,\n\t\t\tendMode: select( NAB_EDITOR ).getExperimentAttribute( 'endMode' ),\n\t\t\tendValue: select( NAB_EDITOR ).getExperimentAttribute( 'endValue' ),\n\t\t\tscope: select( NAB_EDITOR ).getScope(),\n\t\t\t// TODO. Can we make this safer, without an explicit cast?\n\t\t\talternatives: isTestedElementInvalid\n\t\t\t\t? [ control as Alternative ]\n\t\t\t\t: [ control as Alternative, ...nonControlAlternatives ],\n\t\t\tgoals,\n\t\t\tsegmentEvaluation: select( NAB_EDITOR ).getSegmentEvaluation(),\n\t\t\tsegments,\n\t\t};\n\t} //end if\n\n\ttry {\n\t\tlet savedExperiment = await apiFetch< Experiment >( {\n\t\t\tpath: `/nab/v1/experiment/${ experiment.id }`,\n\t\t\tmethod: 'PUT',\n\t\t\tdata: experiment,\n\t\t} );\n\n\t\tif ( 'nab/heatmap' !== experiment.type && isTestedElementInvalid ) {\n\t\t\tsavedExperiment = {\n\t\t\t\t...savedExperiment,\n\t\t\t\talternatives: [\n\t\t\t\t\tsavedExperiment.alternatives[ 0 ],\n\t\t\t\t\t...nonControlAlternatives,\n\t\t\t\t],\n\t\t\t};\n\t\t} //end if\n\n\t\tdispatch( NAB_EDITOR ).setupEditor( savedExperiment );\n\t\tdispatch( NAB_EDITOR ).setExperimentAsBeingSaved( false );\n\t\tdispatch( NAB_EDITOR ).setExperimentAsRecentlySaved();\n\t} catch ( e ) {\n\t\tconst message = getErrorMessage( e );\n\t\tdispatch( NOTICES ).createErrorNotice( message );\n\t\tdispatch( NAB_EDITOR ).setExperimentAsBeingSaved( false );\n\t} //end try\n} //end saveExperiment()\n\nexport async function saveExperimentAndEditAlternative(\n\talternativeId: AlternativeId\n): Promise< void > {\n\tawait saveExperiment();\n\tif ( ! select( NAB_EDITOR ).hasExperimentBeenRecentlySaved() ) {\n\t\treturn;\n\t} //end if\n\n\tconst alternativeIds = select( NAB_EDITOR ).getAlternativeIds();\n\tif ( ! alternativeIds.includes( alternativeId ) ) {\n\t\treturn;\n\t} //end if\n\n\tconst alternative = select( NAB_EDITOR ).getAlternative( alternativeId );\n\tif ( ! alternative ) {\n\t\treturn;\n\t} //end if\n\n\tif ( ! alternative.links.edit ) {\n\t\treturn;\n\t} //end if\n\n\twindow.location.href = alternative.links.edit; // phpcs:ignore\n} //end saveExperimentAndEditAlternative()\n\nexport async function saveExperimentAndPreviewAlternative(\n\talternativeId: AlternativeId\n): Promise< void > {\n\tawait saveExperiment();\n\tif ( ! select( NAB_EDITOR ).hasExperimentBeenRecentlySaved() ) {\n\t\treturn;\n\t} //end if\n\n\tconst alternativeIds = select( NAB_EDITOR ).getAlternativeIds();\n\tif ( ! alternativeIds.includes( alternativeId ) ) {\n\t\treturn;\n\t} //end if\n\n\tconst alternative = select( NAB_EDITOR ).getAlternative( alternativeId );\n\tif ( ! alternative?.links.preview ) {\n\t\treturn;\n\t} //end if\n\n\tdispatch( NAB_EDITOR ).openAlternativePreviewer(\n\t\talternative.links.preview\n\t);\n} //end saveExperimentAndPreviewAlternative()\n\nexport async function moveToTrash(): Promise< void > {\n\tdispatch( NAB_EDITOR ).setExperimentData( { status: 'trash' } );\n\tawait saveExperiment();\n\t// phpcs:ignore\n\twindow.location.href = select( NAB_DATA ).getAdminUrl( 'edit.php', {\n\t\tpost_type: 'nab_experiment',\n\t} );\n} //end moveToTrash()\n\nexport async function startExperiment(): Promise< void > {\n\tawait startOrResumeExperiment(\n\t\t'start',\n\t\t_x( 'Test cant be started', 'text', 'nelio-ab-testing' )\n\t);\n} //end startExperiment()\n\nexport async function resumeExperiment(): Promise< void > {\n\tawait startOrResumeExperiment(\n\t\t'resume',\n\t\t_x( 'Test cant be resumed', 'text', 'nelio-ab-testing' )\n\t);\n} //end resumeExperiment()\n\n// =======\n// HELPERS\n// =======\n\nasync function startOrResumeExperiment(\n\taction: 'start' | 'resume',\n\terrorMessage?: string\n): Promise< void > {\n\tawait saveExperiment();\n\tif ( ! select( NAB_EDITOR ).hasExperimentBeenRecentlySaved() ) {\n\t\treturn;\n\t} //end if\n\n\tdispatch( NAB_EDITOR ).setExperimentAsBeingSaved( true );\n\tconst experimentId = select( NAB_EDITOR ).getExperimentId();\n\n\ttry {\n\t\tawait apiFetch( {\n\t\t\tpath: `/nab/v1/experiment/${ experimentId }/${ action }`,\n\t\t\tmethod: 'PUT',\n\t\t} );\n\t} catch ( e ) {\n\t\tconst message = getErrorMessage( e, errorMessage );\n\t\tdispatch( NOTICES ).createErrorNotice( message );\n\t\tdispatch( NAB_EDITOR ).setExperimentAsBeingSaved( false );\n\t\treturn;\n\t} //end if\n\n\t// phpcs:ignore\n\twindow.location.href = select( NAB_DATA ).getAdminUrl( 'admin.php', {\n\t\tpage: 'nelio-ab-testing-experiment-view',\n\t\texperiment: experimentId,\n\t} );\n} //end startOrResumeExperiment()\n\nfunction getECommercePlugin(\n\tactions: ReadonlyArray< ConversionAction >\n): Maybe< ECommercePlugin > {\n\tif ( ! actions.length ) {\n\t\treturn undefined;\n\t} //end if\n\n\tconst isWcOrder = ( { type }: ConversionAction ) => 'nab/wc-order' === type;\n\tif ( actions.every( isWcOrder ) ) {\n\t\treturn 'woocommerce';\n\t} //end if\n\n\tconst isEddOrder = ( { type }: ConversionAction ) =>\n\t\t'nab/edd-order' === type;\n\tif ( actions.every( isEddOrder ) ) {\n\t\treturn 'edd';\n\t} //end if\n\n\treturn undefined;\n} //end getECommercePlugin()\n\nfunction getOrderStatusForConversion(\n\tplugin: ECommercePlugin,\n\tgoal: Omit< Goal, 'conversionActions' >\n): OrderStatusName {\n\tconst validStatuses = select( NAB_DATA ).getECommerceSetting(\n\t\tplugin,\n\t\t'orderStatuses'\n\t);\n\n\tconst status = goal.attributes.orderStatusForConversion;\n\treturn status &&\n\t\tvalidStatuses.map( ( s: OrderStatus ) => s.value ).includes( status )\n\t\t? status\n\t\t: getDefaultOrderStatus( plugin );\n} //end getOrderStatusForConversion()\n\nfunction getDefaultOrderStatus( plugin: ECommercePlugin ): string {\n\tswitch ( plugin ) {\n\t\tcase 'woocommerce':\n\t\t\treturn 'wc-completed';\n\n\t\tcase 'edd':\n\t\t\treturn 'complete';\n\t} //end switch\n} //end getDefaultOrderStatus()\n\nfunction getErrorMessage( e: unknown, defaultMessage?: string ): string {\n\tconst exception: Exception = isException( e ) ? e : {};\n\tconst errors = exception.errors ? values( exception.errors ) : [];\n\treturn (\n\t\terrors[ 0 ] ||\n\t\texception.message ||\n\t\tdefaultMessage ||\n\t\t_x( 'Unknown error', 'text', 'nelio-ab-testing' )\n\t);\n} //end getErrorMessage()\n\ntype Exception = { errors?: [ string ]; message?: string };\nfunction isException( e: unknown ): e is Exception {\n\tif ( ! e || 'object' !== typeof e ) {\n\t\treturn false;\n\t} //end if\n\tif ( 'message' in e && 'string' === typeof e.message ) {\n\t\treturn true;\n\t} //end if\n\tif (\n\t\t'errors' in e &&\n\t\t'object' === typeof e.errors &&\n\t\t!! e.errors &&\n\t\t'0' in e.errors &&\n\t\t'string' === typeof e.errors[ 0 ]\n\t) {\n\t\treturn true;\n\t} //end if\n\treturn false;\n} //end isException()\n","export * from './editor';\n","/**\n * WordPress dependencies\n */\nimport baseApiFetch from '@wordpress/api-fetch';\nimport { format } from '@wordpress/date';\nimport { addQueryArgs } from '@wordpress/url';\n\nimport type { APIFetchOptions } from '@wordpress/api-fetch';\n\nconst apiFetch = < T >( options: APIFetchOptions ): Promise< T > => {\n\tconst { url, path } = options;\n\tconst nabts = format( 'YmjHi' ).substring( 0, 11 ) + '0';\n\treturn baseApiFetch( {\n\t\t...options,\n\t\t...( url && {\n\t\t\turl: isRestApiRequest( options )\n\t\t\t\t? addQueryArgs( url, { nabts } )\n\t\t\t\t: url,\n\t\t} ),\n\t\t...( path && { path: addQueryArgs( path, { nabts } ) } ),\n\t} );\n};\n\nexport * from '@wordpress/api-fetch';\nexport default apiFetch;\n\n// =======\n// HELPERS\n// =======\nconst isRestApiRequest = ( options: APIFetchOptions ): boolean =>\n\t!! options.url?.includes( '/wp-json/' ) ||\n\t!! options.url?.includes( 'rest_route' ) ||\n\t!! Object.keys( options ).includes( 'rest_route' );\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/block-editor';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/components';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/compose';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/core-data';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/data';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/dom-ready';\nimport domReady from '@wordpress/dom-ready';\nexport default domReady;\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/element';\nimport { createRoot, render as legacyRender } from '@wordpress/element';\n\nexport function render(\n\telement: JSX.Element,\n\tcontainer: Element | null\n): void {\n\tif ( ! container ) {\n\t\treturn;\n\t} //end if\n\n\tif ( createRoot ) {\n\t\tconst root = createRoot( container );\n\t\troot.render( element );\n\t} else {\n\t\tlegacyRender( element, container );\n\t} //end if\n} //end render()\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/hooks';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/i18n';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/notices';\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"React\"];","module.exports = window[\"lodash\"];","module.exports = window[\"nab\"][\"components\"];","module.exports = window[\"nab\"][\"conversionActionLibrary\"];","module.exports = window[\"nab\"][\"conversionActions\"];","module.exports = window[\"nab\"][\"data\"];","module.exports = window[\"nab\"][\"date\"];","module.exports = window[\"nab\"][\"experimentLibrary\"];","module.exports = window[\"nab\"][\"experiments\"];","module.exports = window[\"nab\"][\"i18n\"];","module.exports = window[\"nab\"][\"segmentationRuleLibrary\"];","module.exports = window[\"nab\"][\"segmentationRules\"];","module.exports = window[\"nab\"][\"utils\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"compose\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"date\"];","module.exports = window[\"wp\"][\"domReady\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"hooks\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"notices\"];","module.exports = window[\"wp\"][\"url\"];","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","'use strict';\n\n/** @typedef {(...args: any[]) => *[]} GetDependants */\n\n/** @typedef {() => void} Clear */\n\n/**\n * @typedef {{\n *   getDependants: GetDependants,\n *   clear: Clear\n * }} EnhancedSelector\n */\n\n/**\n * Internal cache entry.\n *\n * @typedef CacheNode\n *\n * @property {?CacheNode|undefined} [prev] Previous node.\n * @property {?CacheNode|undefined} [next] Next node.\n * @property {*[]} args Function arguments for cache entry.\n * @property {*} val Function result.\n */\n\n/**\n * @typedef Cache\n *\n * @property {Clear} clear Function to clear cache.\n * @property {boolean} [isUniqueByDependants] Whether dependants are valid in\n * considering cache uniqueness. A cache is unique if dependents are all arrays\n * or objects.\n * @property {CacheNode?} [head] Cache head.\n * @property {*[]} [lastDependants] Dependants from previous invocation.\n */\n\n/**\n * Arbitrary value used as key for referencing cache object in WeakMap tree.\n *\n * @type {{}}\n */\nvar LEAF_KEY = {};\n\n/**\n * Returns the first argument as the sole entry in an array.\n *\n * @template T\n *\n * @param {T} value Value to return.\n *\n * @return {[T]} Value returned as entry in array.\n */\nfunction arrayOf(value) {\n\treturn [value];\n}\n\n/**\n * Returns true if the value passed is object-like, or false otherwise. A value\n * is object-like if it can support property assignment, e.g. object or array.\n *\n * @param {*} value Value to test.\n *\n * @return {boolean} Whether value is object-like.\n */\nfunction isObjectLike(value) {\n\treturn !!value && 'object' === typeof value;\n}\n\n/**\n * Creates and returns a new cache object.\n *\n * @return {Cache} Cache object.\n */\nfunction createCache() {\n\t/** @type {Cache} */\n\tvar cache = {\n\t\tclear: function () {\n\t\t\tcache.head = null;\n\t\t},\n\t};\n\n\treturn cache;\n}\n\n/**\n * Returns true if entries within the two arrays are strictly equal by\n * reference from a starting index.\n *\n * @param {*[]} a First array.\n * @param {*[]} b Second array.\n * @param {number} fromIndex Index from which to start comparison.\n *\n * @return {boolean} Whether arrays are shallowly equal.\n */\nfunction isShallowEqual(a, b, fromIndex) {\n\tvar i;\n\n\tif (a.length !== b.length) {\n\t\treturn false;\n\t}\n\n\tfor (i = fromIndex; i < a.length; i++) {\n\t\tif (a[i] !== b[i]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/**\n * Returns a memoized selector function. The getDependants function argument is\n * called before the memoized selector and is expected to return an immutable\n * reference or array of references on which the selector depends for computing\n * its own return value. The memoize cache is preserved only as long as those\n * dependant references remain the same. If getDependants returns a different\n * reference(s), the cache is cleared and the selector value regenerated.\n *\n * @template {(...args: *[]) => *} S\n *\n * @param {S} selector Selector function.\n * @param {GetDependants=} getDependants Dependant getter returning an array of\n * references used in cache bust consideration.\n */\nexport default function (selector, getDependants) {\n\t/** @type {WeakMap<*,*>} */\n\tvar rootCache;\n\n\t/** @type {GetDependants} */\n\tvar normalizedGetDependants = getDependants ? getDependants : arrayOf;\n\n\t/**\n\t * Returns the cache for a given dependants array. When possible, a WeakMap\n\t * will be used to create a unique cache for each set of dependants. This\n\t * is feasible due to the nature of WeakMap in allowing garbage collection\n\t * to occur on entries where the key object is no longer referenced. Since\n\t * WeakMap requires the key to be an object, this is only possible when the\n\t * dependant is object-like. The root cache is created as a hierarchy where\n\t * each top-level key is the first entry in a dependants set, the value a\n\t * WeakMap where each key is the next dependant, and so on. This continues\n\t * so long as the dependants are object-like. If no dependants are object-\n\t * like, then the cache is shared across all invocations.\n\t *\n\t * @see isObjectLike\n\t *\n\t * @param {*[]} dependants Selector dependants.\n\t *\n\t * @return {Cache} Cache object.\n\t */\n\tfunction getCache(dependants) {\n\t\tvar caches = rootCache,\n\t\t\tisUniqueByDependants = true,\n\t\t\ti,\n\t\t\tdependant,\n\t\t\tmap,\n\t\t\tcache;\n\n\t\tfor (i = 0; i < dependants.length; i++) {\n\t\t\tdependant = dependants[i];\n\n\t\t\t// Can only compose WeakMap from object-like key.\n\t\t\tif (!isObjectLike(dependant)) {\n\t\t\t\tisUniqueByDependants = false;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Does current segment of cache already have a WeakMap?\n\t\t\tif (caches.has(dependant)) {\n\t\t\t\t// Traverse into nested WeakMap.\n\t\t\t\tcaches = caches.get(dependant);\n\t\t\t} else {\n\t\t\t\t// Create, set, and traverse into a new one.\n\t\t\t\tmap = new WeakMap();\n\t\t\t\tcaches.set(dependant, map);\n\t\t\t\tcaches = map;\n\t\t\t}\n\t\t}\n\n\t\t// We use an arbitrary (but consistent) object as key for the last item\n\t\t// in the WeakMap to serve as our running cache.\n\t\tif (!caches.has(LEAF_KEY)) {\n\t\t\tcache = createCache();\n\t\t\tcache.isUniqueByDependants = isUniqueByDependants;\n\t\t\tcaches.set(LEAF_KEY, cache);\n\t\t}\n\n\t\treturn caches.get(LEAF_KEY);\n\t}\n\n\t/**\n\t * Resets root memoization cache.\n\t */\n\tfunction clear() {\n\t\trootCache = new WeakMap();\n\t}\n\n\t/* eslint-disable jsdoc/check-param-names */\n\t/**\n\t * The augmented selector call, considering first whether dependants have\n\t * changed before passing it to underlying memoize function.\n\t *\n\t * @param {*}    source    Source object for derivation.\n\t * @param {...*} extraArgs Additional arguments to pass to selector.\n\t *\n\t * @return {*} Selector result.\n\t */\n\t/* eslint-enable jsdoc/check-param-names */\n\tfunction callSelector(/* source, ...extraArgs */) {\n\t\tvar len = arguments.length,\n\t\t\tcache,\n\t\t\tnode,\n\t\t\ti,\n\t\t\targs,\n\t\t\tdependants;\n\n\t\t// Create copy of arguments (avoid leaking deoptimization).\n\t\targs = new Array(len);\n\t\tfor (i = 0; i < len; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\n\t\tdependants = normalizedGetDependants.apply(null, args);\n\t\tcache = getCache(dependants);\n\n\t\t// If not guaranteed uniqueness by dependants (primitive type), shallow\n\t\t// compare against last dependants and, if references have changed,\n\t\t// destroy cache to recalculate result.\n\t\tif (!cache.isUniqueByDependants) {\n\t\t\tif (\n\t\t\t\tcache.lastDependants &&\n\t\t\t\t!isShallowEqual(dependants, cache.lastDependants, 0)\n\t\t\t) {\n\t\t\t\tcache.clear();\n\t\t\t}\n\n\t\t\tcache.lastDependants = dependants;\n\t\t}\n\n\t\tnode = cache.head;\n\t\twhile (node) {\n\t\t\t// Check whether node arguments match arguments\n\t\t\tif (!isShallowEqual(node.args, args, 1)) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif (node !== cache.head) {\n\t\t\t\t// Adjust siblings to point to each other.\n\t\t\t\t/** @type {CacheNode} */ (node.prev).next = node.next;\n\t\t\t\tif (node.next) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = cache.head;\n\t\t\t\tnode.prev = null;\n\t\t\t\t/** @type {CacheNode} */ (cache.head).prev = node;\n\t\t\t\tcache.head = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\tnode = /** @type {CacheNode} */ ({\n\t\t\t// Generate the result from original function\n\t\t\tval: selector.apply(null, args),\n\t\t});\n\n\t\t// Avoid including the source object in the cache.\n\t\targs[0] = null;\n\t\tnode.args = args;\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif (cache.head) {\n\t\t\tcache.head.prev = node;\n\t\t\tnode.next = cache.head;\n\t\t}\n\n\t\tcache.head = node;\n\n\t\treturn node.val;\n\t}\n\n\tcallSelector.getDependants = normalizedGetDependants;\n\tcallSelector.clear = clear;\n\tclear();\n\n\treturn /** @type {S & EnhancedSelector} */ (callSelector);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * as editor from './index';\n"],"names":["React","Modal","useDispatch","useSelect","_x","STORE_NAME","NAB_EDITOR","AlternativePreviewer","close","closeAlternativePreviewer","url","select","getAlternativePreviewerUrl","createElement","className","title","isDismissable","isDismissible","onRequestClose","shouldCloseOnClickOutside","src","Button","useEffect","useState","classnames","HelpIcon","NAB_EXPERIMENTS","createAlternative","getLetter","omitUndefineds","useExperimentAttribute","AlternativeContainer","_a","alternativeId","disabled","index","alternative","useAlternative","AlternativeView","useView","canBeRemoved","useCanBeRemoved","experimentType","useExperimentType","help","useHelp","isBeingSaved","useIsBeingSaved","isExternalEdit","useIsExternalEdit","isControl","_b","saveExperimentAndEditAlternative","saveExperimentAndPreviewAlternative","removeAlternatives","replaceAlternatives","setAlternative","attributes","setAttributes","id","__assign","variant","onClick","isDestructive","text","getExperimentType","useDefaults","type","defaults","didApplyDefaults","markApplyDefaults","getAlternative","attrs","original","undefined","status","getAlternativeIds","isPaused","includes","length","isExperimentBeingSaved","getExperimentView","view","Fragment","getHelpString","getExperimentSupport","Dashicon","ExternalLink","sprintf","difference","interpolateComponents","AnimatedList","NAB_DATA","addFreeTracker","AlternativeSection","useAlternativeIds","control","alternativeIds","slice","addAlternative","useAddAlternative","isExperimentPaused","useIsExperimentPaused","subscription","useSubscription","isTestedElementInvalid","useIsTestedElementInvalid","isReplacingAlternatives","useIsReplacingAlternatives","mixedString","components","icon","key","disableAnimations","exit","map","href","addAlternatives","getPluginSetting","prevAltIds","setPrevAltIds","prevStr","join","altIds","currStr","severalChanges","x","y","xs","split","ys","d1","d2","StrictMode","EditorProvider","Layout","renderHelp","Editor","experimentId","experiment","getExperiment","PlainText","ExperimentName","name","setName","value","placeholder","onChange","trim","createGoal","usePluginSetting","GoalList","activeGoalId","useActiveGoalId","goals","useGoals","isSubscribed","setActiveGoal","addGoals","goal","getDefaultGoalNameForIndex","getActiveGoal","getGoals","findIndex","isEqual","omit","Goal","GoalView","GoalSection","useAutoConversionActionsEffect","useActiveGoal","numberOfGoals","isAutomatic","useIsActiveGoalAutomatic","removeGoals","updateGoal","canGoalBeRemoved","removeActiveGoal","nextGoal","getAdjacentGoal","updateActiveGoal","removeGoal","hasExperimentSupport","replaceConversionActionsInGoal","goalId","automaticGoalSetup","conversionActions","getConversionActions","auto","removeIds","ca","ConversionAction","AutomaticConversionActionList","useConversionActions","action","readOnly","ConversionActionList","strong","Tooltip","every","filter","find","without","NAB_ACTIONS","createConversionAction","createConversionActionWithDefaults","ConversionActionTypeList","hasConversionActions","conversionActionTypes","useConversionActionTypes","addConversionActionsIntoGoal","act","Icon","position","getConversionActionTypes","isActive","wcOrder","eddOrder","apply","__spreadArray","PanelBody","useCallback","noop","getConversionActionScopeError","isEmpty","useExperimentId","goalIndex","useActiveGoalIndex","actionType","useConversionActionType","View","Edit","edit","scope","validate","errors","_scope","initialOpen","_c","useUpdater","setScope","remove","useRemove","getExperimentId","getActiveGoalIndex","getConversionActionType","actionId","updateConversionAction","update","removeConversionActionsFromGoal","CheckboxControl","SelectControl","ECommerceGoalSettings","plugin","useECommercePlugin","ActualSettings","useTitle","useOrderRevenueToggle","checked","onToggle","statuses","useECommerceOrderStatuses","useOrderStatus","orderStatus","setOrderStatus","label","options","actions","isWcOrder","isEddOrder","useGoal","useOrderRevenue","validStatuses","orderStatusForConversion","s","getDefaultOrderStatus","v","getECommerceSetting","TextControl","useRef","SubscribeWithCouponButton","isInTheFuture","Header","ref","useIcon","startLabel","useStartLabel","draftStatusRationale","useDraftStatusRationale","isDraft","hasExperimentBeenRecentlySaved","useHasBeenRecentlySaved","start","useStarter","saveExperiment","setExperimentData","saveExperimentAsReady","canUserStart","useCanUserStart","placement","getTooltipContainer","current","hasCapability","startDate","getExperimentTypes","experimentTypes","typeName","getDraftStatusRationale","resumeExperiment","startExperiment","attr","getExperimentAttribute","setValue","setting","useIsSubscribedTo","plan","isSubscribedTo","NoticeList","store","noticesStore","NOTICES","StatusManager","SegmentationSection","Sidebar","notices","useNotices","removeNotice","role","tabIndex","onRemove","getNotices","children","isReady","markAsReady","setupEditor","setActiveSegment","defaultGoal","activeSegment","segments","createSegment","SegmentList","activeSegmentId","useActiveSegmentId","useSegments","addSegments","segment","getDefaulSegmentNameForIndex","getActiveSegment","getSegments","SegmentationRuleList","SegmentationRuleTypeCategoryList","Segment","removeSegment","SegmentationRule","segmentId","useSegmentId","segmentationRules","useSegmentationRules","rule","getSegmentationRules","NAB_SEGMENTS","SegmentationRuleTypeCategory","segmentationRuleTypeCategories","useSegmentationRuleTypeCategories","category","getSegmentationRuleTypeCategories","DropdownMenu","createSegmentationRule","createSegmentationRuleWithDefaults","segmentationRuleTypes","useSegmentationRuleTypes","activeSegmentRules","useActiveSegmentRules","useSegmentationRuleCreator","controls","TypeIcon","isDisabled","some","toggleProps","ruleType","menuProps","catName","ruleTypes","getSegmentationRuleTypes","useActiveSegment","addSegmentationRulesIntoSegment","segmentIndex","useActiveSegmentIndex","useSegmentationRuleType","useSetAttributes","getActiveSegmentIndex","getSegmentationRuleType","ruleId","updateSegmentationRule","removeSegmentationRulesFromSegment","SegmentView","updateActiveSegment","useSegmentEvaluation","segmentEvaluation","setSegmentEvaluation","globalSegmentEvaluation","removeActiveSegment","useActiveSegmentRemover","canSegmentBeRemoved","doUpdate","updateSegment","removeSegments","nextSegment","getAdjacentSegment","getSegmentEvaluation","TextareaControl","Description","description","setDescription","Dropdown","PanelRow","useInstanceId","_n","numberFormat","ExperimentEndSchedule","instanceId","canBeScheduled","endMode","endValue","END_MODE_OPTIONS","useCustomValue","isCustom","setCustom","onUpdateEndSchedule","mode","contentClassName","renderToggle","isOpen","htmlFor","concat","getLabel","renderContent","getDefaultValue","END_MODES","style","marginTop","Number","parseInt","getCustomPlaceholder","shouldBeCustom","manual","confidence","percentage","duration","views","DateTimePicker","formatI18nDatetime","ExperimentStartSchedule","setStartDate","useIsPaused","date","noDateLabel","readonly","Status","ExperimentManagement","canDelete","useCanDelete","moveToTrash","getStatusLabel","Scope","dims","useSidebarDimensions","getPageAttribute","applyFix","__rest","createScopeRule","ConsistencyScope","rules","enableConsistency","useConsistencyEnabler","addScopeRules","removeScopeRules","consistency","NewRuleForm","RuleList","useRules","scopeSupport","useScopeSupport","testAgainstExistingContent","useTestAgainstExistingContent","getScope","ErrorText","isUrlFragmentInvalid","setType","addRule","error","OPTIONS","t","removeScopeRule","isCustomUrlScopeRule","r","keyBy","shouldExperimentBeDraft","useStatusUpdateEffect","useInvalidControlEffect","rationale","useDraftRationale","setStatus","setDraftStatusRationale","setStatusAndRationale","newStatus","newRationale","alternatives","useAlternatives","wasInvalid","setTestedElementAsInvalid","isInvalid","setRationale","JSON","stringify","getAlternatives","applyFilters","values","errorWithTestedElement","getErrorWithTestedElementIfAny","alts","errorWithAlternative","reduce","alt","getErrorWithAlternativeIfAny","errorWithGoals","areGoalsInvalid","errorWithSegments","areSegmentsInvalid","testedElement","isValid","letter","i","String","fromCharCode","charCodeAt","errorWithGoal","isGoalInvalid","getGoalName","conversionAction","conversionActionType","call","goalName","errorWithSegment","isSegmentInvalid","getSegmentName","segmentationRule","segmentationRuleType","segmentName","appendContextualHelp","screen","questions","walkthrough","getWalkthrough","link","intro","element","document","querySelector","active","_d","supports","dispatch","domReady","render","debounce","registerCoreConversionActions","registerCoreExperiments","registerCoreSegmentationRules","initializeExperimentEditor","target","getElementById","console","warn","fixSidebarDimensions","height","window","innerHeight","wpAdminBar","adminBarHeight","getBoundingClientRect","setPageAttribute","top","innerWidth","addEventListener","castArray","ids","oldIds","conversionActionIds","conversionActionId","setExperimentAsBeingSaved","setExperimentAsRecentlySaved","openAlternativePreviewer","setHeatmapData","invalid","replaceSegmentationRulesInSegment","segmentationRuleIds","segmentationRuleId","strategy","INIT_STATE","editor","alternativePreviewerUrl","byId","allIds","data","endDate","links","preview","segmentation","evaluation","registerStore","reducer","selectors","realActions","sideEffects","zip","isDefined","IS","state","actualReducer","pairs_1","p","oldConversionAction","_e","memo","g","combineReducers","oldSegment","oldSegmentationRule","_f","createSelector","indexOf","attribute","getHeatmapAttribute","apiFetch","isSaving","goalsWithoutActions","_i","goalsWithoutActions_1","ecommerce","getECommercePlugin","push","getOrderStatusForConversion","segmentsWithoutRules","segmentsWithoutRules_1","nonControlAlternatives","alternativeIds_1","trackingMode","trackedPostId","trackedPostType","trackedUrl","_g","path","method","savedExperiment","_h","sent","message","getErrorMessage","e_1","createErrorNotice","location","getAdminUrl","post_type","startOrResumeExperiment","errorMessage","e_2","page","e","defaultMessage","exception","isException","baseApiFetch","format","addQueryArgs","nabts","substring","isRestApiRequest","Object","keys","createRoot","legacyRender","container","root"],"sourceRoot":""}